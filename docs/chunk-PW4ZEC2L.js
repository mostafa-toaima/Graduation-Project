import{k as D}from"./chunk-QBW6WJLD.js";import{E as $,F as H,e as P}from"./chunk-MOUXYKIO.js";import{b as q,c as g,d as V,e as G,i as W,j as ie,l as j,m as B,n as ne,o as re,p as oe,r as z,t as R}from"./chunk-IZ7MSTAJ.js";import{D as ae,E as le,F as se,G as me,J as de,K as ce,M as ge,N as Q,O as pe,P as ue,W as Y,X as fe,Z as X}from"./chunk-VAZOZSJU.js";import{$ as ee,$b as N,Cb as k,Fb as i,Gb as n,Hb as s,Hc as te,Ic as A,Lb as F,Nb as u,Nc as U,Ob as c,W as E,Xb as o,Yb as C,Zb as S,ab as l,ac as I,bc as T,cc as L,dc as y,ea as K,fa as v,lb as M,na as f,oa as b,qb as p,s as _,t as J,wb as m,x as Z,xa as x,zb as O}from"./chunk-EH72ZWPZ.js";var w=class r{constructor(e,t){this.auth=e;this.firestore=t;this.user$=de(this.auth),this.isAdmin$=this.user$.pipe(E(a=>a?this.checkAdminStatus(a.uid):J(!1)))}user$;isAdmin$;checkAdminStatus(e){let t=Y(this.firestore,`users/${e}`);return _(fe(t)).pipe(E(a=>J(a.exists()&&a.data()?.role==="admin")))}setAdminStatus(e,t){let a=Y(this.firestore,`users/${e}`);return _(X(a,{role:t?"admin":"user"},{merge:!0}))}login(e,t){return _(ge(this.auth,e,t))}loginWithGoogle(){let e=new le;return _(Q(this.auth,e))}loginWithFacebook(){let e=new ae;return _(Q(this.auth,e))}register(e,t){return _(ce(this.auth,e,t)).pipe(E(a=>{let d=Y(this.firestore,`users/${a.user.uid}`);return _(X(d,{email:e,createdAt:new Date,role:"user"})).pipe(Z(()=>a))}))}logout(){return _(pe(this.auth))}isLoggedIn(){return this.auth.currentUser!==null}resetPassword(e){return _(se(this.auth,e))}static \u0275fac=function(t){return new(t||r)(K(me),K(ue))};static \u0275prov=ee({token:r,factory:r.\u0275fac,providedIn:"root"})};var Pe=()=>({width:"50rem"}),we=()=>({"960px":"75vw","640px":"90vw"});function Ee(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.firstNameError)}}function Me(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.lastNameError)}}function Oe(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.emailError)}}function ke(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.mobileError)}}function Fe(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.genderError)}}function Ne(r,e){if(r&1&&(i(0,"option",59),o(1),n()),r&2){let t=e.$implicit;m("value",t.name),l(),S(" ",t.name," ")}}function Ie(r,e){if(r&1&&(i(0,"option",59),o(1),n()),r&2){let t=e.$implicit;m("value",t),l(),S(" ",t," ")}}function Te(r,e){if(r&1&&(i(0,"option",59),o(1),n()),r&2){let t=e.$implicit;m("value",t),l(),S(" ",t," ")}}function Le(r,e){if(r&1&&(i(0,"div",58),o(1),n()),r&2){let t=c(2);l(),C(t.passwordError)}}function Ae(r,e){if(r&1&&(i(0,"div",60),s(1,"i",61),o(2),n()),r&2){let t=c(2);l(2),S("",t.registerError," ")}}function Ue(r,e){if(r&1){let t=F();i(0,"form",5),u("ngSubmit",function(){f(t);let d=c();return b(d.onSubmit())}),i(1,"div",6)(2,"div",7)(3,"h5",8),o(4,"Personal Information"),n(),i(5,"div",9)(6,"label",10),o(7,"First Name"),n(),i(8,"div",11),s(9,"i",12)(10,"input",13),n(),p(11,Ee,2,1,"div",14),n(),i(12,"div",9)(13,"label",15),o(14,"Last Name"),n(),i(15,"div",11),s(16,"i",12)(17,"input",16),n(),p(18,Me,2,1,"div",14),n(),i(19,"div",9)(20,"label",17),o(21,"Email Address"),n(),i(22,"div",11),s(23,"i",18)(24,"input",19),n(),p(25,Oe,2,1,"div",14),n(),i(26,"div",9)(27,"label",20),o(28,"Mobile Number"),n(),i(29,"div",11),s(30,"i",21)(31,"input",22),n(),p(32,ke,2,1,"div",14),n(),i(33,"div",9)(34,"label"),o(35,"Gender"),n(),i(36,"div",23)(37,"label",24),s(38,"input",25),i(39,"span",26),s(40,"i",27),o(41,"Male"),n()(),i(42,"label",24),s(43,"input",28),i(44,"span",26),s(45,"i",29),o(46,"Female"),n()()(),p(47,Fe,2,1,"div",14),n()(),i(48,"div",7)(49,"h5",8),o(50,"Academic Information"),n(),i(51,"div",9)(52,"label",30),o(53,"University"),n(),i(54,"div",11),s(55,"i",31),i(56,"select",32),u("change",function(){f(t);let d=c();return b(d.onUniversityChange())}),i(57,"option",33),o(58,"Select your university"),n(),p(59,Ne,2,2,"option",34),n()()(),i(60,"div",9)(61,"label",35),o(62,"Faculty"),n(),i(63,"div",11),s(64,"i",36),i(65,"select",37),u("change",function(){f(t);let d=c();return b(d.onFacultyChange())}),i(66,"option",33),o(67,"Select your faculty"),n(),p(68,Ie,2,2,"option",34),n()()(),i(69,"div",9)(70,"label",38),o(71,"Department"),n(),i(72,"div",11),s(73,"i",39),i(74,"select",40)(75,"option",33),o(76,"Select your department"),n(),p(77,Te,2,2,"option",34),n()()(),i(78,"div",9)(79,"label",41),o(80,"Password"),n(),i(81,"div",11),s(82,"i",42)(83,"input",43),n(),p(84,Le,2,1,"div",14),n()()(),i(85,"div",44),s(86,"input",45),i(87,"label",46),o(88," I agree to the "),i(89,"a",47),o(90,"Terms of Service"),n(),o(91," and "),i(92,"a",47),o(93,"Privacy Policy"),n()()(),p(94,Ae,3,1,"div",48),i(95,"button",49),s(96,"i",50),o(97,"Create Account "),n(),i(98,"div",51),o(99," Already have an account? "),i(100,"a",52),u("click",function(){f(t);let d=c();return b(d.switchToLogin())}),o(101,"Log in"),n()(),i(102,"div",53)(103,"p",54),o(104,"or continue with"),n(),i(105,"div",55)(106,"button",56),u("click",function(){f(t);let d=c();return b(d.onGoogleLogin())}),i(107,"span"),s(108,"i",57),o(109," Google"),n()()()()()}if(r&2){let t=c();m("formGroup",t.registerForm),l(11),m("ngIf",t.firstNameError),l(7),m("ngIf",t.lastNameError),l(7),m("ngIf",t.emailError),l(7),m("ngIf",t.mobileError),l(15),m("ngIf",t.genderError),l(12),m("ngForOf",t.universities),l(9),m("ngForOf",t.filteredFaculties),l(9),m("ngForOf",t.filteredDepartments),l(7),m("ngIf",t.passwordError),l(10),m("ngIf",t.registerError),l(),m("disabled",t.registerForm.invalid||t.isSubmitting)}}function De(r,e){r&1&&(i(0,"div",4)(1,"div",62)(2,"div",63),s(3,"div",64)(4,"div",65),n(),i(5,"h3"),o(6,"Creating Your Account"),n(),i(7,"p",66),o(8,"Analyzing your unique profile..."),n(),i(9,"div",67)(10,"p"),s(11,"i",68),o(12," Tip: The more specific your goals, the better our recommendations"),n()()()())}var he=class r{visible=!1;visibleChange=new x;requestToLogin=new x;registerSuccess=new x;messageService=v(P);authService=v(w);fb=v(z);router=v(D);universities=[{name:"Tanta",faculties:["Engineering","Science","Business"],departments:{Business:["BIS","English","Arabic"],Engineering:["Computer Science","Civil"],Science:["Physics","Chemistry"]}},{name:"Mansoura",faculties:["Engineering","Arts","Law"],departments:{Engineering:["Software","Mechanical"],Arts:["History","Philosophy"],Law:["Criminal","Civil"]}},{name:"Menoufia",faculties:["Engineering","Agriculture"],departments:{Engineering:["Electrical","Chemical"],Agriculture:["Plant Science","Animal Science"]}}];selectedUniversity="";selectedFaculty="";filteredFaculties=[];filteredDepartments=[];registerError="";isSubmitting=!1;registerForm=this.fb.group({firstName:["",g.required],lastName:["",g.required],email:["",[g.required,g.email]],university:["",g.required],faculty:["",g.required],department:["",g.required],mobile:["",[g.required,g.pattern("^[0-9]{10,15}$")]],password:["",[g.required,g.minLength(6)]],gender:["",g.required]});onUniversityChange(){let e=this.registerForm.get("university")?.value,t=this.universities.find(a=>a.name===e);t&&(this.filteredFaculties=t.faculties,this.filteredDepartments=[],this.registerForm.get("faculty")?.reset(),this.registerForm.get("department")?.reset(),this.selectedUniversity=e)}onFacultyChange(){let e=this.registerForm.get("faculty")?.value,t=this.universities.find(a=>a.name===this.selectedUniversity);t&&t.departments[e]&&(this.filteredDepartments=t.departments[e])}onSubmit(){if(this.registerForm.valid){this.isSubmitting=!0;let{firstName:e,email:t,password:a,mobile:d}=this.registerForm.value,h={name:e,email:t,password:a,mobile:d};this.authService.register(h.email,h.password).subscribe({next:()=>{this.isSubmitting=!1,this.registerSuccess.emit(!0),this.registerError="",this.closeDialog(),this.router.navigate(["/features"])},error:ve=>{this.isSubmitting=!1,ve?.code==="auth/email-already-in-use"?this.registerError="This email is already in use. Please try logging in or use a different email.":this.registerError="An error occurred. Please try again later."}})}else this.registerForm.markAllAsTouched()}showDialog(){this.visible=!0}closeDialog(){this.visible=!1,this.visibleChange.emit(!1)}switchToLogin(){this.requestToLogin.emit(),this.closeDialog()}onGoogleLogin(){this.authService.loginWithGoogle().subscribe({next:e=>{this.isSubmitting=!1,this.router.navigate(["/features"]),this.closeDialog()},error:e=>{this.isSubmitting=!1,this.messageService.add({severity:"error",summary:"Login Failed",detail:e?.message||"Invalid email or password."}),this.registerForm.reset(),console.error("Login error:",e),this.registerError=e?.message||"Invalid email or password."},complete:()=>{this.isSubmitting=!1}})}get firstNameError(){let e=this.registerForm.get("firstName");return e?.hasError("required")&&e?.touched?"First Name is required.":""}get lastNameError(){let e=this.registerForm.get("lastName");return e?.hasError("required")&&e?.touched?"Last Name is required.":""}get emailError(){let e=this.registerForm.get("email");return e?.hasError("required")&&e?.touched?"Email is required.":e?.hasError("email")&&e?.touched?"Invalid email address.":""}get mobileError(){let e=this.registerForm.get("mobile");return e?.hasError("required")&&e?.touched?"Mobile number is required.":e?.hasError("pattern")&&e?.touched?"Mobile number must be between 10 to 15 digits.":""}get passwordError(){let e=this.registerForm.get("password");return e?.hasError("required")&&e?.touched?"Password is required.":e?.hasError("minlength")&&e?.touched?"Password must be at least 6 characters long.":""}get genderError(){let e=this.registerForm.get("gender");return e?.hasError("required")&&e?.touched?"Gender selection is required.":""}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=M({type:r,selectors:[["sign-up"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange",requestToLogin:"requestToLogin",registerSuccess:"registerSuccess"},features:[L([P])],decls:5,vars:8,consts:[["header","Create Your Account",3,"visibleChange","onHide","modal","visible","breakpoints"],[1,"dialog-container"],[1,"dialog-content"],[3,"formGroup"],[1,"loading-state"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6"],[1,"section-title"],[1,"form-group","my-2"],["for","firstName"],[1,"input-wrapper"],[1,"pi","pi-user","input-icon"],["type","text","formControlName","firstName","id","firstName","placeholder","John",1,"form-control","input-field"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","formControlName","lastName","id","lastName","placeholder","Doe",1,"form-control","input-field"],["for","email"],[1,"pi","pi-envelope","input-icon"],["type","email","formControlName","email","id","email","placeholder","your@email.com",1,"form-control","input-field"],["for","mobile"],[1,"pi","pi-phone","input-icon"],["type","text","formControlName","mobile","id","mobile","placeholder","+1234567890",1,"form-control","input-field"],[1,"gender-options"],[1,"gender-option"],["type","radio","formControlName","gender","value","Male"],[1,"gender-label"],[1,"pi","pi-male","me-1"],["type","radio","formControlName","gender","value","Female"],[1,"pi","pi-female","me-1"],["for","university"],[1,"pi","pi-building","input-icon"],["formControlName","university","id","university",1,"form-control","select-field",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","faculty"],[1,"pi","pi-book","input-icon"],["formControlName","faculty","id","faculty",1,"form-control","select-field",3,"change"],["for","department"],[1,"pi","pi-briefcase","input-icon"],["formControlName","department","id","department",1,"form-control","select-field"],["for","password"],[1,"pi","pi-lock","input-icon"],["type","password","formControlName","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control","input-field"],[1,"form-check","terms-check"],["type","checkbox","id","terms","required","",1,"form-check-input"],["for","terms",1,"form-check-label"],["href","#",1,"terms-link"],["class","error-banner",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"pi","pi-user-plus","me-2"],[1,"text-center","mt-3"],["type","button",1,"login-link",3,"click"],[1,"social-login"],[1,"divider"],[1,"social-buttons","deck","justify-content-center","text-align-center"],["type","button",1,"btn","btn-social","btn-google",3,"click"],["disabled","",1,"pi","pi-google"],[1,"error-message"],[3,"value"],[1,"error-banner"],[1,"pi","pi-exclamation-triangle","me-2"],[1,"loading-animation"],[1,"spinner"],[1,"orbit"],[1,"planet"],[1,"loading-text"],[1,"loading-tips"],[1,"pi","pi-lightbulb"]],template:function(t,a){t&1&&(i(0,"p-dialog",0),T("visibleChange",function(h){return I(a.visible,h)||(a.visible=h),h}),u("onHide",function(){return a.closeDialog()}),i(1,"div",1)(2,"div",2),p(3,Ue,110,12,"form",3)(4,De,13,0,"div",4),n()()()),t&2&&(O(y(6,Pe)),m("modal",!0),N("visible",a.visible),m("breakpoints",y(7,we)),l(3),k(a.isSubmitting?4:3))},dependencies:[U,te,A,R,W,re,oe,q,ne,ie,V,G,j,B,H,$],styles:['.p-dialog{border-radius:16px!important;box-shadow:0 10px 50px #0003!important;border:none!important;overflow:hidden}  .p-dialog-header{background:linear-gradient(135deg,#4361ee,#3a0ca3)!important;color:#fff!important;padding:1.5rem!important;border-bottom:none!important}  .p-dialog-title{font-weight:600;font-size:1.5rem}  .p-dialog-content{padding:0!important;background:#f8f9fa!important}.dialog-container[_ngcontent-%COMP%]{padding:2rem}.dialog-content[_ngcontent-%COMP%]{max-width:100%}.section-title[_ngcontent-%COMP%]{color:#4361ee;font-weight:600;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e9ecef}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#495057}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c757d}.input-field[_ngcontent-%COMP%], .select-field[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 3rem;border:1px solid #ced4da;border-radius:8px;font-size:1rem;transition:all .3s ease;background-color:#fff}.input-field[_ngcontent-%COMP%]:focus, .select-field[_ngcontent-%COMP%]:focus{border-color:#4361ee;box-shadow:0 0 0 .2rem #4361ee33;outline:none}.gender-options[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.gender-option[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:.5rem}.gender-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;border-radius:8px;background:#e9ecef;transition:all .3s ease}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .gender-label[_ngcontent-%COMP%]{background:#4361ee;color:#fff}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4361ee,#3a0ca3);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a56d4,#2e0a8a);transform:translateY(-2px);box-shadow:0 4px 12px #4361ee4d}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #6c757d;color:#6c757d;background:transparent}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.social-login[_ngcontent-%COMP%]{margin:1.5rem 0}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;color:#6c757d;margin:1rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #dee2e6}.divider[_ngcontent-%COMP%]:before{margin-right:1rem}.divider[_ngcontent-%COMP%]:after{margin-left:1rem}.social-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.btn-google[_ngcontent-%COMP%]{background:#db4437;color:#fff;flex:1}.btn-facebook[_ngcontent-%COMP%]{background:#4267b2;color:#fff;flex:1}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%], .terms-link[_ngcontent-%COMP%]{color:#4361ee;text-decoration:none;font-weight:500;transition:all .2s ease}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover, .forgot-password[_ngcontent-%COMP%]:hover, .terms-link[_ngcontent-%COMP%]:hover{color:#3a0ca3;text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.error-banner[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545;padding:.75rem 1rem;border-radius:8px;margin:1rem 0;display:flex;align-items:center}.terms-check[_ngcontent-%COMP%]{margin:1.5rem 0}@media (max-width: 768px){.dialog-container[_ngcontent-%COMP%]{padding:1.5rem}.section-title[_ngcontent-%COMP%]{margin-top:1.5rem}.social-buttons[_ngcontent-%COMP%]{flex-direction:column}.flex-custom[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.btn-google[_ngcontent-%COMP%]{background:#eee;color:#db4437;flex:1;border:1px solid #db4437}']})};var qe=()=>({width:"30rem"}),Ve=()=>({"960px":"75vw","640px":"90vw"});function Ge(r,e){if(r&1&&(i(0,"div",30),o(1),n()),r&2){let t=c(2);l(),C(t.emailError)}}function We(r,e){if(r&1&&(i(0,"div",30),o(1),n()),r&2){let t=c(2);l(),C(t.passwordError)}}function je(r,e){if(r&1&&(i(0,"div",31),s(1,"i",32),o(2),n()),r&2){let t=c(2);l(2),S("",t.loginError," ")}}function Be(r,e){if(r&1){let t=F();i(0,"form",5),u("ngSubmit",function(){f(t);let d=c();return b(d.onSubmit())}),i(1,"div",6)(2,"label",7),o(3,"Email Address"),n(),i(4,"div",8),s(5,"i",9)(6,"input",10),n(),p(7,Ge,2,1,"div",11),n(),i(8,"div",6)(9,"label",12),o(10,"Password"),n(),i(11,"div",8),s(12,"i",13)(13,"input",14),n(),p(14,We,2,1,"div",11),n(),i(15,"div",15)(16,"div",16),s(17,"input",17),i(18,"label",18),o(19,"Remember me"),n()(),i(20,"button",19),u("click",function(){f(t);let d=c();return b(d.handleForgotPassword())}),o(21," Forgot password? "),n()(),p(22,je,3,1,"div",20),i(23,"button",21),s(24,"i",22),o(25,"Login "),n(),i(26,"div",23),o(27," Don't have an account? "),i(28,"a",24),u("click",function(){f(t);let d=c();return b(d.switchToSignup())}),o(29,"Sign up"),n()(),i(30,"div",25)(31,"p",26),o(32,"or continue with"),n(),i(33,"div",27)(34,"button",28),u("click",function(){f(t);let d=c();return b(d.onGoogleLogin())}),i(35,"span"),s(36,"i",29),o(37," Google"),n()()()()()}if(r&2){let t=c();m("formGroup",t.loginForm),l(7),m("ngIf",t.emailError),l(7),m("ngIf",t.passwordError),l(8),m("ngIf",t.loginError),l(),m("disabled",t.loginForm.invalid||t.isSubmitting),l(11),m("disabled",t.isSubmitting)}}function ze(r,e){r&1&&(i(0,"div",4)(1,"div",33)(2,"div",34),s(3,"div",35)(4,"div",36),n(),i(5,"h3"),o(6,"Logining In Your Account"),n(),i(7,"p",37),o(8," Analyzing your unique profile..."),n(),i(9,"div",38)(10,"p"),s(11,"i",39),o(12," Tip: The more specific your goals, the better our recommendations"),n()()()())}var _e=class r{visible=!1;registerSuccess=!1;visibleChange=new x;requestSignUp=new x;messageService=v(P);fb=v(z);router=v(D);authService=v(w);loginError="";isSubmitting=!1;showSignUp=!1;loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]]});onSubmit(){this.loginForm.valid?(this.isSubmitting=!0,this.authService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe({next:e=>{console.log("Login successful",this.loginForm.value,e),this.isSubmitting=!1,this.router.navigate(["/features"]),this.closeDialog()},error:e=>{console.error("Login error:",e),this.isSubmitting=!1,this.loginForm.reset(),this.loginError=e?.message||"Invalid email or password."},complete:()=>{this.isSubmitting=!1}})):this.loginForm.markAllAsTouched()}onGoogleLogin(){this.authService.loginWithGoogle().subscribe({next:e=>{this.isSubmitting=!1,this.messageService.add({severity:"success",summary:"Login Successful",detail:"Welcome back!"}),this.router.navigate(["/features"]),this.closeDialog()},error:e=>{this.isSubmitting=!1,this.messageService.add({severity:"error",summary:"Login Failed",detail:e?.message||"Invalid email or password."}),this.loginForm.reset(),console.error("Login error:",e),this.loginError=e?.message||"Invalid email or password."},complete:()=>{this.isSubmitting=!1}})}resetPasseord(e){this.authService.resetPassword(e).subscribe({next:t=>{console.log("res",t)},error:t=>{console.log("err ",t);let a=t.code,d=t.message}})}handleForgotPassword(){let e=this.loginForm.controls.email.value;if(!e){this.messageService.add({severity:"warn",summary:"Missing Email",detail:"Please enter your email to reset password."}),this.loginForm.controls.email.markAsTouched();return}this.resetPasseord(e)}showDialog(){this.visible=!0}closeDialog(){this.visible=!1,this.visibleChange.emit(!1),this.loginError=""}get emailError(){let e=this.loginForm.get("email");return e?.hasError("required")&&e?.touched?"Email is required.":e?.hasError("email")&&e?.touched?"Invalid email address.":""}get passwordError(){let e=this.loginForm.get("password");return e?.hasError("required")&&e?.touched?"Password is required.":e?.hasError("minlength")&&e?.touched?"Password must be at least 6 characters long.":""}switchToSignup(){this.closeDialog(),this.requestSignUp.emit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=M({type:r,selectors:[["login"]],inputs:{visible:"visible",registerSuccess:"registerSuccess"},outputs:{visibleChange:"visibleChange",requestSignUp:"requestSignUp"},features:[L([P])],decls:5,vars:8,consts:[["header","Welcome Back",3,"visibleChange","onHide","modal","visible","breakpoints"],[1,"dialog-container"],[1,"dialog-content"],[3,"formGroup"],[1,"loading-state"],[3,"ngSubmit","formGroup"],[1,"form-group","my-2"],["for","email"],[1,"input-wrapper"],[1,"pi","pi-envelope","input-icon"],["type","email","formControlName","email","id","email","placeholder","your@email.com",1,"form-control","input-field"],["class","error-message",4,"ngIf"],["for","password"],[1,"pi","pi-lock","input-icon"],["type","password","formControlName","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control","input-field"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"form-check"],["type","checkbox","id","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],["type","button","title","Coming soon...",1,"resetButton",3,"click"],["class","error-banner",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],[1,"pi","pi-sign-in","me-2"],[1,"text-center","mt-3"],["type","button",1,"signup-link",3,"click"],[1,"social-login"],[1,"divider"],[1,"social-buttons","deck","justify-content-center","text-align-center"],["type","button",1,"btn","btn-social","btn-google",3,"click","disabled"],["disabled","",1,"pi","pi-google"],[1,"error-message"],[1,"error-banner"],[1,"pi","pi-exclamation-triangle","me-2"],[1,"loading-animation"],[1,"spinner"],[1,"orbit"],[1,"planet"],[1,"loading-text"],[1,"loading-tips"],[1,"pi","pi-lightbulb"]],template:function(t,a){t&1&&(i(0,"p-dialog",0),T("visibleChange",function(h){return I(a.visible,h)||(a.visible=h),h}),u("onHide",function(){return a.closeDialog()}),i(1,"div",1)(2,"div",2),p(3,Be,38,6,"form",3)(4,ze,13,0,"div",4),n()()()),t&2&&(O(y(6,qe)),m("modal",!0),N("visible",a.visible),m("breakpoints",y(7,Ve)),l(3),k(a.isSubmitting?4:3))},dependencies:[U,A,R,W,q,V,G,j,B,H,$],styles:['.p-dialog{border-radius:16px!important;box-shadow:0 10px 50px #0003!important;border:none!important;overflow:hidden}  .p-dialog-header{background:linear-gradient(135deg,#4361ee,#3a0ca3)!important;color:#fff!important;padding:1.5rem!important;border-bottom:none!important}  .p-dialog-title{font-weight:600;font-size:1.5rem}  .p-dialog-content{padding:0!important;background:#f8f9fa!important}.dialog-container[_ngcontent-%COMP%]{padding:2rem}.dialog-content[_ngcontent-%COMP%]{max-width:100%}.section-title[_ngcontent-%COMP%]{color:#4361ee;font-weight:600;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e9ecef}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#495057}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c757d}.input-field[_ngcontent-%COMP%], .select-field[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 3rem;border:1px solid #ced4da;border-radius:8px;font-size:1rem;transition:all .3s ease;background-color:#fff}.input-field[_ngcontent-%COMP%]:focus, .select-field[_ngcontent-%COMP%]:focus{border-color:#4361ee;box-shadow:0 0 0 .2rem #4361ee33;outline:none}.gender-options[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.gender-option[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:.5rem}.gender-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;border-radius:8px;background:#e9ecef;transition:all .3s ease}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .gender-label[_ngcontent-%COMP%]{background:#4361ee;color:#fff}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4361ee,#3a0ca3);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a56d4,#2e0a8a);transform:translateY(-2px);box-shadow:0 4px 12px #4361ee4d}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #6c757d;color:#6c757d;background:transparent}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.social-login[_ngcontent-%COMP%]{margin:1.5rem 0}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;color:#6c757d;margin:1rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #dee2e6}.divider[_ngcontent-%COMP%]:before{margin-right:1rem}.divider[_ngcontent-%COMP%]:after{margin-left:1rem}.social-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.btn-google[_ngcontent-%COMP%]{background:#db4437;color:#fff;flex:1}.btn-facebook[_ngcontent-%COMP%]{background:#4267b2;color:#fff;flex:1}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%], .terms-link[_ngcontent-%COMP%]{color:#4361ee;text-decoration:none;font-weight:500;transition:all .2s ease}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover, .forgot-password[_ngcontent-%COMP%]:hover, .terms-link[_ngcontent-%COMP%]:hover{color:#3a0ca3;text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.error-banner[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545;padding:.75rem 1rem;border-radius:8px;margin:1rem 0;display:flex;align-items:center}.terms-check[_ngcontent-%COMP%]{margin:1.5rem 0}@media (max-width: 768px){.dialog-container[_ngcontent-%COMP%]{padding:1.5rem}.section-title[_ngcontent-%COMP%]{margin-top:1.5rem}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:60vh;background:#f8f9fa}.loading-animation[_ngcontent-%COMP%]{text-align:center;max-width:400px;padding:2rem}.spinner[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;margin:0 auto 1.5rem}.orbit[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border:2px dashed rgba(67,97,238,.3);border-radius:50%;animation:spin 15s linear infinite}.planet[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:30px;height:30px;background:#4361ee;border-radius:50%;box-shadow:0 0 20px #4361ee80}.loading-animation[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;margin-bottom:.5rem;font-size:1.25rem}.loading-text[_ngcontent-%COMP%]{color:#718096;margin-bottom:1.5rem}.progress-tracker[_ngcontent-%COMP%]{height:6px;background:#e2e8f0;border-radius:3px;margin-bottom:1.5rem;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4361ee,#3a0ca3);width:0%;transition:width .4s ease}.loading-tips[_ngcontent-%COMP%]{background:#edf2f7;padding:.75rem;border-radius:8px;color:#4a5568;font-size:.9rem}.loading-tips[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4361ee;margin-right:.5rem}.btn-google[_ngcontent-%COMP%]{background:#eee;color:#db4437;flex:1;border:1px solid #db4437}.resetButton[_ngcontent-%COMP%]{background:none;border:none;color:#4361ee;font-weight:500;cursor:pointer;padding:0;transition:color .2s ease,text-decoration .2s ease;text-decoration:none;font-size:.95rem}.resetButton[_ngcontent-%COMP%]:hover{color:#3a0ca3;text-decoration:underline}']})};export{w as a,he as b,_e as c};
