import{a as Ee,b as Re,c as Pe,d as Ne,e as ve,f as ke,g as xe,h as Ih,i as bh,j as Sh,k as Ch,l as At,m as Ah,n as Rh,o as Ph,p as hn,q as Nh,r as kh,s as xh,t as ei,u as Qh}from"./chunk-7IBJJ5RL.js";import{a as Dh}from"./chunk-GDZ65IVB.js";import{c as nh,d as ih,e as rh,f as sh,g as oh,i as ah,k as lh,l as ch,m as sn,n as uh,o as hh,p as dh}from"./chunk-PZOLTQLE.js";import{a as Oh,b as st,c as Mh,d as Fh,g as Lh,h as Vh,j as Uh,k as Bh,l as qh,m as $h,n as jh,o as zh,q as Gh}from"./chunk-NWN5KROT.js";import{D as Wh,E as Hh,e as Ro,k as H,l as Rt,o as Kh,p as Po,v as ti,w as No,x as Wr}from"./chunk-DPGU3KIH.js";import{$ as Me,$a as zu,A as wo,Ab as A,Ba as dt,Bb as P,Ca as To,Cb as U,Cc as eh,Db as $r,Dc as zr,Eb as jr,Fa as Bu,Gb as nn,Gc as th,H as Fu,Hc as Wn,Ib as ye,Jb as ne,Jc as Hn,K as Lu,Kc as Qn,N as Vu,Q as Uu,R as Eo,Sb as D,Tb as Bt,U as Z,Ua as qu,Ub as rn,W as Vt,Wa as $u,Wb as Hu,Xa as $,Xb as Qu,Yb as Yu,Z as Te,Zb as Xu,_a as ju,_b as Bi,aa as Ut,ba as W,ca as Ie,ec as Gn,fc as Kn,gb as tn,ia as je,ja as ze,kc as Ju,lb as be,o as Ui,oa as _e,qb as Gu,rb as te,s as vo,sa as qr,ta as he,tb as zn,u as Mu,ub as Ku,wb as Wu,xc as Zu}from"./chunk-OLUWRMG6.js";import{a as Yh}from"./chunk-ZT4VD254.js";import{$ as Ge,A as _h,B as yh,C as St,D as Tn,E as Co,F as $i,G as ln,H as vh,K as wh,M as Eh,N as Th,O as ji,P as zi,Q as we,R as Ce,S as cn,T as Ct,U as Ao,V as Kr,W as Ae,X as Fe,Y as qt,Z as un,a as O,b as Yn,ba as q,c as fh,d as ph,f as mh,i as on,k as Io,l as Xn,n as bo,p as So,q as gh,s as It,t as an,u as Jn,v as qi,w as bt,x as Zn,y as Gr,z as Se}from"./chunk-7E5E4JX3.js";import{a as Lt,b as yo,c as Ou,e as M}from"./chunk-ACKELEN3.js";var Hr=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=tn({type:n,selectors:[["common-footer"]],decls:86,vars:0,consts:[[1,"site-footer"],[1,"footer-container"],[1,"footer-grid"],[1,"footer-column"],[1,"footer-logo"],["src","assets/images/career-goals.png","width","40","alt","CareerPath Logo"],[1,"footer-about"],[1,"footer-newsletter"],[1,"newsletter-form"],["type","email","placeholder","Your email address"],["type","submit"],[1,"pi","pi-send"],[1,"footer-title"],[1,"footer-links"],["routerLink","/home"],["routerLink","/features"],["routerLink","/build-career"],["routerLink","/career-path"],["routerLink","/roadmap"],["href","#"],[1,"footer-social"],["href","#","aria-label","Facebook",1,"social-icon"],[1,"pi","pi-facebook"],["href","#","aria-label","Twitter",1,"social-icon"],[1,"pi","pi-twitter"],["href","#","aria-label","LinkedIn",1,"social-icon"],[1,"pi","pi-linkedin"],["href","#","aria-label","Instagram",1,"social-icon"],[1,"pi","pi-instagram"],["href","#","aria-label","GitHub",1,"social-icon"],[1,"pi","pi-github"],[1,"footer-contact"],[1,"pi","pi-envelope"],[1,"pi","pi-phone"],[1,"footer-bottom"],[1,"footer-legal"],[1,"footer-copyright"]],template:function(t,i){t&1&&(A(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),U(5,"img",5),A(6,"span"),D(7,"CareerPath"),P()(),A(8,"p",6),D(9," Empowering your journey to becoming a world-class developer through structured learning paths and real-world projects. "),P(),A(10,"div",7)(11,"h4"),D(12,"Stay Updated"),P(),A(13,"div",8),U(14,"input",9),A(15,"button",10),U(16,"i",11),P()()()(),A(17,"div",3)(18,"h3",12),D(19,"Quick Links"),P(),A(20,"ul",13)(21,"li")(22,"a",14),D(23,"Home"),P()(),A(24,"li")(25,"a",15),D(26,"Features"),P()(),A(27,"li")(28,"a",16),D(29,"Build Career"),P()(),A(30,"li")(31,"a",17),D(32,"Career Path"),P()(),A(33,"li")(34,"a",18),D(35,"Roadmap"),P()()()(),A(36,"div",3)(37,"h3",12),D(38,"Resources"),P(),A(39,"ul",13)(40,"li")(41,"a",19),D(42,"Documentation"),P()(),A(43,"li")(44,"a",19),D(45,"Tutorials"),P()(),A(46,"li")(47,"a",19),D(48,"Blog"),P()(),A(49,"li")(50,"a",19),D(51,"FAQ"),P()(),A(52,"li")(53,"a",19),D(54,"Support"),P()()()(),A(55,"div",3)(56,"h3",12),D(57,"Connect With Us"),P(),A(58,"div",20)(59,"a",21),U(60,"i",22),P(),A(61,"a",23),U(62,"i",24),P(),A(63,"a",25),U(64,"i",26),P(),A(65,"a",27),U(66,"i",28),P(),A(67,"a",29),U(68,"i",30),P()(),A(69,"div",31)(70,"p"),U(71,"i",32),D(72," mtoaima@bis.com"),P(),A(73,"p"),U(74,"i",33),D(75," +20 111 084 4808"),P()()()(),A(76,"div",34)(77,"div",35)(78,"a",19),D(79,"Privacy Policy"),P(),A(80,"a",19),D(81,"Terms of Service"),P(),A(82,"a",19),D(83,"Cookie Policy"),P()(),A(84,"div",36),D(85," \xA9 2025 CareerPath. All rights reserved. "),P()()()())},styles:['.site-footer[_ngcontent-%COMP%]{background:#2e4182;color:#fff;padding:4rem 0 0;position:relative;font-family:Inter,sans-serif}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 2rem}.footer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:3rem;margin-bottom:3rem}.footer-column[_ngcontent-%COMP%]{padding:0 1rem}.footer-logo[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem}.footer-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:.75rem}.footer-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;background:linear-gradient(90deg,#a8b7ff,#fff);-webkit-background-clip:text;background-clip:text;color:transparent}.footer-about[_ngcontent-%COMP%]{color:#fffc;line-height:1.6;margin-bottom:2rem}.footer-newsletter[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1rem;color:#fff}.newsletter-form[_ngcontent-%COMP%]{display:flex;border-radius:8px;overflow:hidden;box-shadow:0 4px 6px #0000001a}.newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:none;font-size:1rem;background:#ffffffe6}.newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4361ee;color:#fff;border:none;padding:0 1.25rem;cursor:pointer;transition:all .3s ease}.newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#3a56d4}.footer-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1.5rem;position:relative;padding-bottom:.75rem;color:#fff}.footer-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:50px;height:3px;background:#4361ee;border-radius:3px}.footer-links[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffc;text-decoration:none;transition:all .3s ease;display:inline-block;position:relative}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;transform:translate(5px)}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;width:0;height:2px;bottom:-2px;left:0;background:#4361ee;transition:width .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}.footer-social[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem}.social-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#ffffff1a;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.1rem;transition:all .3s ease}.social-icon[_ngcontent-%COMP%]:hover{background:#4361ee;transform:translateY(-3px)}.footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fffc;margin-bottom:.75rem}.footer-contact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;color:#4361ee}.footer-bottom[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding:1.5rem 0;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.footer-legal[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.footer-legal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffb3;text-decoration:none;font-size:.9rem;transition:color .3s ease}.footer-legal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer-copyright[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.9rem}@media (max-width: 768px){.footer-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2rem}.footer-bottom[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.footer-legal[_ngcontent-%COMP%]{justify-content:center}}']})};var l_=()=>({width:"50rem"}),c_=()=>({"960px":"75vw","640px":"90vw"});function u_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.firstNameError)}}function h_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.lastNameError)}}function d_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.emailError)}}function f_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.mobileError)}}function p_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.genderError)}}function m_(n,e){if(n&1&&(A(0,"option",61),D(1),P()),n&2){let t=e.$implicit;te("value",t.name),$(),rn(" ",t.name," ")}}function g_(n,e){if(n&1&&(A(0,"option",61),D(1),P()),n&2){let t=e.$implicit;te("value",t),$(),rn(" ",t," ")}}function __(n,e){if(n&1&&(A(0,"option",61),D(1),P()),n&2){let t=e.$implicit;te("value",t),$(),rn(" ",t," ")}}function y_(n,e){if(n&1&&(A(0,"div",60),D(1),P()),n&2){let t=ne(2);$(),Bt(t.passwordError)}}function v_(n,e){if(n&1&&(A(0,"div",62),U(1,"i",63),D(2),P()),n&2){let t=ne(2);$(2),rn("",t.registerError," ")}}function w_(n,e){if(n&1){let t=nn();A(0,"form",5),ye("ngSubmit",function(){je(t);let r=ne();return ze(r.onSubmit())}),A(1,"div",6)(2,"div",7)(3,"h5",8),D(4,"Personal Information"),P(),A(5,"div",9)(6,"label",10),D(7,"First Name"),P(),A(8,"div",11),U(9,"i",12)(10,"input",13),P(),be(11,u_,2,1,"div",14),P(),A(12,"div",9)(13,"label",15),D(14,"Last Name"),P(),A(15,"div",11),U(16,"i",12)(17,"input",16),P(),be(18,h_,2,1,"div",14),P(),A(19,"div",9)(20,"label",17),D(21,"Email Address"),P(),A(22,"div",11),U(23,"i",18)(24,"input",19),P(),be(25,d_,2,1,"div",14),P(),A(26,"div",9)(27,"label",20),D(28,"Mobile Number"),P(),A(29,"div",11),U(30,"i",21)(31,"input",22),P(),be(32,f_,2,1,"div",14),P(),A(33,"div",9)(34,"label"),D(35,"Gender"),P(),A(36,"div",23)(37,"label",24),U(38,"input",25),A(39,"span",26),U(40,"i",27),D(41,"Male"),P()(),A(42,"label",24),U(43,"input",28),A(44,"span",26),U(45,"i",29),D(46,"Female"),P()()(),be(47,p_,2,1,"div",14),P()(),A(48,"div",7)(49,"h5",8),D(50,"Academic Information"),P(),A(51,"div",9)(52,"label",30),D(53,"University"),P(),A(54,"div",11),U(55,"i",31),A(56,"select",32),ye("change",function(){je(t);let r=ne();return ze(r.onUniversityChange())}),A(57,"option",33),D(58,"Select your university"),P(),be(59,m_,2,2,"option",34),P()()(),A(60,"div",9)(61,"label",35),D(62,"Faculty"),P(),A(63,"div",11),U(64,"i",36),A(65,"select",37),ye("change",function(){je(t);let r=ne();return ze(r.onFacultyChange())}),A(66,"option",33),D(67,"Select your faculty"),P(),be(68,g_,2,2,"option",34),P()()(),A(69,"div",9)(70,"label",38),D(71,"Department"),P(),A(72,"div",11),U(73,"i",39),A(74,"select",40)(75,"option",33),D(76,"Select your department"),P(),be(77,__,2,2,"option",34),P()()(),A(78,"div",9)(79,"label",41),D(80,"Password"),P(),A(81,"div",11),U(82,"i",42)(83,"input",43),P(),be(84,y_,2,1,"div",14),P()()(),A(85,"div",44),U(86,"input",45),A(87,"label",46),D(88," I agree to the "),A(89,"a",47),D(90,"Terms of Service"),P(),D(91," and "),A(92,"a",47),D(93,"Privacy Policy"),P()()(),be(94,v_,3,1,"div",48),A(95,"button",49),U(96,"i",50),D(97,"Create Account "),P(),A(98,"div",51),D(99," Already have an account? "),A(100,"a",52),ye("click",function(){je(t);let r=ne();return ze(r.switchToLogin())}),D(101,"Log in"),P()(),A(102,"div",53)(103,"p",54),D(104,"or continue with"),P(),A(105,"div",55)(106,"span",56),U(107,"i",57),D(108," Google"),P(),A(109,"span",58),U(110,"i",59),D(111," Facebook"),P()()()()}if(n&2){let t=ne();te("formGroup",t.registerForm),$(11),te("ngIf",t.firstNameError),$(7),te("ngIf",t.lastNameError),$(7),te("ngIf",t.emailError),$(7),te("ngIf",t.mobileError),$(15),te("ngIf",t.genderError),$(12),te("ngForOf",t.universities),$(9),te("ngForOf",t.filteredFaculties),$(9),te("ngForOf",t.filteredDepartments),$(7),te("ngIf",t.passwordError),$(10),te("ngIf",t.registerError),$(),te("disabled",t.registerForm.invalid||t.isSubmitting)}}function E_(n,e){n&1&&(A(0,"div",4)(1,"div",64)(2,"div",65),U(3,"div",66)(4,"div",67),P(),A(5,"h3"),D(6,"Creating Your Account"),P(),A(7,"p",68),D(8,"Analyzing your unique profile..."),P(),A(9,"div",69)(10,"p"),U(11,"i",70),D(12," Tip: The more specific your goals, the better our recommendations"),P()()()())}var Qr=class n{visible=!1;visibleChange=new qr;requestToLogin=new qr;registerSuccess=new qr;messageService=Ut(Ro);authService=Ut(ei);fb=Ut(zh);router=Ut(sn);universities=[{name:"Tanta",faculties:["Engineering","Science","Business"],departments:{Business:["BIS","English","Arabic"],Engineering:["Computer Science","Civil"],Science:["Physics","Chemistry"]}},{name:"Mansoura",faculties:["Engineering","Arts","Law"],departments:{Engineering:["Software","Mechanical"],Arts:["History","Philosophy"],Law:["Criminal","Civil"]}},{name:"Menoufia",faculties:["Engineering","Agriculture"],departments:{Engineering:["Electrical","Chemical"],Agriculture:["Plant Science","Animal Science"]}}];selectedUniversity="";selectedFaculty="";filteredFaculties=[];filteredDepartments=[];registerError="";isSubmitting=!1;registerForm=this.fb.group({firstName:["",st.required],lastName:["",st.required],email:["",[st.required,st.email]],university:["",st.required],faculty:["",st.required],department:["",st.required],mobile:["",[st.required,st.pattern("^[0-9]{10,15}$")]],password:["",[st.required,st.minLength(6)]],gender:["",st.required]});onUniversityChange(){let e=this.registerForm.get("university")?.value,t=this.universities.find(i=>i.name===e);t&&(this.filteredFaculties=t.faculties,this.filteredDepartments=[],this.registerForm.get("faculty")?.reset(),this.registerForm.get("department")?.reset(),this.selectedUniversity=e)}onFacultyChange(){let e=this.registerForm.get("faculty")?.value,t=this.universities.find(i=>i.name===this.selectedUniversity);t&&t.departments[e]&&(this.filteredDepartments=t.departments[e])}onSubmit(){if(this.registerForm.valid){this.isSubmitting=!0;let{firstName:e,email:t,password:i,mobile:r}=this.registerForm.value,o={name:e,email:t,password:i,mobile:r};this.authService.register(o.email,o.password).subscribe({next:()=>{this.isSubmitting=!1,this.registerSuccess.emit(!0),this.registerError="",this.closeDialog(),this.router.navigate(["/features"])},error:a=>{this.isSubmitting=!1,a?.code==="auth/email-already-in-use"?this.registerError="This email is already in use. Please try logging in or use a different email.":this.registerError="An error occurred. Please try again later."}})}else this.registerForm.markAllAsTouched()}showDialog(){this.visible=!0}closeDialog(){this.visible=!1,this.visibleChange.emit(!1)}switchToLogin(){this.requestToLogin.emit(),this.closeDialog()}get firstNameError(){let e=this.registerForm.get("firstName");return e?.hasError("required")&&e?.touched?"First Name is required.":""}get lastNameError(){let e=this.registerForm.get("lastName");return e?.hasError("required")&&e?.touched?"Last Name is required.":""}get emailError(){let e=this.registerForm.get("email");return e?.hasError("required")&&e?.touched?"Email is required.":e?.hasError("email")&&e?.touched?"Invalid email address.":""}get mobileError(){let e=this.registerForm.get("mobile");return e?.hasError("required")&&e?.touched?"Mobile number is required.":e?.hasError("pattern")&&e?.touched?"Mobile number must be between 10 to 15 digits.":""}get passwordError(){let e=this.registerForm.get("password");return e?.hasError("required")&&e?.touched?"Password is required.":e?.hasError("minlength")&&e?.touched?"Password must be at least 6 characters long.":""}get genderError(){let e=this.registerForm.get("gender");return e?.hasError("required")&&e?.touched?"Gender selection is required.":""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=tn({type:n,selectors:[["sign-up"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange",requestToLogin:"requestToLogin",registerSuccess:"registerSuccess"},features:[Xu([Ro])],decls:5,vars:8,consts:[["header","Create Your Account",3,"visibleChange","onHide","modal","visible","breakpoints"],[1,"dialog-container"],[1,"dialog-content"],[3,"formGroup"],[1,"loading-state"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6"],[1,"section-title"],[1,"form-group","my-2"],["for","firstName"],[1,"input-wrapper"],[1,"pi","pi-user","input-icon"],["type","text","formControlName","firstName","id","firstName","placeholder","John",1,"form-control","input-field"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","formControlName","lastName","id","lastName","placeholder","Doe",1,"form-control","input-field"],["for","email"],[1,"pi","pi-envelope","input-icon"],["type","email","formControlName","email","id","email","placeholder","your@email.com",1,"form-control","input-field"],["for","mobile"],[1,"pi","pi-phone","input-icon"],["type","text","formControlName","mobile","id","mobile","placeholder","+1234567890",1,"form-control","input-field"],[1,"gender-options"],[1,"gender-option"],["type","radio","formControlName","gender","value","Male"],[1,"gender-label"],[1,"pi","pi-male","me-1"],["type","radio","formControlName","gender","value","Female"],[1,"pi","pi-female","me-1"],["for","university"],[1,"pi","pi-building","input-icon"],["formControlName","university","id","university",1,"form-control","select-field",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","faculty"],[1,"pi","pi-book","input-icon"],["formControlName","faculty","id","faculty",1,"form-control","select-field",3,"change"],["for","department"],[1,"pi","pi-briefcase","input-icon"],["formControlName","department","id","department",1,"form-control","select-field"],["for","password"],[1,"pi","pi-lock","input-icon"],["type","password","formControlName","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control","input-field"],[1,"form-check","terms-check"],["type","checkbox","id","terms","required","",1,"form-check-input"],["for","terms",1,"form-check-label"],["href","#",1,"terms-link"],["class","error-banner",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"pi","pi-user-plus","me-2"],[1,"text-center","mt-3"],["type","button",1,"login-link",3,"click"],[1,"social-login"],[1,"divider"],[1,"social-buttons","deck","justify-content-center","text-align-center"],["disabled","",2,"color","#db4437"],["disabled","",1,"pi","pi-google"],["disabled","",2,"color","#3b5998"],[1,"pi","pi-facebook","me-2"],[1,"error-message"],[3,"value"],[1,"error-banner"],[1,"pi","pi-exclamation-triangle","me-2"],[1,"loading-animation"],[1,"spinner"],[1,"orbit"],[1,"planet"],[1,"loading-text"],[1,"loading-tips"],[1,"pi","pi-lightbulb"]],template:function(t,i){t&1&&(A(0,"p-dialog",0),Yu("visibleChange",function(o){return Qu(i.visible,o)||(i.visible=o),o}),ye("onHide",function(){return i.closeDialog()}),A(1,"div",1)(2,"div",2),be(3,w_,112,12,"form",3)(4,E_,13,0,"div",4),P()()()),t&2&&(Ku(Bi(6,l_)),te("modal",!0),Hu("visible",i.visible),te("breakpoints",Bi(7,c_)),$(3),Wu(i.isSubmitting?4:3))},dependencies:[Wn,eh,zr,Gh,Lh,$h,jh,Oh,qh,Vh,Mh,Fh,Uh,Bh,Hh,Wh],styles:['.p-dialog{border-radius:16px!important;box-shadow:0 10px 50px #0003!important;border:none!important;overflow:hidden}  .p-dialog-header{background:linear-gradient(135deg,#4361ee,#3a0ca3)!important;color:#fff!important;padding:1.5rem!important;border-bottom:none!important}  .p-dialog-title{font-weight:600;font-size:1.5rem}  .p-dialog-content{padding:0!important;background:#f8f9fa!important}.dialog-container[_ngcontent-%COMP%]{padding:2rem}.dialog-content[_ngcontent-%COMP%]{max-width:100%}.section-title[_ngcontent-%COMP%]{color:#4361ee;font-weight:600;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e9ecef}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#495057}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c757d}.input-field[_ngcontent-%COMP%], .select-field[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 3rem;border:1px solid #ced4da;border-radius:8px;font-size:1rem;transition:all .3s ease;background-color:#fff}.input-field[_ngcontent-%COMP%]:focus, .select-field[_ngcontent-%COMP%]:focus{border-color:#4361ee;box-shadow:0 0 0 .2rem #4361ee33;outline:none}.gender-options[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.gender-option[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:.5rem}.gender-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;border-radius:8px;background:#e9ecef;transition:all .3s ease}.gender-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .gender-label[_ngcontent-%COMP%]{background:#4361ee;color:#fff}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4361ee,#3a0ca3);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a56d4,#2e0a8a);transform:translateY(-2px);box-shadow:0 4px 12px #4361ee4d}.btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #6c757d;color:#6c757d;background:transparent}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.social-login[_ngcontent-%COMP%]{margin:1.5rem 0}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;color:#6c757d;margin:1rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #dee2e6}.divider[_ngcontent-%COMP%]:before{margin-right:1rem}.divider[_ngcontent-%COMP%]:after{margin-left:1rem}.social-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.btn-google[_ngcontent-%COMP%]{background:#db4437;color:#fff;flex:1}.btn-facebook[_ngcontent-%COMP%]{background:#4267b2;color:#fff;flex:1}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%], .terms-link[_ngcontent-%COMP%]{color:#4361ee;text-decoration:none;font-weight:500;transition:all .2s ease}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover, .forgot-password[_ngcontent-%COMP%]:hover, .terms-link[_ngcontent-%COMP%]:hover{color:#3a0ca3;text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.error-banner[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545;padding:.75rem 1rem;border-radius:8px;margin:1rem 0;display:flex;align-items:center}.terms-check[_ngcontent-%COMP%]{margin:1.5rem 0}@media (max-width: 768px){.dialog-container[_ngcontent-%COMP%]{padding:1.5rem}.section-title[_ngcontent-%COMP%]{margin-top:1.5rem}.social-buttons[_ngcontent-%COMP%]{flex-direction:column}.flex-custom[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}']})};var T_=()=>({exact:!0});function I_(n,e){if(n&1){let t=nn();$r(0),A(1,"li",8)(2,"a",19),ye("click",function(){je(t);let r=ne();return ze(r.closeMobileMenu())}),U(3,"i",20),D(4," Career Path "),P()(),A(5,"li",8)(6,"a",21),ye("click",function(){je(t);let r=ne();return ze(r.closeMobileMenu())}),U(7,"i",22),D(8," Roadmap "),P()(),jr()}}function b_(n,e){if(n&1){let t=nn();$r(0),A(1,"div",23)(2,"button",24),ye("click",function(){je(t);let r=ne();return ze(r.openLogin())}),U(3,"i",25),D(4," Login "),P(),A(5,"button",26),ye("click",function(){je(t);let r=ne();return ze(r.openSignUp())}),U(6,"i",27),D(7," Sign Up "),P()(),jr()}}function S_(n,e){if(n&1&&U(0,"img",41),n&2){let t=ne().ngIf;te("src",t.photoURL,qu)}}function C_(n,e){if(n&1&&(A(0,"span",42),D(1),P()),n&2){let t=ne().ngIf;$(),rn(" ",(t.displayName==null?null:t.displayName.charAt(0))||(t.email==null?null:t.email.charAt(0))," ")}}function A_(n,e){if(n&1){let t=nn();$r(0),A(1,"div",28)(2,"button",29),ye("click",function(){je(t);let r=ne();return ze(r.toggleUserDropdown())}),A(3,"span",30),be(4,S_,1,1,"img",31)(5,C_,2,1,"span",32),P(),D(6),P(),A(7,"ul",33)(8,"li")(9,"h6",34),D(10),P()(),A(11,"li"),U(12,"hr",35),P(),A(13,"li")(14,"a",36),U(15,"i",37),D(16," Profile "),P()(),A(17,"li")(18,"a",36),U(19,"i",38),D(20," Settings "),P()(),A(21,"li"),U(22,"hr",35),P(),A(23,"li")(24,"a",39),ye("click",function(){je(t);let r=ne();return ze(r.logout())}),U(25,"i",40),D(26," Logout "),P()()()(),jr()}if(n&2){let t=e.ngIf,i=ne();$(4),te("ngIf",t.photoURL),$(),te("ngIf",!t.photoURL),$(),rn(" ",t.displayName||"Account"," "),$(),zn("show",i.showUserDropdown),$(3),Bt(t.email)}}function R_(n,e){if(n&1){let t=nn();A(0,"login",43),ye("visibleChange",function(r){je(t);let o=ne();return ze(o.showLogin=r)})("requestSignUp",function(){je(t);let r=ne();return ze(r.toggleToSignup())}),P()}if(n&2){let t=ne();te("visible",t.showLogin)}}function P_(n,e){if(n&1){let t=nn();A(0,"sign-up",44),ye("visibleChange",function(r){je(t);let o=ne();return ze(o.showSignUp=r)})("requestToLogin",function(){je(t);let r=ne();return ze(r.toggleToLogin())}),P()}if(n&2){let t=ne();te("visible",t.showSignUp)}}var Yr=class n{mobileMenuOpen=!1;showUserDropdown=!1;showLogin=!1;showSignUp=!1;authService=Ut(ei);router=Ut(sn);universityService=Ut(Dh);user$=this.authService.user$;selectedUniversity$=this.universityService.selectedUniversity$;ngOnInit(){}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen,this.toggleBodyOverflow()}closeMobileMenu(){this.mobileMenuOpen=!1,this.toggleBodyOverflow()}toggleUserDropdown(){this.showUserDropdown=!this.showUserDropdown}openLogin(){this.showLogin=!0,this.closeMobileMenu()}openSignUp(){this.showSignUp=!0,this.closeMobileMenu()}handleNavigationClick(e){this.user$.subscribe(t=>{t?this.router.navigate([e]):this.openLogin()})}logout(){this.authService.logout().subscribe(()=>{this.router.navigate(["/home"]),this.showUserDropdown=!1})}toggleBodyOverflow(){document.body.style.overflow=this.mobileMenuOpen?"hidden":""}onResize(){window.innerWidth>991.98&&this.mobileMenuOpen&&this.closeMobileMenu()}toggleToSignup(){this.showSignUp=!this.showSignUp,this.showLogin=!1}toggleToLogin(){this.showLogin=!this.showLogin,this.showSignUp=!1}ngOnDestroy(){document.body.style.overflow=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=tn({type:n,selectors:[["app-navbar"]],hostBindings:function(t,i){t&1&&ye("resize",function(o){return i.onResize(o)},!1,$u)},decls:34,vars:28,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-glass","shadow-sm","fixed-top"],[1,"container"],["routerLink","/home",1,"navbar-brand","d-flex","footer-logo"],["src","assets/images/career-goals.png","width","40","alt","CareerPath Logo"],["type","button","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"fas","fa-home","me-1"],["routerLinkActive","active",1,"nav-link",3,"click","routerLink"],[1,"fas","fa-star","me-1"],[1,"fas","fa-briefcase","me-1"],[4,"ngIf"],[1,"d-flex","align-items-center"],[1,"mobile-menu-overlay",3,"click"],[3,"visible","visibleChange","requestSignUp",4,"ngIf"],[3,"visible","visibleChange","requestToLogin",4,"ngIf"],["routerLink","/career-path","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fas","fa-project-diagram","me-1"],["routerLink","/roadmap","routerLinkActive","active",1,"nav-link",3,"click"],[1,"fas","fa-map-marked-alt","me-1"],[1,"d-flex","align-items-center","logining","gap-lg-3"],[1,"btn","btn-outline-primary","w-30",3,"click"],[1,"fas","fa-sign-in-alt","me-1"],[1,"btn","btn-primary","w-70",3,"click"],[1,"fas","fa-user-plus","me-1"],[1,"dropdown"],["type","button","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdown-toggle","user-dropdown-toggle",3,"click"],[1,"user-avatar","me-1"],["class","rounded-circle","width","32","height","32","alt","User",3,"src",4,"ngIf"],["class","avatar-fallback rounded-circle",4,"ngIf"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-header"],[1,"dropdown-divider"],["href","#",1,"dropdown-item"],[1,"fas","fa-user-circle","me-2"],[1,"fas","fa-cog","me-2"],["type","button",1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["width","32","height","32","alt","User",1,"rounded-circle",3,"src"],[1,"avatar-fallback","rounded-circle"],[3,"visibleChange","requestSignUp","visible"],[3,"visibleChange","requestToLogin","visible"]],template:function(t,i){t&1&&(A(0,"nav",0)(1,"div",1)(2,"a",2),U(3,"img",3),A(4,"span"),D(5,"CareerPath"),P()(),A(6,"button",4),ye("click",function(){return i.toggleMobileMenu()}),U(7,"span",5),P(),A(8,"div",6)(9,"ul",7)(10,"li",8)(11,"a",9),ye("click",function(){return i.closeMobileMenu()}),U(12,"i",10),D(13," Home "),P()(),A(14,"li",8)(15,"a",11),Gn(16,"async"),ye("click",function(){return i.handleNavigationClick("/features")}),U(17,"i",12),D(18," Features "),P()(),A(19,"li",8)(20,"a",11),Gn(21,"async"),ye("click",function(){return i.handleNavigationClick("/build-career")}),U(22,"i",13),D(23," Build Career "),P()(),be(24,I_,9,0,"ng-container",14),Gn(25,"async"),P(),A(26,"div",15),be(27,b_,8,0,"ng-container",14),Gn(28,"async"),be(29,A_,27,6,"ng-container",14),Gn(30,"async"),P()()()(),A(31,"div",16),ye("click",function(){return i.closeMobileMenu()}),P(),be(32,R_,1,1,"login",17)(33,P_,1,1,"sign-up",18)),t&2&&($(6),Gu("aria-expanded",i.mobileMenuOpen),$(2),zn("show",i.mobileMenuOpen),$(3),te("routerLinkActiveOptions",Bi(27,T_)),$(4),zn("logged-in",Kn(16,17,i.user$)),te("routerLink","/features"),$(5),zn("logged-in",Kn(21,19,i.user$)),te("routerLink","/build-career"),$(4),te("ngIf",Kn(25,21,i.selectedUniversity$)),$(3),te("ngIf",!Kn(28,23,i.user$)),$(2),te("ngIf",Kn(30,25,i.user$)),$(2),zn("active",i.mobileMenuOpen),$(),te("ngIf",i.showLogin),$(),te("ngIf",i.showSignUp))},dependencies:[Wn,zr,th,uh,Qr,Qh,hh],styles:['[_ngcontent-%COMP%]:root{--primary: #4361ee;--primary-dark: #3a0ca3;--primary-light: #e0e7ff;--secondary: #4cc9f0;--accent: #f72585;--light: #f8f9fa;--dark: #212529;--gray: #6c757d;--light-gray: #e9ecef;--white: #ffffff;--dark-blue: #1e3a8a;--success: #38b000;--warning: #ffaa00;--danger: #ef233c}.bg-glass[_ngcontent-%COMP%]{background:#ffffffe6!important;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.3)}.navbar-light[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%], .navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#000000d9!important}.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#4361ee!important;font-weight:600}.brand-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4361ee,#3a0ca3);-webkit-background-clip:text;background-clip:text;color:transparent}.nav-link[_ngcontent-%COMP%]{position:relative;margin:0 .5rem;transition:all .3s ease}.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-3px;left:0;width:0;height:2px;background:#4361ee;transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover:after, .nav-link.active[_ngcontent-%COMP%]:after{width:100%}.user-dropdown-toggle[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);padding:.375rem .75rem}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 5px 20px #0000001a;margin-top:.5rem}@media (max-width: 991.98px){.navbar-collapse[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;bottom:0;width:80%;max-width:232px;padding-top:3.5rem;padding-left:2.5rem;padding-right:1.5rem;background:#fff;z-index:1046;overflow-y:auto;transition:all .4s cubic-bezier(.4,0,.2,1);height:100vh}.navbar-collapse.show[_ngcontent-%COMP%]{left:0;box-shadow:5px 0 30px #00000026}.nav-link[_ngcontent-%COMP%]{padding:.75rem 0;margin:.25rem 0}.logining[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;width:100%}.logining[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%!important}}.mobile-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:1029;opacity:0;visibility:hidden;transition:all .3s ease}.mobile-menu-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#4361ee;color:#4361ee}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#4361ee;color:#fff}.btn-primary[_ngcontent-%COMP%]{background:#4361ee;border-color:#4361ee}.btn-primary[_ngcontent-%COMP%]:hover{background:#3a0ca3;border-color:#3a0ca3}.footer-logo[_ngcontent-%COMP%]{display:flex;align-items:center}.footer-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:.75rem}.footer-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;background:linear-gradient(90deg,#4361ee,#3a0ca3);-webkit-background-clip:text;background-clip:text;color:transparent}']})};var Xr=class n{title="career-path-project";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=tn({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"parent","container-fluid"]],template:function(t,i){t&1&&(U(0,"app-navbar"),A(1,"div",0),U(2,"router-outlet"),P(),U(3,"common-footer"))},dependencies:[lh,Wn,Hr,Yr],encapsulation:2})};var ni=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/home"]),!1)}static \u0275fac=function(t){return new(t||n)(Me(ei),Me(sn))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xh=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-UMDEHTBR.js").then(n=>n.HomeComponent)},{path:"build-career",loadComponent:()=>import("./chunk-D76ZIMD5.js").then(n=>n.SelectUniversityComponent),canActivate:[ni]},{path:"features",loadComponent:()=>import("./chunk-UBWDC7U6.js").then(n=>n.FeaturesComponent),canActivate:[ni]},{path:"career-path",loadComponent:()=>import("./chunk-V7JMA2WM.js").then(n=>n.CarerComponent),canActivate:[ni]},{path:"roadmap",loadComponent:()=>import("./chunk-7LM5N7IR.js").then(n=>n.RoadmapComponent)}];function Jh(n){return new Z(3e3,!1)}function k_(){return new Z(3100,!1)}function x_(){return new Z(3101,!1)}function D_(n){return new Z(3001,!1)}function O_(n){return new Z(3003,!1)}function M_(n){return new Z(3004,!1)}function F_(n,e){return new Z(3005,!1)}function L_(){return new Z(3006,!1)}function V_(){return new Z(3007,!1)}function U_(n,e){return new Z(3008,!1)}function B_(n){return new Z(3002,!1)}function q_(n,e,t,i,r){return new Z(3010,!1)}function $_(){return new Z(3011,!1)}function j_(){return new Z(3012,!1)}function z_(){return new Z(3200,!1)}function G_(){return new Z(3202,!1)}function K_(){return new Z(3013,!1)}function W_(n){return new Z(3014,!1)}function H_(n){return new Z(3015,!1)}function Q_(n){return new Z(3016,!1)}function Y_(n,e){return new Z(3404,!1)}function X_(n){return new Z(3502,!1)}function J_(n){return new Z(3503,!1)}function Z_(){return new Z(3300,!1)}function ey(n){return new Z(3504,!1)}function ty(n){return new Z(3301,!1)}function ny(n,e){return new Z(3302,!1)}function iy(n){return new Z(3303,!1)}function ry(n,e){return new Z(3400,!1)}function sy(n){return new Z(3401,!1)}function oy(n){return new Z(3402,!1)}function ay(n,e){return new Z(3505,!1)}function dn(n){switch(n.length){case 0:return new ti;case 1:return n[0];default:return new No(n)}}function dd(n,e,t=new Map,i=new Map){let r=[],o=[],a=-1,l=null;if(e.forEach(h=>{let d=h.get("offset"),m=d==a,g=m&&l||new Map;h.forEach((T,R)=>{let C=R,N=T;if(R!=="offset")switch(C=n.normalizePropertyName(C,r),N){case Wr:N=t.get(R);break;case Rt:N=i.get(R);break;default:N=n.normalizeStyleValue(R,C,N,r);break}g.set(C,N)}),m||o.push(g),l=g,a=d}),r.length)throw X_(r);return o}function Zo(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&xo(t,"start",n)));break;case"done":n.onDone(()=>i(t&&xo(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&xo(t,"destroy",n)));break}}function xo(n,e,t){let i=t.totalTime,r=!!t.disabled,o=ea(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),a=n._data;return a!=null&&(o._data=a),o}function ea(n,e,t,i,r="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function at(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Zh(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var ly=typeof document>"u"?null:document.documentElement;function ta(n){let e=n.parentNode||n.host||null;return e===ly?null:e}function cy(n){return n.substring(1,6)=="ebkit"}var bn=null,ed=!1;function uy(n){bn||(bn=hy()||{},ed=bn.style?"WebkitAppearance"in bn.style:!1);let e=!0;return bn.style&&!cy(n)&&(e=n in bn.style,!e&&ed&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in bn.style)),e}function hy(){return typeof document<"u"?document.body:null}function fd(n,e){for(;e;){if(e===n)return!0;e=ta(e)}return!1}function pd(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var na=(()=>{class n{validateStyleProperty(t){return uy(t)}containsElement(t,i){return fd(t,i)}getParentElement(t){return ta(t)}query(t,i,r){return pd(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,a,l=[],h){return new ti(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),An=class{static NOOP=new na},Rn=class{};var dy=1e3,md="{{",fy="}}",gd="ng-enter",Vo="ng-leave",Jr="ng-trigger",is=".ng-trigger",td="ng-animating",Uo=".ng-animating";function $t(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Bo(parseFloat(e[1]),e[2])}function Bo(n,e){switch(e){case"s":return n*dy;default:return n}}function rs(n,e,t){return n.hasOwnProperty("duration")?n:py(n,e,t)}function py(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,a="";if(typeof n=="string"){let l=n.match(i);if(l===null)return e.push(Jh(n)),{duration:0,delay:0,easing:""};r=Bo(parseFloat(l[1]),l[2]);let h=l[3];h!=null&&(o=Bo(parseFloat(h),l[4]));let d=l[5];d&&(a=d)}else r=n;if(!t){let l=!1,h=e.length;r<0&&(e.push(k_()),l=!0),o<0&&(e.push(x_()),l=!0),l&&e.splice(h,0,Jh(n))}return{duration:r,delay:o,easing:a}}function my(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Pt(n,e,t){e.forEach((i,r)=>{let o=ia(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Cn(n,e){e.forEach((t,i)=>{let r=ia(i);n.style[r]=""})}function Gi(n){return Array.isArray(n)?n.length==1?n[0]:Kh(n):n}function gy(n,e,t){let i=e.params||{},r=_d(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(D_(o))})}var qo=new RegExp(`${md}\\s*(.+?)\\s*${fy}`,"g");function _d(n){let e=[];if(typeof n=="string"){let t;for(;t=qo.exec(n);)e.push(t[1]);qo.lastIndex=0}return e}function Wi(n,e,t){let i=`${n}`,r=i.replace(qo,(o,a)=>{let l=e[a];return l==null&&(t.push(O_(a)),l=""),l.toString()});return r==i?n:r}var _y=/-+([a-z0-9])/g;function ia(n){return n.replace(_y,(...e)=>e[1].toUpperCase())}function yy(n,e){return n===0||e===0}function vy(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,a)=>{i.has(a)||r.push(a),i.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(l=>a.set(l,ra(n,l)))}}return e}function ot(n,e,t){switch(e.type){case H.Trigger:return n.visitTrigger(e,t);case H.State:return n.visitState(e,t);case H.Transition:return n.visitTransition(e,t);case H.Sequence:return n.visitSequence(e,t);case H.Group:return n.visitGroup(e,t);case H.Animate:return n.visitAnimate(e,t);case H.Keyframes:return n.visitKeyframes(e,t);case H.Style:return n.visitStyle(e,t);case H.Reference:return n.visitReference(e,t);case H.AnimateChild:return n.visitAnimateChild(e,t);case H.AnimateRef:return n.visitAnimateRef(e,t);case H.Query:return n.visitQuery(e,t);case H.Stagger:return n.visitStagger(e,t);default:throw M_(e.type)}}function ra(n,e){return window.getComputedStyle(n)[e]}var wy=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ss=class extends Rn{normalizePropertyName(e,t){return ia(e)}normalizeStyleValue(e,t,i,r){let o="",a=i.toString().trim();if(wy.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&r.push(F_(e,i))}return a+o}};var os="*";function Ey(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Ty(i,t,e)):t.push(n),t}function Ty(n,e,t){if(n[0]==":"){let h=Iy(n,t);if(typeof h=="function"){e.push(h);return}n=h}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(H_(n)),e;let r=i[1],o=i[2],a=i[3];e.push(nd(r,a));let l=r==os&&a==os;o[0]=="<"&&!l&&e.push(nd(a,r))}function Iy(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(Q_(n)),"* => *"}}var Zr=new Set(["true","1"]),es=new Set(["false","0"]);function nd(n,e){let t=Zr.has(n)||es.has(n),i=Zr.has(e)||es.has(e);return(r,o)=>{let a=n==os||n==r,l=e==os||e==o;return!a&&t&&typeof r=="boolean"&&(a=r?Zr.has(n):es.has(n)),!l&&i&&typeof o=="boolean"&&(l=o?Zr.has(e):es.has(e)),a&&l}}var yd=":self",by=new RegExp(`s*${yd}s*,?`,"g");function vd(n,e,t,i){return new $o(n).build(e,t,i)}var id="",$o=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new jo(t);return this._resetContextStyleTimingState(r),ot(this,Gi(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=id,e.collectedStyles=new Map,e.collectedStyles.set(id,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(L_()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==H.State){let h=l,d=h.name;d.toString().split(/\s*,\s*/).forEach(m=>{h.name=m,o.push(this.visitState(h,t))}),h.name=d}else if(l.type==H.Transition){let h=this.visitTransition(l,t);i+=h.queryCount,r+=h.depCount,a.push(h)}else t.errors.push(V_())}),{type:H.Trigger,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,a=r||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(h=>{_d(h).forEach(d=>{a.hasOwnProperty(d)||o.add(d)})})}),o.size&&t.errors.push(U_(e.name,[...o.values()]))}return{type:H.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=ot(this,Gi(e.animation),t),r=Ey(e.expr,t.errors);return{type:H.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Sn(e.options)}}visitSequence(e,t){return{type:H.Sequence,steps:e.steps.map(i=>ot(this,i,t)),options:Sn(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(a=>{t.currentTime=i;let l=ot(this,a,t);return r=Math.max(r,t.currentTime),l});return t.currentTime=r,{type:H.Group,steps:o,options:Sn(e.options)}}visitAnimate(e,t){let i=Ry(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Po({});if(o.type==H.Keyframes)r=this.visitKeyframes(o,t);else{let a=e.styles,l=!1;if(!a){l=!0;let d={};i.easing&&(d.easing=i.easing),a=Po(d)}t.currentTime+=i.duration+i.delay;let h=this.visitStyle(a,t);h.isEmptyStep=l,r=h}return t.currentAnimateTimings=null,{type:H.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of r)typeof l=="string"?l===Rt?i.push(l):t.errors.push(B_(l)):i.push(new Map(Object.entries(l)));let o=!1,a=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!o)){for(let h of l.values())if(h.toString().indexOf(md)>=0){o=!0;break}}}),{type:H.Style,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,h)=>{let d=t.collectedStyles.get(t.currentQuerySelector),m=d.get(h),g=!0;m&&(o!=r&&o>=m.startTime&&r<=m.endTime&&(t.errors.push(q_(h,m.startTime,m.endTime,o,r)),g=!1),o=m.startTime),g&&d.set(h,{startTime:o,endTime:r}),t.options&&gy(l,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:H.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push($_()),i;let r=1,o=0,a=[],l=!1,h=!1,d=0,m=e.steps.map(B=>{let z=this._makeStyleAst(B,t),G=z.offset!=null?z.offset:Ay(z.styles),j=0;return G!=null&&(o++,j=z.offset=G),h=h||j<0||j>1,l=l||j<d,d=j,a.push(j),z});h&&t.errors.push(j_()),l&&t.errors.push(z_());let g=e.steps.length,T=0;o>0&&o<g?t.errors.push(G_()):o==0&&(T=r/(g-1));let R=g-1,C=t.currentTime,N=t.currentAnimateTimings,k=N.duration;return m.forEach((B,z)=>{let G=T>0?z==R?1:T*z:a[z],j=G*k;t.currentTime=C+N.delay+j,N.duration=j,this._validateStyleAst(B,t),B.offset=G,i.styles.push(B)}),i}visitReference(e,t){return{type:H.Reference,animation:ot(this,Gi(e.animation),t),options:Sn(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:H.AnimateChild,options:Sn(e.options)}}visitAnimateRef(e,t){return{type:H.AnimateRef,animation:this.visitReference(e.animation,t),options:Sn(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,a]=Sy(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,at(t.collectedStyles,t.currentQuerySelector,new Map);let l=ot(this,Gi(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:H.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:Sn(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(K_());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:rs(e.timings,t.errors,!0);return{type:H.Stagger,animation:ot(this,Gi(e.animation),t),timings:i,options:null}}};function Sy(n){let e=!!n.split(/\s*,\s*/).find(t=>t==yd);return e&&(n=n.replace(by,"")),n=n.replace(/@\*/g,is).replace(/@\w+/g,t=>is+"-"+t.slice(1)).replace(/:animating/g,Uo),[n,e]}function Cy(n){return n?Lt({},n):null}var jo=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Ay(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Ry(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=rs(n,e).duration;return Do(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=Do(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=rs(t,e);return Do(r.duration,r.delay,r.easing)}function Sn(n){return n?(n=Lt({},n),n.params&&(n.params=Cy(n.params))):n={},n}function Do(n,e,t){return{duration:n,delay:e,easing:t}}function sa(n,e,t,i,r,o,a=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:l}}var Hi=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Py=1,Ny=":enter",ky=new RegExp(Ny,"g"),xy=":leave",Dy=new RegExp(xy,"g");function wd(n,e,t,i,r,o=new Map,a=new Map,l,h,d=[]){return new zo().buildKeyframes(n,e,t,i,r,o,a,l,h,d)}var zo=class{buildKeyframes(e,t,i,r,o,a,l,h,d,m=[]){d=d||new Hi;let g=new Go(e,t,d,r,o,m,[]);g.options=h;let T=h.delay?$t(h.delay):0;g.currentTimeline.delayNextStep(T),g.currentTimeline.setStyles([a],null,g.errors,h),ot(this,i,g);let R=g.timelines.filter(C=>C.containsAnimation());if(R.length&&l.size){let C;for(let N=R.length-1;N>=0;N--){let k=R[N];if(k.element===t){C=k;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([l],null,g.errors,h)}return R.length?R.map(C=>C.buildKeyframes()):[sa(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let a=typeof o=="number"?o:$t(Wi(o,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,a=i.duration!=null?$t(i.duration):null,l=i.delay!=null?$t(i.delay):null;return a!==0&&e.forEach(h=>{let d=t.appendInstructionToTimeline(h,a,l);o=Math.max(o,d.duration+d.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ot(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==H.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=as);let a=$t(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>ot(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?$t(e.options.delay):0;e.steps.forEach(a=>{let l=t.createSubContext(e.options);o&&l.delayNextStep(o),ot(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Wi(i,t.params,t.errors):i;return rs(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==H.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,l=t.createSubContext().currentTimeline;l.easing=i.easing,e.styles.forEach(h=>{let d=h.offset||0;l.forwardTime(d*o),l.setStyles(h.styles,h.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?$t(r.delay):0;o&&(t.previousNode.type===H.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=as);let a=i,l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=l.length;let h=null;l.forEach((d,m)=>{t.currentQueryIndex=m;let g=t.createSubContext(e.options,d);o&&g.delayNextStep(o),d===t.element&&(h=g.currentTimeline),ot(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe();let T=g.currentTimeline.currentTime;a=Math.max(a,T)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),l=a*(t.currentQueryTotal-1),h=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":h=l-h;break;case"full":h=i.currentStaggerTime;break}let m=t.currentTimeline;h&&m.delayNextStep(h);let g=m.currentTime;ot(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-g+(r.startTime-i.currentTimeline.startTime)}},as={},Go=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=as;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,a,l,h){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=l,this.currentTimeline=h||new ls(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=$t(i.duration)),i.delay!=null&&(r.delay=$t(i.delay));let o=i.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=Wi(o[l],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=as,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Ko(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,a){let l=[];if(r&&l.push(this.element),e.length>0){e=e.replace(ky,"."+this._enterClassName),e=e.replace(Dy,"."+this._leaveClassName);let h=i!=1,d=this._driver.query(this.element,e,h);i!==0&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),l.push(...d)}return!o&&l.length==0&&a.push(W_(t)),l}},ls=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Py,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Rt),this._currentKeyframe.set(t,Rt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},a=Oy(e,this._globalTimelineStyles);for(let[l,h]of a){let d=Wi(h,o,i);this._pendingStyles.set(l,d),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Rt),this._updateStyle(l,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((l,h)=>{let d=new Map([...this._backFill,...l]);d.forEach((m,g)=>{m===Wr?e.add(g):m===Rt&&t.add(g)}),i||d.set("offset",h/this.duration),r.push(d)});let o=[...e.values()],a=[...t.values()];if(i){let l=r[0],h=new Map(l);l.set("offset",0),h.set("offset",1),r=[l,h]}return sa(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},Ko=class extends ls{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,a,l=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],a=i+t,l=t/a,h=new Map(e[0]);h.set("offset",0),o.push(h);let d=new Map(e[0]);d.set("offset",rd(l)),o.push(d);let m=e.length-1;for(let g=1;g<=m;g++){let T=new Map(e[g]),R=T.get("offset"),C=t+R*i;T.set("offset",rd(C/a)),o.push(T)}i=a,t=0,r="",e=o}return sa(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function rd(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Oy(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Rt)}else for(let[o,a]of r)t.set(o,a)}),t}function sd(n,e,t,i,r,o,a,l,h,d,m,g,T){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:a,timelines:l,queriedElements:h,preStyleProps:d,postStyleProps:m,totalTime:g,errors:T}}var Oo={},cs=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return My(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,a,l,h,d,m){let g=[],T=this.ast.options&&this.ast.options.params||Oo,R=l&&l.params||Oo,C=this.buildStyles(i,R,g),N=h&&h.params||Oo,k=this.buildStyles(r,N,g),B=new Set,z=new Map,G=new Map,j=r==="void",Ue={params:Ed(N,T),delay:this.ast.options?.delay},oe=m?[]:wd(e,t,this.ast.animation,o,a,C,k,Ue,d,g),w=0;return oe.forEach(p=>{w=Math.max(p.duration+p.delay,w)}),g.length?sd(t,this._triggerName,i,r,j,C,k,[],[],z,G,w,g):(oe.forEach(p=>{let y=p.element,v=at(z,y,new Set);p.preStyleProps.forEach(b=>v.add(b));let E=at(G,y,new Set);p.postStyleProps.forEach(b=>E.add(b)),y!==t&&B.add(y)}),sd(t,this._triggerName,i,r,j,C,k,oe,[...B.values()],z,G,w))}};function My(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function Ed(n,e){let t=Lt({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var Wo=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=Ed(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{a&&(a=Wi(a,r,t));let h=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,h,a,t),i.set(l,a)})}),i}};function Fy(n,e,t){return new Ho(n,e,t)}var Ho=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Wo(r.style,o,i))}),od(this.states,"true","1"),od(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new cs(e,r,this.states))}),this.fallbackTransition=Ly(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Ly(n,e,t){let i=[(a,l)=>!0],r={type:H.Sequence,steps:[],options:null},o={type:H.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new cs(n,o,e)}function od(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Vy=new Hi,Qo=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=vd(this._driver,t,i,r);if(i.length)throw J_(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=dd(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),a,l=new Map;if(o?(a=wd(this._driver,t,o,gd,Vo,new Map,new Map,i,Vy,r),a.forEach(m=>{let g=at(l,m.element,new Map);m.postStyleProps.forEach(T=>g.set(T,null))})):(r.push(Z_()),a=[]),r.length)throw ey(r);l.forEach((m,g)=>{m.forEach((T,R)=>{m.set(R,this._driver.computeStyle(g,R,Rt))})});let h=a.map(m=>{let g=l.get(m.element);return this._buildPlayer(m,new Map,g)}),d=dn(h);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ty(e);return t}listen(e,t,i,r){let o=ea(t,"","","");return Zo(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(e,t,a);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},ad="ng-animate-queued",Uy=".ng-animate-queued",Mo="ng-animate-disabled",By=".ng-animate-disabled",qy="ng-star-inserted",$y=".ng-star-inserted",jy=[],Td={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zy={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yt="__ng_removed",Qi=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Ky(r),i){let o=e,{value:a}=o,l=Ou(o,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Ki="void",Fo=new Qi(Ki),Yo=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,ft(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw ny(i,t);if(i==null||i.length==0)throw iy(t);if(!Wy(i))throw ry(i,t);let o=at(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};o.push(a);let l=at(this._engine.statesByElement,e,new Map);return l.has(t)||(ft(e,Jr),ft(e,Jr+"-"+t),l.set(t,Fo)),()=>{this._engine.afterFlush(()=>{let h=o.indexOf(a);h>=0&&o.splice(h,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw sy(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),a=new Yi(this.id,t,e),l=this._engine.statesByElement.get(e);l||(ft(e,Jr),ft(e,Jr+"-"+t),this._engine.statesByElement.set(e,l=new Map));let h=l.get(t),d=new Qi(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&h&&d.absorbOptions(h.options),l.set(t,d),h||(h=Fo),!(d.value===Ki)&&h.value===d.value){if(!Yy(h.params,d.params)){let N=[],k=o.matchStyles(h.value,h.params,N),B=o.matchStyles(d.value,d.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{Cn(e,k),Pt(e,B)})}return}let T=at(this._engine.playersByElement,e,[]);T.forEach(N=>{N.namespaceId==this.id&&N.triggerName==t&&N.queued&&N.destroy()});let R=o.matchTransition(h.value,d.value,e,d.params),C=!1;if(!R){if(!r)return;R=o.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:h,toState:d,player:a,isFallbackTransition:C}),C||(ft(e,ad),a.onStart(()=>{ii(e,ad)})),a.onDone(()=>{let N=this.players.indexOf(a);N>=0&&this.players.splice(N,1);let k=this._engine.playersByElement.get(e);if(k){let B=k.indexOf(a);B>=0&&k.splice(B,1)}}),this.players.push(a),T.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,is,!0);i.forEach(r=>{if(r[yt])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),a=new Map;if(o){let l=[];if(o.forEach((h,d)=>{if(a.set(d,h.value),this._triggers.has(d)){let m=this.trigger(e,d,Ki,r);m&&l.push(m)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&dn(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let a=o.name;if(r.has(a))return;r.add(a);let h=this._triggers.get(a).fallbackTransition,d=i.get(a)||Fo,m=new Qi(Ki),g=new Yi(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:h,fromState:d,toState:m,player:g,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[yt];(!o||o===Td)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ft(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,a=this._elementListeners.get(o);a&&a.forEach(l=>{if(l.name==i.triggerName){let h=ea(o,i.triggerName,i.fromState.value,i.toState.value);h._data=e,Zo(i.player,l.phase,h,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,a=r.transition.ast.depCount;return o==0||a==0?o-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Xo=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Yo(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){let h=r.get(l);if(h){let d=i.indexOf(h);i.splice(d+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(ts(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!ts(t))return;let o=t[yt];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ft(e,Mo)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ii(e,Mo))}removeNode(e,t,i){if(ts(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[yt]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return ts(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,is,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Uo,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return dn(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[yt];if(t&&t.setForRemoval){if(e[yt]=Td,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Mo)&&this.markElementAsDisabled(e,!1),this.driver.query(e,By,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];ft(r,qy)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?dn(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw oy(e)}_flushAnimations(e,t){let i=new Hi,r=[],o=new Map,a=[],l=new Map,h=new Map,d=new Map,m=new Set;this.disabledNodes.forEach(F=>{m.add(F);let L=this.driver.query(F,Uy,!0);for(let V=0;V<L.length;V++)m.add(L[V])});let g=this.bodyNode,T=Array.from(this.statesByElement.keys()),R=ud(T,this.collectedEnterElements),C=new Map,N=0;R.forEach((F,L)=>{let V=gd+N++;C.set(L,V),F.forEach(K=>ft(K,V))});let k=[],B=new Set,z=new Set;for(let F=0;F<this.collectedLeaveElements.length;F++){let L=this.collectedLeaveElements[F],V=L[yt];V&&V.setForRemoval&&(k.push(L),B.add(L),V.hasAnimation?this.driver.query(L,$y,!0).forEach(K=>B.add(K)):z.add(L))}let G=new Map,j=ud(T,Array.from(B));j.forEach((F,L)=>{let V=Vo+N++;G.set(L,V),F.forEach(K=>ft(K,V))}),e.push(()=>{R.forEach((F,L)=>{let V=C.get(L);F.forEach(K=>ii(K,V))}),j.forEach((F,L)=>{let V=G.get(L);F.forEach(K=>ii(K,V))}),k.forEach(F=>{this.processLeaveNode(F)})});let Ue=[],oe=[];for(let F=this._namespaceList.length-1;F>=0;F--)this._namespaceList[F].drainQueuedTransitions(t).forEach(V=>{let K=V.player,ge=V.element;if(Ue.push(K),this.collectedEnterElements.length){let pe=ge[yt];if(pe&&pe.setForMove){if(pe.previousTriggersValues&&pe.previousTriggersValues.has(V.triggerName)){let Dt=pe.previousTriggersValues.get(V.triggerName),et=this.statesByElement.get(V.element);if(et&&et.has(V.triggerName)){let Ot=et.get(V.triggerName);Ot.value=Dt,et.set(V.triggerName,Ot)}}K.destroy();return}}let ht=!g||!this.driver.containsElement(g,ge),fe=G.get(ge),ae=C.get(ge),le=this._buildInstruction(V,i,ae,fe,ht);if(le.errors&&le.errors.length){oe.push(le);return}if(ht){K.onStart(()=>Cn(ge,le.fromStyles)),K.onDestroy(()=>Pt(ge,le.toStyles)),r.push(K);return}if(V.isFallbackTransition){K.onStart(()=>Cn(ge,le.fromStyles)),K.onDestroy(()=>Pt(ge,le.toStyles)),r.push(K);return}let Yt=[];le.timelines.forEach(pe=>{pe.stretchStartingKeyframe=!0,this.disabledNodes.has(pe.element)||Yt.push(pe)}),le.timelines=Yt,i.append(ge,le.timelines);let Ks={instruction:le,player:K,element:ge};a.push(Ks),le.queriedElements.forEach(pe=>at(l,pe,[]).push(K)),le.preStyleProps.forEach((pe,Dt)=>{if(pe.size){let et=h.get(Dt);et||h.set(Dt,et=new Set),pe.forEach((Ot,Xt)=>et.add(Xt))}}),le.postStyleProps.forEach((pe,Dt)=>{let et=d.get(Dt);et||d.set(Dt,et=new Set),pe.forEach((Ot,Xt)=>et.add(Xt))})});if(oe.length){let F=[];oe.forEach(L=>{F.push(ay(L.triggerName,L.errors))}),Ue.forEach(L=>L.destroy()),this.reportError(F)}let w=new Map,p=new Map;a.forEach(F=>{let L=F.element;i.has(L)&&(p.set(L,L),this._beforeAnimationBuild(F.player.namespaceId,F.instruction,w))}),r.forEach(F=>{let L=F.element;this._getPreviousPlayers(L,!1,F.namespaceId,F.triggerName,null).forEach(K=>{at(w,L,[]).push(K),K.destroy()})});let y=k.filter(F=>hd(F,h,d)),v=new Map;cd(v,this.driver,z,d,Rt).forEach(F=>{hd(F,h,d)&&y.push(F)});let b=new Map;R.forEach((F,L)=>{cd(b,this.driver,new Set(F),h,Wr)}),y.forEach(F=>{let L=v.get(F),V=b.get(F);v.set(F,new Map([...L?.entries()??[],...V?.entries()??[]]))});let _=[],ut=[],Qt={};a.forEach(F=>{let{element:L,player:V,instruction:K}=F;if(i.has(L)){if(m.has(L)){V.onDestroy(()=>Pt(L,K.toStyles)),V.disabled=!0,V.overrideTotalTime(K.totalTime),r.push(V);return}let ge=Qt;if(p.size>1){let fe=L,ae=[];for(;fe=fe.parentNode;){let le=p.get(fe);if(le){ge=le;break}ae.push(fe)}ae.forEach(le=>p.set(le,ge))}let ht=this._buildAnimation(V.namespaceId,K,w,o,b,v);if(V.setRealPlayer(ht),ge===Qt)_.push(V);else{let fe=this.playersByElement.get(ge);fe&&fe.length&&(V.parentPlayer=dn(fe)),r.push(V)}}else Cn(L,K.fromStyles),V.onDestroy(()=>Pt(L,K.toStyles)),ut.push(V),m.has(L)&&r.push(V)}),ut.forEach(F=>{let L=o.get(F.element);if(L&&L.length){let V=dn(L);F.setRealPlayer(V)}}),r.forEach(F=>{F.parentPlayer?F.syncPlayerEvents(F.parentPlayer):F.destroy()});for(let F=0;F<k.length;F++){let L=k[F],V=L[yt];if(ii(L,Vo),V&&V.hasAnimation)continue;let K=[];if(l.size){let ht=l.get(L);ht&&ht.length&&K.push(...ht);let fe=this.driver.query(L,Uo,!0);for(let ae=0;ae<fe.length;ae++){let le=l.get(fe[ae]);le&&le.length&&K.push(...le)}}let ge=K.filter(ht=>!ht.destroyed);ge.length?Hy(this,L,ge):this.processLeaveNode(L)}return k.length=0,_.forEach(F=>{this.players.push(F),F.onDone(()=>{F.destroy();let L=this.players.indexOf(F);this.players.splice(L,1)}),F.play()}),_}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let a=[];if(t){let l=this.playersByQueriedElement.get(e);l&&(a=l)}else{let l=this.playersByElement.get(e);if(l){let h=!o||o==Ki;l.forEach(d=>{d.queued||!h&&d.triggerName!=r||a.push(d)})}}return(i||r)&&(a=a.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:r;for(let h of t.timelines){let d=h.element,m=d!==o,g=at(i,d,[]);this._getPreviousPlayers(d,m,a,l,t.toState).forEach(R=>{let C=R.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),R.destroy(),g.push(R)})}Cn(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,a){let l=t.triggerName,h=t.element,d=[],m=new Set,g=new Set,T=t.timelines.map(C=>{let N=C.element;m.add(N);let k=N[yt];if(k&&k.removedBeforeQueried)return new ti(C.duration,C.delay);let B=N!==h,z=Qy((i.get(N)||jy).map(w=>w.getRealPlayer())).filter(w=>{let p=w;return p.element?p.element===N:!1}),G=o.get(N),j=a.get(N),Ue=dd(this._normalizer,C.keyframes,G,j),oe=this._buildPlayer(C,Ue,z);if(C.subTimeline&&r&&g.add(N),B){let w=new Yi(e,l,N);w.setRealPlayer(oe),d.push(w)}return oe});d.forEach(C=>{at(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>Gy(this.playersByQueriedElement,C.element,C))}),m.forEach(C=>ft(C,td));let R=dn(T);return R.onDestroy(()=>{m.forEach(C=>ii(C,td)),Pt(h,t.toStyles)}),g.forEach(C=>{at(r,C,[]).push(R)}),R}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ti(e.duration,e.delay)}},Yi=class{namespaceId;triggerName;element;_player=new ti;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Zo(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){at(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Gy(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Ky(n){return n??null}function ts(n){return n&&n.nodeType===1}function Wy(n){return n=="start"||n=="done"}function ld(n,e){let t=n.style.display;return n.style.display=e??"none",t}function cd(n,e,t,i,r){let o=[];t.forEach(h=>o.push(ld(h)));let a=[];i.forEach((h,d)=>{let m=new Map;h.forEach(g=>{let T=e.computeStyle(d,g,r);m.set(g,T),(!T||T.length==0)&&(d[yt]=zy,a.push(d))}),n.set(d,m)});let l=0;return t.forEach(h=>ld(h,o[l++])),a}function ud(n,e){let t=new Map;if(n.forEach(l=>t.set(l,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function a(l){if(!l)return i;let h=o.get(l);if(h)return h;let d=l.parentNode;return t.has(d)?h=d:r.has(d)?h=i:h=a(d),o.set(l,h),h}return e.forEach(l=>{let h=a(l);h!==i&&t.get(h).push(l)}),t}function ft(n,e){n.classList?.add(e)}function ii(n,e){n.classList?.remove(e)}function Hy(n,e,t){dn(t).onDone(()=>n.processLeaveNode(e))}function Qy(n){let e=[];return Id(n,e),e}function Id(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof No?Id(i.players,e):e.push(i)}}function Yy(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function hd(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var ri=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new Xo(e.body,t,i),this._timelineEngine=new Qo(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let a=e+"-"+r,l=this._triggerCache[a];if(!l){let h=[],d=[],m=vd(this._driver,o,h,d);if(h.length)throw Y_(r,h);l=Fy(r,m,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,r,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,a]=Zh(i),l=r;this._timelineEngine.command(o,t,a,l)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[a,l]=Zh(i);return this._timelineEngine.listen(a,t,l,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Xy(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Lo(e[0]),e.length>1&&(i=Lo(e[e.length-1]))):e instanceof Map&&(t=Lo(e)),t||i?new Jy(n,t,i):null}var Jy=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Pt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pt(this._element,this._initialStyles),this._endStyles&&(Pt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Cn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cn(this._element,this._endStyles),this._endStyles=null),Pt(this._element,this._initialStyles),this._state=3)}}return n})();function Lo(n){let e=null;return n.forEach((t,i)=>{Zy(i)&&(e=e||new Map,e.set(i,t))}),e}function Zy(n){return n==="display"||n==="position"}var us=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:ra(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},hs=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return fd(e,t)}getParentElement(e){return ta(e)}query(e,t,i){return pd(e,t,i)}computeStyle(e,t,i){return ra(e,t)}animate(e,t,i,r,o,a=[]){let l=r==0?"both":"forwards",h={duration:i,delay:r,fill:l};o&&(h.easing=o);let d=new Map,m=a.filter(R=>R instanceof us);yy(i,r)&&m.forEach(R=>{R.currentSnapshot.forEach((C,N)=>d.set(N,C))});let g=my(t).map(R=>new Map(R));g=vy(e,g,d);let T=Xy(e,g);return new us(e,g,h,T)}};var ns="@",bd="@.disabled",ds=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==ns&&t==bd?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Jo=class extends ds{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==ns?t.charAt(1)=="."&&t==bd?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==ns){let o=ev(e),a=t.slice(1),l="";return a.charAt(0)!=ns&&([a,l]=tv(a)),this.engine.listen(this.namespaceId,o,a,l,h=>{let d=h._data||-1;this.factory.scheduleListenerCallback(d,i,h)})}return this.delegate.listen(e,t,i,r)}};function ev(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function tv(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var fs=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,m=d.get(r);if(!m){let g=()=>d.delete(r);m=new ds(i,r,this.engine,g),d.set(r,m)}return m}let o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,e,d.name,d)};return t.data.animation.forEach(l),new Jo(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[a,l]=o;a(l)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var sv=(()=>{class n extends ri{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Me(Zu),Me(An),Me(Rn))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function ov(){return new ss}function av(n,e,t){return new fs(n,e,t)}var Sd=[{provide:Rn,useFactory:ov},{provide:ri,useClass:sv},{provide:zu,useFactory:av,deps:[rh,ri,he]}],Xb=[{provide:An,useClass:na},{provide:To,useValue:"NoopAnimations"},...Sd],lv=[{provide:An,useFactory:()=>new hs},{provide:To,useFactory:()=>"BrowserAnimations"},...Sd];function Cd(){return Bu("NgEagerAnimations"),[...lv]}var ps="analytics",cv="firebase_id",uv="origin",hv=60*1e3,dv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",da="https://www.googletagmanager.com/gtag/js";var Xe=new Ct("@firebase/analytics");var fv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},lt=new Zn("analytics","Analytics",fv);function pv(n){if(!n.startsWith(da)){let e=lt.create("invalid-gtag-resource",{gtagURL:n});return Xe.warn(e.message),""}return n}function Dd(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function mv(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function gv(n,e){let t=mv("firebase-js-sdk-policy",{createScriptURL:pv}),i=document.createElement("script"),r=`${da}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function _v(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function yv(n,e,t,i,r,o){return M(this,null,function*(){let a=i[r];try{if(a)yield e[a];else{let h=(yield Dd(t)).find(d=>d.measurementId===r);h&&(yield e[h.appId])}}catch(l){Xe.error(l)}n("config",r,o)})}function vv(n,e,t,i,r){return M(this,null,function*(){try{let o=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);let l=yield Dd(t);for(let h of a){let d=l.find(g=>g.measurementId===h),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",i,r||{})}catch(o){Xe.error(o)}})}function wv(n,e,t,i){function r(o,...a){return M(this,null,function*(){try{if(o==="event"){let[l,h]=a;yield vv(n,e,t,l,h)}else if(o==="config"){let[l,h]=a;yield yv(n,e,t,i,l,h)}else if(o==="consent"){let[l,h]=a;n("consent",l,h)}else if(o==="get"){let[l,h,d]=a;n("get",l,h,d)}else if(o==="set"){let[l]=a;n("set",l)}else n(o,...a)}catch(l){Xe.error(l)}})}return r}function Ev(n,e,t,i,r){let o=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=wv(o,n,e,t),{gtagCore:o,wrappedGtag:window[r]}}function Tv(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(da)&&t.src.includes(n))return t;return null}var Iv=30,bv=1e3,aa=class{constructor(e={},t=bv){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Od=new aa;function Sv(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Cv(n){return M(this,null,function*(){var e;let{appId:t,apiKey:i}=n,r={method:"GET",headers:Sv(i)},o=dv.replace("{app-id}",t),a=yield fetch(o,r);if(a.status!==200&&a.status!==304){let l="";try{let h=yield a.json();!((e=h.error)===null||e===void 0)&&e.message&&(l=h.error.message)}catch{}throw lt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()})}function Av(i){return M(this,arguments,function*(n,e=Od,t){let{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw lt.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw lt.create("no-api-key")}let l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new la;return setTimeout(()=>M(this,null,function*(){h.abort()}),t!==void 0?t:hv),Md({appId:r,apiKey:o,measurementId:a},l,h,e)})}function Md(o,a,l){return M(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=Od){var h;let{appId:d,measurementId:m}=n;try{yield Rv(i,e)}catch(g){if(m)return Xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:d,measurementId:m};throw g}try{let g=yield Cv(n);return r.deleteThrottleMetadata(d),g}catch(g){let T=g;if(!Pv(T)){if(r.deleteThrottleMetadata(d),m)return Xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${T?.message}]`),{appId:d,measurementId:m};throw g}let R=Number((h=T?.customData)===null||h===void 0?void 0:h.httpStatus)===503?zi(t,r.intervalMillis,Iv):zi(t,r.intervalMillis),C={throttleEndTimeMillis:Date.now()+R,backoffCount:t+1};return r.setThrottleMetadata(d,C),Xe.debug(`Calling attemptFetch again in ${R} millis`),Md(n,C,i,r)}})}function Rv(n,e){return new Promise((t,i)=>{let r=Math.max(e-Date.now(),0),o=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(o),i(lt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Pv(n){if(!(n instanceof bt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var la=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var ca;function Nv(n,e,t,i,r){return M(this,null,function*(){if(r&&r.global){n("event",t,i);return}else{let o=yield e,a=Object.assign(Object.assign({},i),{send_to:o});n("event",t,a)}})}function kv(n,e,t,i){return M(this,null,function*(){if(i&&i.global)return n("set",{user_id:t}),Promise.resolve();{let r=yield e;n("config",r,{update:!0,user_id:t})}})}var ua;function xv(n){ua=n}function Dv(n){ca=n}function Ov(){return M(this,null,function*(){if(an())try{yield Jn()}catch(n){return Xe.warn(lt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Xe.warn(lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Mv(n,e,t,i,r,o,a){return M(this,null,function*(){var l;let h=Av(n);h.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&Xe.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Xe.error(R)),e.push(h);let d=Ov().then(R=>{if(R)return i.getId()}),[m,g]=yield Promise.all([h,d]);Tv(o)||gv(o,m.measurementId),ua&&(r("consent","default",ua),xv(void 0)),r("js",new Date);let T=(l=a?.config)!==null&&l!==void 0?l:{};return T[uv]="firebase",T.update=!0,g!=null&&(T[cv]=g),r("config",m.measurementId,T),ca&&(r("set",ca),Dv(void 0)),m.measurementId})}var ha=class{constructor(e){this.app=e}_delete(){return delete si[this.app.options.appId],Promise.resolve()}},si={},Ad=[],Rd={},oa="dataLayer",Fv="gtag",Pd,fa,Nd=!1;function Lv(){let n=[];if(So()&&n.push("This is a browser extension environment."),qi()||n.push("Cookies are not available."),n.length>0){let e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=lt.create("invalid-analytics-context",{errorInfo:e});Xe.warn(t.message)}}function Vv(n,e,t){Lv();let i=n.options.appId;if(!i)throw lt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw lt.create("no-api-key");if(si[i]!=null)throw lt.create("already-exists",{id:i});if(!Nd){_v(oa);let{wrappedGtag:o,gtagCore:a}=Ev(si,Ad,Rd,oa,Fv);fa=o,Pd=a,Nd=!0}return si[i]=Mv(n,Ad,Rd,e,Pd,oa,t),new ha(n)}function Fd(n=Ge()){n=we(n);let e=Fe(n,ps);return e.isInitialized()?e.getImmediate():Ld(n)}function Ld(n,e={}){let t=Fe(n,ps);if(t.isInitialized()){let r=t.getImmediate();if(ln(e,t.getOptions()))return r;throw lt.create("already-initialized")}return t.initialize({options:e})}function Vd(){return M(this,null,function*(){if(So()||!qi()||!an())return!1;try{return yield Jn()}catch{return!1}})}function Ud(n,e,t){n=we(n),kv(fa,si[n.app.options.appId],e,t).catch(i=>Xe.error(i))}function pa(n,e,t,i){n=we(n),Nv(fa,si[n.app.options.appId],e,t,i).catch(r=>Xe.error(r))}var kd="@firebase/analytics",xd="0.10.12";function Uv(){Ae(new Ce(ps,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Vv(i,r,t)},"PUBLIC")),Ae(new Ce("analytics-internal",n,"PRIVATE")),q(kd,xd),q(kd,xd,"esm2017");function n(e){try{let t=e.getProvider(ps).getImmediate();return{logEvent:(i,r,o)=>pa(t,i,r,o)}}catch(t){throw lt.create("interop-component-reg-failed",{reason:t})}}}Uv();var Pn=class{constructor(e){return e}},$d="analytics",ga=class{constructor(){return Pe($d)}};var jd=ve(Fd,!0);var zd=ve(Vd,!1),Bv=ve(pa,!1,2);var qv=ve(Ud,!0,2);var ya=(()=>{class n{initialized;disposables=[];constructor(t,i,r){q("angularfire",Ee.full,"user-tracking");let o;this.initialized=i.runOutsideAngular(()=>new Promise(a=>{o=a})),zd().then(()=>{let a=r.get(Pn);a?this.disposables=[kh(t).subscribe(l=>{qv(a,l?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(i){return new(i||n)(Me(Ph),Me(he),Me(_e))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),$v="firebase_event_origin",jv="firebase_previous_class",zv="firebase_previous_id",Gv="firebase_previous_screen",Kv="firebase_screen_class",Bd="firebase_screen_id",Wv="firebase_screen",_a="outlet",Hv="page_path",Qv="page_title",Xi="screen_class",qd="screen_name",Yv="screen_view",Xv="auto",Jv="#",Zv=Math.floor(Math.random()*(2**32-1))-2**31,ma={},ew=n=>{let e=[n[Xi],n[_a]].join(Jv);if(ma.hasOwnProperty(e))return ma[e];{let t=Zv++;return ma[e]=t,t}},tw=(n,e,t)=>n.events.pipe(wo(r=>r instanceof ah)).pipe(Eo(r=>{let a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,T=>T.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",l=n.routerState.root.children.map(T=>T).find(T=>T.outlet===r.snapshot.outlet);if(!l)return Ui(null);let h=l;for(;h.firstChild;)h=h.firstChild;let d=h.pathFromRoot.map(T=>T.routeConfig?.path).filter(T=>T).join("/")||"/",m={[qd]:d,[Hv]:`/${a}`,[$v]:Xv,[Wv]:d,[_a]:r.snapshot.outlet};e&&(m[Qv]=e.getTitle());let g=l.component;if(g){if(g===ch){let T=r.snapshot;for(;T.firstChild;)T=T.firstChild;g=T.component}}else g=r.snapshot.component;if(typeof g=="string")return Ui(yo(Lt({},m),{[Xi]:g}));if(g){let T=t.resolveComponentFactory(g);return Ui(yo(Lt({},m),{[Xi]:T.selector}))}return Ui(null)}),wo(r=>!!r),vo(r=>Lt({[Kv]:r[Xi],[Bd]:ew(r)},r)),Lu(r=>r[_a]),Mu(r=>r.pipe(Fu((o,a)=>JSON.stringify(o)===JSON.stringify(a)),Uu(void 0),Vu(),vo(([o,a])=>o?Lt({[jv]:o[Xi],[Gv]:o[qd],[zv]:o[Bd]},a):a)))),Gd=(()=>{class n{disposable;constructor(t,i,r,o,a,l){q("angularfire",Ee.full,"screen-tracking"),zd().then(()=>{let h=l.get(Pn);!t||!h||o.runOutsideAngular(()=>{this.disposable=tw(t,i,r).pipe(Eo(d=>M(this,null,function*(){return a&&(yield a.initialized),Bv(h,Yv,d)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||n)(Me(sn,8),Me(oh,8),Me(ju),Me(he),Me(ya,8),Me(_e))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),va=new Te("angularfire2.analytics-instances");function nw(n,e,t){if(!Hn(t))return null;let i=Re($d,n,e);return i&&new Pn(i)}function iw(n){return(e,t,i)=>{if(!Hn(i))return null;let r=e.runOutsideAngular(()=>n(t));return new Pn(r)}}var rw={provide:ga,deps:[[new W,va]]},sw={provide:Pn,useFactory:nw,deps:[[new W,va],ke,dt]};function Kd(n,...e){return q("angularfire",Ee.full,"analytics"),Ie([sw,rw,{provide:va,useFactory:iw(n),multi:!0,deps:[he,_e,dt,Ne,xe,...e]}])}var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hd={};var ms,Qd;(function(){var n;function e(w,p){function y(){}y.prototype=p.prototype,w.D=p.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(v,E,b){for(var _=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)_[ut-2]=arguments[ut];return p.prototype[E].apply(v,_)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,p,y){y||(y=0);var v=Array(16);if(typeof p=="string")for(var E=0;16>E;++E)v[E]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(E=0;16>E;++E)v[E]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=w.g[0],y=w.g[1],E=w.g[2];var b=w.g[3],_=p+(b^y&(E^b))+v[0]+3614090360&4294967295;p=y+(_<<7&4294967295|_>>>25),_=b+(E^p&(y^E))+v[1]+3905402710&4294967295,b=p+(_<<12&4294967295|_>>>20),_=E+(y^b&(p^y))+v[2]+606105819&4294967295,E=b+(_<<17&4294967295|_>>>15),_=y+(p^E&(b^p))+v[3]+3250441966&4294967295,y=E+(_<<22&4294967295|_>>>10),_=p+(b^y&(E^b))+v[4]+4118548399&4294967295,p=y+(_<<7&4294967295|_>>>25),_=b+(E^p&(y^E))+v[5]+1200080426&4294967295,b=p+(_<<12&4294967295|_>>>20),_=E+(y^b&(p^y))+v[6]+2821735955&4294967295,E=b+(_<<17&4294967295|_>>>15),_=y+(p^E&(b^p))+v[7]+4249261313&4294967295,y=E+(_<<22&4294967295|_>>>10),_=p+(b^y&(E^b))+v[8]+1770035416&4294967295,p=y+(_<<7&4294967295|_>>>25),_=b+(E^p&(y^E))+v[9]+2336552879&4294967295,b=p+(_<<12&4294967295|_>>>20),_=E+(y^b&(p^y))+v[10]+4294925233&4294967295,E=b+(_<<17&4294967295|_>>>15),_=y+(p^E&(b^p))+v[11]+2304563134&4294967295,y=E+(_<<22&4294967295|_>>>10),_=p+(b^y&(E^b))+v[12]+1804603682&4294967295,p=y+(_<<7&4294967295|_>>>25),_=b+(E^p&(y^E))+v[13]+4254626195&4294967295,b=p+(_<<12&4294967295|_>>>20),_=E+(y^b&(p^y))+v[14]+2792965006&4294967295,E=b+(_<<17&4294967295|_>>>15),_=y+(p^E&(b^p))+v[15]+1236535329&4294967295,y=E+(_<<22&4294967295|_>>>10),_=p+(E^b&(y^E))+v[1]+4129170786&4294967295,p=y+(_<<5&4294967295|_>>>27),_=b+(y^E&(p^y))+v[6]+3225465664&4294967295,b=p+(_<<9&4294967295|_>>>23),_=E+(p^y&(b^p))+v[11]+643717713&4294967295,E=b+(_<<14&4294967295|_>>>18),_=y+(b^p&(E^b))+v[0]+3921069994&4294967295,y=E+(_<<20&4294967295|_>>>12),_=p+(E^b&(y^E))+v[5]+3593408605&4294967295,p=y+(_<<5&4294967295|_>>>27),_=b+(y^E&(p^y))+v[10]+38016083&4294967295,b=p+(_<<9&4294967295|_>>>23),_=E+(p^y&(b^p))+v[15]+3634488961&4294967295,E=b+(_<<14&4294967295|_>>>18),_=y+(b^p&(E^b))+v[4]+3889429448&4294967295,y=E+(_<<20&4294967295|_>>>12),_=p+(E^b&(y^E))+v[9]+568446438&4294967295,p=y+(_<<5&4294967295|_>>>27),_=b+(y^E&(p^y))+v[14]+3275163606&4294967295,b=p+(_<<9&4294967295|_>>>23),_=E+(p^y&(b^p))+v[3]+4107603335&4294967295,E=b+(_<<14&4294967295|_>>>18),_=y+(b^p&(E^b))+v[8]+1163531501&4294967295,y=E+(_<<20&4294967295|_>>>12),_=p+(E^b&(y^E))+v[13]+2850285829&4294967295,p=y+(_<<5&4294967295|_>>>27),_=b+(y^E&(p^y))+v[2]+4243563512&4294967295,b=p+(_<<9&4294967295|_>>>23),_=E+(p^y&(b^p))+v[7]+1735328473&4294967295,E=b+(_<<14&4294967295|_>>>18),_=y+(b^p&(E^b))+v[12]+2368359562&4294967295,y=E+(_<<20&4294967295|_>>>12),_=p+(y^E^b)+v[5]+4294588738&4294967295,p=y+(_<<4&4294967295|_>>>28),_=b+(p^y^E)+v[8]+2272392833&4294967295,b=p+(_<<11&4294967295|_>>>21),_=E+(b^p^y)+v[11]+1839030562&4294967295,E=b+(_<<16&4294967295|_>>>16),_=y+(E^b^p)+v[14]+4259657740&4294967295,y=E+(_<<23&4294967295|_>>>9),_=p+(y^E^b)+v[1]+2763975236&4294967295,p=y+(_<<4&4294967295|_>>>28),_=b+(p^y^E)+v[4]+1272893353&4294967295,b=p+(_<<11&4294967295|_>>>21),_=E+(b^p^y)+v[7]+4139469664&4294967295,E=b+(_<<16&4294967295|_>>>16),_=y+(E^b^p)+v[10]+3200236656&4294967295,y=E+(_<<23&4294967295|_>>>9),_=p+(y^E^b)+v[13]+681279174&4294967295,p=y+(_<<4&4294967295|_>>>28),_=b+(p^y^E)+v[0]+3936430074&4294967295,b=p+(_<<11&4294967295|_>>>21),_=E+(b^p^y)+v[3]+3572445317&4294967295,E=b+(_<<16&4294967295|_>>>16),_=y+(E^b^p)+v[6]+76029189&4294967295,y=E+(_<<23&4294967295|_>>>9),_=p+(y^E^b)+v[9]+3654602809&4294967295,p=y+(_<<4&4294967295|_>>>28),_=b+(p^y^E)+v[12]+3873151461&4294967295,b=p+(_<<11&4294967295|_>>>21),_=E+(b^p^y)+v[15]+530742520&4294967295,E=b+(_<<16&4294967295|_>>>16),_=y+(E^b^p)+v[2]+3299628645&4294967295,y=E+(_<<23&4294967295|_>>>9),_=p+(E^(y|~b))+v[0]+4096336452&4294967295,p=y+(_<<6&4294967295|_>>>26),_=b+(y^(p|~E))+v[7]+1126891415&4294967295,b=p+(_<<10&4294967295|_>>>22),_=E+(p^(b|~y))+v[14]+2878612391&4294967295,E=b+(_<<15&4294967295|_>>>17),_=y+(b^(E|~p))+v[5]+4237533241&4294967295,y=E+(_<<21&4294967295|_>>>11),_=p+(E^(y|~b))+v[12]+1700485571&4294967295,p=y+(_<<6&4294967295|_>>>26),_=b+(y^(p|~E))+v[3]+2399980690&4294967295,b=p+(_<<10&4294967295|_>>>22),_=E+(p^(b|~y))+v[10]+4293915773&4294967295,E=b+(_<<15&4294967295|_>>>17),_=y+(b^(E|~p))+v[1]+2240044497&4294967295,y=E+(_<<21&4294967295|_>>>11),_=p+(E^(y|~b))+v[8]+1873313359&4294967295,p=y+(_<<6&4294967295|_>>>26),_=b+(y^(p|~E))+v[15]+4264355552&4294967295,b=p+(_<<10&4294967295|_>>>22),_=E+(p^(b|~y))+v[6]+2734768916&4294967295,E=b+(_<<15&4294967295|_>>>17),_=y+(b^(E|~p))+v[13]+1309151649&4294967295,y=E+(_<<21&4294967295|_>>>11),_=p+(E^(y|~b))+v[4]+4149444226&4294967295,p=y+(_<<6&4294967295|_>>>26),_=b+(y^(p|~E))+v[11]+3174756917&4294967295,b=p+(_<<10&4294967295|_>>>22),_=E+(p^(b|~y))+v[2]+718787259&4294967295,E=b+(_<<15&4294967295|_>>>17),_=y+(b^(E|~p))+v[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(E+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+E&4294967295,w.g[3]=w.g[3]+b&4294967295}i.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var y=p-this.blockSize,v=this.B,E=this.h,b=0;b<p;){if(E==0)for(;b<=y;)r(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<p;)if(v[E++]=w.charCodeAt(b++),E==this.blockSize){r(this,v),E=0;break}}else for(;b<p;)if(v[E++]=w[b++],E==this.blockSize){r(this,v),E=0;break}}this.h=E,this.o+=p},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var y=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=y&255,y/=256;for(this.u(w),w=Array(16),p=y=0;4>p;++p)for(var v=0;32>v;v+=8)w[y++]=this.g[p]>>>v&255;return w};function o(w,p){var y=l;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=p(w)}function a(w,p){this.h=p;for(var y=[],v=!0,E=w.length-1;0<=E;E--){var b=w[E]|0;v&&b==p||(y[E]=b,v=!1)}this.g=y}var l={};function h(w){return-128<=w&&128>w?o(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return k(d(-w));for(var p=[],y=1,v=0;w>=y;v++)p[v]=w/y|0,y*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return k(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(p,8)),v=g,E=0;E<w.length;E+=8){var b=Math.min(8,w.length-E),_=parseInt(w.substring(E,E+b),p);8>b?(b=d(Math.pow(p,b)),v=v.j(b).add(d(_))):(v=v.j(y),v=v.add(d(_)))}return v}var g=h(0),T=h(1),R=h(16777216);n=a.prototype,n.m=function(){if(N(this))return-k(this).m();for(var w=0,p=1,y=0;y<this.g.length;y++){var v=this.i(y);w+=(0<=v?v:4294967296+v)*p,p*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(N(this))return"-"+k(this).toString(w);for(var p=d(Math.pow(w,6)),y=this,v="";;){var E=j(y,p).g;y=B(y,E.j(p));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=E,C(y))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function N(w){return w.h==-1}n.l=function(w){return w=B(this,w),N(w)?-1:C(w)?0:1};function k(w){for(var p=w.g.length,y=[],v=0;v<p;v++)y[v]=~w.g[v];return new a(y,~w.h).add(T)}n.abs=function(){return N(this)?k(this):this},n.add=function(w){for(var p=Math.max(this.g.length,w.g.length),y=[],v=0,E=0;E<=p;E++){var b=v+(this.i(E)&65535)+(w.i(E)&65535),_=(b>>>16)+(this.i(E)>>>16)+(w.i(E)>>>16);v=_>>>16,b&=65535,_&=65535,y[E]=_<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function B(w,p){return w.add(k(p))}n.j=function(w){if(C(this)||C(w))return g;if(N(this))return N(w)?k(this).j(k(w)):k(k(this).j(w));if(N(w))return k(this.j(k(w)));if(0>this.l(R)&&0>w.l(R))return d(this.m()*w.m());for(var p=this.g.length+w.g.length,y=[],v=0;v<2*p;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<w.g.length;E++){var b=this.i(v)>>>16,_=this.i(v)&65535,ut=w.i(E)>>>16,Qt=w.i(E)&65535;y[2*v+2*E]+=_*Qt,z(y,2*v+2*E),y[2*v+2*E+1]+=b*Qt,z(y,2*v+2*E+1),y[2*v+2*E+1]+=_*ut,z(y,2*v+2*E+1),y[2*v+2*E+2]+=b*ut,z(y,2*v+2*E+2)}for(v=0;v<p;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=p;v<2*p;v++)y[v]=0;return new a(y,0)};function z(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function G(w,p){this.g=w,this.h=p}function j(w,p){if(C(p))throw Error("division by zero");if(C(w))return new G(g,g);if(N(w))return p=j(k(w),p),new G(k(p.g),k(p.h));if(N(p))return p=j(w,k(p)),new G(k(p.g),p.h);if(30<w.g.length){if(N(w)||N(p))throw Error("slowDivide_ only works with positive integers.");for(var y=T,v=p;0>=v.l(w);)y=Ue(y),v=Ue(v);var E=oe(y,1),b=oe(v,1);for(v=oe(v,2),y=oe(y,2);!C(v);){var _=b.add(v);0>=_.l(w)&&(E=E.add(y),b=_),v=oe(v,1),y=oe(y,1)}return p=B(w,E.j(p)),new G(E,p)}for(E=g;0<=w.l(p);){for(y=Math.max(1,Math.floor(w.m()/p.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=d(y),_=b.j(p);N(_)||0<_.l(w);)y-=v,b=d(y),_=b.j(p);C(b)&&(b=T),E=E.add(b),w=B(w,_)}return new G(E,w)}n.A=function(w){return j(this,w).h},n.and=function(w){for(var p=Math.max(this.g.length,w.g.length),y=[],v=0;v<p;v++)y[v]=this.i(v)&w.i(v);return new a(y,this.h&w.h)},n.or=function(w){for(var p=Math.max(this.g.length,w.g.length),y=[],v=0;v<p;v++)y[v]=this.i(v)|w.i(v);return new a(y,this.h|w.h)},n.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),y=[],v=0;v<p;v++)y[v]=this.i(v)^w.i(v);return new a(y,this.h^w.h)};function Ue(w){for(var p=w.g.length+1,y=[],v=0;v<p;v++)y[v]=w.i(v)<<1|w.i(v-1)>>>31;return new a(y,w.h)}function oe(w,p){var y=p>>5;p%=32;for(var v=w.g.length-y,E=[],b=0;b<v;b++)E[b]=0<p?w.i(b+y)>>>p|w.i(b+y+1)<<32-p:w.i(b+y);return new a(E,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Qd=Hd.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,ms=Hd.Integer=a}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jt={};var Yd,ow,Xd,Jd,Zd,ef,tf,nf,rf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,u){return s==Array.prototype||s==Object.prototype||(s[c]=u.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof gs=="object"&&gs];for(var c=0;c<s.length;++c){var u=s[c];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var i=t(this);function r(s,c){if(c)e:{var u=i;s=s.split(".");for(var f=0;f<s.length-1;f++){var I=s[f];if(!(I in u))break e;u=u[I]}s=s[s.length-1],f=u[s],c=c(f),c!=f&&c!=null&&e(u,s,{configurable:!0,writable:!0,value:c})}}function o(s,c){s instanceof String&&(s+="");var u=0,f=!1,I={next:function(){if(!f&&u<s.length){var S=u++;return{value:c(S,s[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(s){return s||function(){return o(this,function(c,u){return u})}});var a=a||{},l=this||self;function h(s){var c=typeof s;return c=c!="object"?c:s?Array.isArray(s)?"array":c:"null",c=="array"||c=="object"&&typeof s.length=="number"}function d(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function m(s,c,u){return s.call.apply(s.bind,arguments)}function g(s,c,u){if(!s)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,f),s.apply(c,I)}}return function(){return s.apply(c,arguments)}}function T(s,c,u){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,T.apply(null,arguments)}function R(s,c){var u=Array.prototype.slice.call(arguments,1);return function(){var f=u.slice();return f.push.apply(f,arguments),s.apply(this,f)}}function C(s,c){function u(){}u.prototype=c.prototype,s.aa=c.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(f,I,S){for(var x=Array(arguments.length-2),re=2;re<arguments.length;re++)x[re-2]=arguments[re];return c.prototype[I].apply(f,x)}}function N(s){let c=s.length;if(0<c){let u=Array(c);for(let f=0;f<c;f++)u[f]=s[f];return u}return[]}function k(s,c){for(let u=1;u<arguments.length;u++){let f=arguments[u];if(h(f)){let I=s.length||0,S=f.length||0;s.length=I+S;for(let x=0;x<S;x++)s[I+x]=f[x]}else s.push(f)}}class B{constructor(c,u){this.i=c,this.j=u,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function z(s){return/^[\s\xa0]*$/.test(s)}function G(){var s=l.navigator;return s&&(s=s.userAgent)?s:""}function j(s){return j[" "](s),s}j[" "]=function(){};var Ue=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function oe(s,c,u){for(let f in s)c.call(u,s[f],f,s)}function w(s,c){for(let u in s)c.call(void 0,s[u],u,s)}function p(s){let c={};for(let u in s)c[u]=s[u];return c}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(s,c){let u,f;for(let I=1;I<arguments.length;I++){f=arguments[I];for(u in f)s[u]=f[u];for(let S=0;S<y.length;S++)u=y[S],Object.prototype.hasOwnProperty.call(f,u)&&(s[u]=f[u])}}function E(s){var c=1;s=s.split(":");let u=[];for(;0<c&&s.length;)u.push(s.shift()),c--;return s.length&&u.push(s.join(":")),u}function b(s){l.setTimeout(()=>{throw s},0)}function _(){var s=K;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class ut{constructor(){this.h=this.g=null}add(c,u){let f=Qt.get();f.set(c,u),this.h?this.h.next=f:this.g=f,this.h=f}}var Qt=new B(()=>new F,s=>s.reset());class F{constructor(){this.next=this.g=this.h=null}set(c,u){this.h=c,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,K=new ut,ge=()=>{let s=l.Promise.resolve(void 0);L=()=>{s.then(ht)}};var ht=()=>{for(var s;s=_();){try{s.h.call(s.g)}catch(u){b(u)}var c=Qt;c.j(s),100>c.h&&(c.h++,s.next=c.g,c.g=s)}V=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};l.addEventListener("test",u,c),l.removeEventListener("test",u,c)}catch{}return s}();function Yt(s,c){if(ae.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,f=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget){if(Ue){e:{try{j(c.nodeName);var I=!0;break e}catch{}I=!1}I||(c=null)}}else u=="mouseover"?c=s.fromElement:u=="mouseout"&&(c=s.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Ks[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Yt.aa.h.call(this)}}C(Yt,ae);var Ks={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function et(s,c,u,f,I){this.listener=s,this.proxy=null,this.src=c,this.type=u,this.capture=!!f,this.ha=I,this.key=++Dt,this.da=this.fa=!1}function Ot(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Xt(s){this.src=s,this.g={},this.h=0}Xt.prototype.add=function(s,c,u,f,I){var S=s.toString();s=this.g[S],s||(s=this.g[S]=[],this.h++);var x=Hs(s,c,f,I);return-1<x?(c=s[x],u||(c.fa=!1)):(c=new et(c,this.src,S,!!f,I),c.fa=u,s.push(c)),c};function Ws(s,c){var u=c.type;if(u in s.g){var f=s.g[u],I=Array.prototype.indexOf.call(f,c,void 0),S;(S=0<=I)&&Array.prototype.splice.call(f,I,1),S&&(Ot(c),s.g[u].length==0&&(delete s.g[u],s.h--))}}function Hs(s,c,u,f){for(var I=0;I<s.length;++I){var S=s[I];if(!S.da&&S.listener==c&&S.capture==!!u&&S.ha==f)return I}return-1}var Qs="closure_lm_"+(1e6*Math.random()|0),Ys={};function Oc(s,c,u,f,I){if(f&&f.once)return Fc(s,c,u,f,I);if(Array.isArray(c)){for(var S=0;S<c.length;S++)Oc(s,c[S],u,f,I);return null}return u=eo(u),s&&s[pe]?s.K(c,u,d(f)?!!f.capture:!!f,I):Mc(s,c,u,!1,f,I)}function Mc(s,c,u,f,I,S){if(!c)throw Error("Invalid event type");var x=d(I)?!!I.capture:!!I,re=Js(s);if(re||(s[Qs]=re=new Xt(s)),u=re.add(c,u,f,x,S),u.proxy)return u;if(f=Dg(),u.proxy=f,f.src=s,f.listener=u,s.addEventListener)le||(I=x),I===void 0&&(I=!1),s.addEventListener(c.toString(),f,I);else if(s.attachEvent)s.attachEvent(Vc(c.toString()),f);else if(s.addListener&&s.removeListener)s.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return u}function Dg(){function s(u){return c.call(s.src,s.listener,u)}let c=Og;return s}function Fc(s,c,u,f,I){if(Array.isArray(c)){for(var S=0;S<c.length;S++)Fc(s,c[S],u,f,I);return null}return u=eo(u),s&&s[pe]?s.L(c,u,d(f)?!!f.capture:!!f,I):Mc(s,c,u,!0,f,I)}function Lc(s,c,u,f,I){if(Array.isArray(c))for(var S=0;S<c.length;S++)Lc(s,c[S],u,f,I);else f=d(f)?!!f.capture:!!f,u=eo(u),s&&s[pe]?(s=s.i,c=String(c).toString(),c in s.g&&(S=s.g[c],u=Hs(S,u,f,I),-1<u&&(Ot(S[u]),Array.prototype.splice.call(S,u,1),S.length==0&&(delete s.g[c],s.h--)))):s&&(s=Js(s))&&(c=s.g[c.toString()],s=-1,c&&(s=Hs(c,u,f,I)),(u=-1<s?c[s]:null)&&Xs(u))}function Xs(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[pe])Ws(c.i,s);else{var u=s.type,f=s.proxy;c.removeEventListener?c.removeEventListener(u,f,s.capture):c.detachEvent?c.detachEvent(Vc(u),f):c.addListener&&c.removeListener&&c.removeListener(f),(u=Js(c))?(Ws(u,s),u.h==0&&(u.src=null,c[Qs]=null)):Ot(s)}}}function Vc(s){return s in Ys?Ys[s]:Ys[s]="on"+s}function Og(s,c){if(s.da)s=!0;else{c=new Yt(c,this);var u=s.listener,f=s.ha||s.src;s.fa&&Xs(s),s=u.call(f,c)}return s}function Js(s){return s=s[Qs],s instanceof Xt?s:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function eo(s){return typeof s=="function"?s:(s[Zs]||(s[Zs]=function(c){return s.handleEvent(c)}),s[Zs])}function Be(){fe.call(this),this.i=new Xt(this),this.M=this,this.F=null}C(Be,fe),Be.prototype[pe]=!0,Be.prototype.removeEventListener=function(s,c,u,f){Lc(this,s,c,u,f)};function Qe(s,c){var u,f=s.F;if(f)for(u=[];f;f=f.F)u.push(f);if(s=s.M,f=c.type||c,typeof c=="string")c=new ae(c,s);else if(c instanceof ae)c.target=c.target||s;else{var I=c;c=new ae(f,s),v(c,I)}if(I=!0,u)for(var S=u.length-1;0<=S;S--){var x=c.g=u[S];I=Cr(x,f,!0,c)&&I}if(x=c.g=s,I=Cr(x,f,!0,c)&&I,I=Cr(x,f,!1,c)&&I,u)for(S=0;S<u.length;S++)x=c.g=u[S],I=Cr(x,f,!1,c)&&I}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var s=this.i,c;for(c in s.g){for(var u=s.g[c],f=0;f<u.length;f++)Ot(u[f]);delete s.g[c],s.h--}}this.F=null},Be.prototype.K=function(s,c,u,f){return this.i.add(String(s),c,!1,u,f)},Be.prototype.L=function(s,c,u,f){return this.i.add(String(s),c,!0,u,f)};function Cr(s,c,u,f){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();for(var I=!0,S=0;S<c.length;++S){var x=c[S];if(x&&!x.da&&x.capture==u){var re=x.listener,Oe=x.ha||x.src;x.fa&&Ws(s.i,x),I=re.call(Oe,f)!==!1&&I}}return I&&!f.defaultPrevented}function Uc(s,c,u){if(typeof s=="function")u&&(s=T(s,u));else if(s&&typeof s.handleEvent=="function")s=T(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(s,c||0)}function Bc(s){s.g=Uc(()=>{s.g=null,s.i&&(s.i=!1,Bc(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class Mg extends fe{constructor(c,u){super(),this.m=c,this.l=u,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Bc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(s){fe.call(this),this.h=s,this.g={}}C(Si,fe);var qc=[];function $c(s){oe(s.g,function(c,u){this.g.hasOwnProperty(u)&&Xs(c)},s),s.g={}}Si.prototype.N=function(){Si.aa.N.call(this),$c(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=l.JSON.stringify,Fg=l.JSON.parse,Lg=class{stringify(s){return l.JSON.stringify(s,void 0)}parse(s){return l.JSON.parse(s,void 0)}};function no(){}no.prototype.h=null;function jc(s){return s.h||(s.h=s.i())}function zc(){}var Ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function io(){ae.call(this,"d")}C(io,ae);function ro(){ae.call(this,"c")}C(ro,ae);var yn={},Gc=null;function Ar(){return Gc=Gc||new Be}yn.La="serverreachability";function Kc(s){ae.call(this,yn.La,s)}C(Kc,ae);function Ai(s){let c=Ar();Qe(c,new Kc(c))}yn.STAT_EVENT="statevent";function Wc(s,c){ae.call(this,yn.STAT_EVENT,s),this.stat=c}C(Wc,ae);function Ye(s){let c=Ar();Qe(c,new Wc(c,s))}yn.Ma="timingevent";function Hc(s,c){ae.call(this,yn.Ma,s),this.size=c}C(Hc,ae);function Ri(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){s()},c)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function Vg(s,c,u,f,I,S){s.info(function(){if(s.g)if(S)for(var x="",re=S.split("&"),Oe=0;Oe<re.length;Oe++){var ee=re[Oe].split("=");if(1<ee.length){var qe=ee[0];ee=ee[1];var $e=qe.split("_");x=2<=$e.length&&$e[1]=="type"?x+(qe+"="+ee+"&"):x+(qe+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+f+") [attempt "+I+"]: "+c+`
`+u+`
`+x})}function Ug(s,c,u,f,I,S,x){s.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+I+"]: "+c+`
`+u+`
`+S+" "+x})}function Bn(s,c,u,f){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+qg(s,u)+(f?" "+f:"")})}function Bg(s,c){s.info(function(){return"TIMEOUT: "+c})}Pi.prototype.info=function(){};function qg(s,c){if(!s.g)return c;if(!c)return null;try{var u=JSON.parse(c);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var f=u[s];if(!(2>f.length)){var I=f[1];if(Array.isArray(I)&&!(1>I.length)){var S=I[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<I.length;x++)I[x]=""}}}}return to(u)}catch{return c}}var Rr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},so;function Pr(){}C(Pr,no),Pr.prototype.g=function(){return new XMLHttpRequest},Pr.prototype.i=function(){return{}},so=new Pr;function Jt(s,c,u,f){this.j=s,this.i=c,this.l=u,this.R=f||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yc}function Yc(){this.i=null,this.g="",this.h=!1}var Xc={},oo={};function ao(s,c,u){s.L=1,s.v=Dr(Mt(c)),s.m=u,s.P=!0,Jc(s,null)}function Jc(s,c){s.F=Date.now(),Nr(s),s.A=Mt(s.v);var u=s.A,f=s.R;Array.isArray(f)||(f=[String(f)]),du(u.i,"t",f),s.C=0,u=s.j.J,s.h=new Yc,s.g=Nu(s.j,u?c:null,!s.m),0<s.O&&(s.M=new Mg(T(s.Y,s,s.g),s.O)),c=s.U,u=s.g,f=s.ca;var I="readystatechange";Array.isArray(I)||(I&&(qc[0]=I.toString()),I=qc);for(var S=0;S<I.length;S++){var x=Oc(u,I[S],f||c.handleEvent,!1,c.h||c);if(!x)break;c.g[x.key]=x}c=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,c)):(s.u="GET",s.g.ea(s.A,s.u,null,c)),Ai(),Vg(s.i,s.u,s.A,s.l,s.R,s.m)}Jt.prototype.ca=function(s){s=s.target;let c=this.M;c&&Ft(s)==3?c.j():this.Y(s)},Jt.prototype.Y=function(s){try{if(s==this.g)e:{let $e=Ft(this.g);var c=this.g.Ba();let jn=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||$e!=4||c==7||(c==8||0>=jn?Ai(3):Ai(2)),lo(this);var u=this.g.Z();this.X=u;t:if(Zc(this)){var f=vu(this.g);s="";var I=f.length,S=Ft(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Ni(this);var x="";break t}this.h.i=new l.TextDecoder}for(c=0;c<I;c++)this.h.h=!0,s+=this.h.i.decode(f[c],{stream:!(S&&c==I-1)});f.length=0,this.h.g+=s,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=u==200,Ug(this.i,this.u,this.A,this.l,this.R,$e,u),this.o){if(this.T&&!this.K){t:{if(this.g){var re,Oe=this.g;if((re=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(re)){var ee=re;break t}}ee=null}if(u=ee)Bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,u);else{this.o=!1,this.s=3,Ye(12),vn(this),Ni(this);break e}}if(this.P){u=!0;let _t;for(;!this.J&&this.C<x.length;)if(_t=$g(this,x),_t==oo){$e==4&&(this.s=4,Ye(14),u=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Xc){this.s=4,Ye(15),Bn(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else Bn(this.i,this.l,_t,null),co(this,_t);if(Zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||x.length!=0||this.h.h||(this.s=1,Ye(16),u=!1),this.o=this.o&&u,!u)Bn(this.i,this.l,x,"[Invalid Chunked Response]"),vn(this),Ni(this);else if(0<x.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),go(qe),qe.M=!0,Ye(11))}}else Bn(this.i,this.l,x,null),co(this,x);$e==4&&vn(this),this.o&&!this.J&&($e==4?Cu(this.j,this):(this.o=!1,Nr(this)))}else s_(this.g),u==400&&0<x.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),vn(this),Ni(this)}}}catch{}finally{}};function Zc(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function $g(s,c){var u=s.C,f=c.indexOf(`
`,u);return f==-1?oo:(u=Number(c.substring(u,f)),isNaN(u)?Xc:(f+=1,f+u>c.length?oo:(c=c.slice(f,f+u),s.C=f+u,c)))}Jt.prototype.cancel=function(){this.J=!0,vn(this)};function Nr(s){s.S=Date.now()+s.I,eu(s,s.I)}function eu(s,c){if(s.B!=null)throw Error("WatchDog timer not null");s.B=Ri(T(s.ba,s),c)}function lo(s){s.B&&(l.clearTimeout(s.B),s.B=null)}Jt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Bg(this.i,this.A),this.L!=2&&(Ai(),Ye(17)),vn(this),this.s=2,Ni(this)):eu(this,this.S-s)};function Ni(s){s.j.G==0||s.J||Cu(s.j,s)}function vn(s){lo(s);var c=s.M;c&&typeof c.ma=="function"&&c.ma(),s.M=null,$c(s.U),s.g&&(c=s.g,s.g=null,c.abort(),c.ma())}function co(s,c){try{var u=s.j;if(u.G!=0&&(u.g==s||uo(u.h,s))){if(!s.K&&uo(u.h,s)&&u.G==3){try{var f=u.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var I=f;if(I[0]==0){e:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)Vr(u),Fr(u);else break e;mo(u),Ye(18)}}else u.za=I[1],0<u.za-u.T&&37500>I[2]&&u.F&&u.v==0&&!u.C&&(u.C=Ri(T(u.Za,u),6e3));if(1>=iu(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else En(u,11)}else if((s.K||u.g==s)&&Vr(u),!z(c))for(I=u.Da.g.parse(c),c=0;c<I.length;c++){let ee=I[c];if(u.T=ee[0],ee=ee[1],u.G==2)if(ee[0]=="c"){u.K=ee[1],u.ia=ee[2];let qe=ee[3];qe!=null&&(u.la=qe,u.j.info("VER="+u.la));let $e=ee[4];$e!=null&&(u.Aa=$e,u.j.info("SVER="+u.Aa));let jn=ee[5];jn!=null&&typeof jn=="number"&&0<jn&&(f=1.5*jn,u.L=f,u.j.info("backChannelRequestTimeoutMs_="+f)),f=u;let _t=s.g;if(_t){let Br=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var S=f.h;S.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(ho(S,S.h),S.h=null))}if(f.D){let _o=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(f.ya=_o,ce(f.I,f.D,_o))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),f=u;var x=s;if(f.qa=Pu(f,f.J?f.ia:null,f.W),x.K){ru(f.h,x);var re=x,Oe=f.L;Oe&&(re.I=Oe),re.B&&(lo(re),Nr(re)),f.g=x}else bu(f);0<u.i.length&&Lr(u)}else ee[0]!="stop"&&ee[0]!="close"||En(u,7);else u.G==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?En(u,7):po(u):ee[0]!="noop"&&u.l&&u.l.ta(ee),u.v=0)}}Ai(4)}catch{}}var jg=class{constructor(s,c){this.g=s,this.map=c}};function tu(s){this.l=s||10,l.PerformanceNavigationTiming?(s=l.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nu(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function iu(s){return s.h?1:s.g?s.g.size:0}function uo(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function ho(s,c){s.g?s.g.add(c):s.h=c}function ru(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}tu.prototype.cancel=function(){if(this.i=su(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function su(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let u of s.g.values())c=c.concat(u.D);return c}return N(s.i)}function zg(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var c=[],u=s.length,f=0;f<u;f++)c.push(s[f]);return c}c=[],u=0;for(f in s)c[u++]=s[f];return c}function Gg(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var c=[];s=s.length;for(var u=0;u<s;u++)c.push(u);return c}c=[],u=0;for(let f in s)c[u++]=f;return c}}}function ou(s,c){if(s.forEach&&typeof s.forEach=="function")s.forEach(c,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,c,void 0);else for(var u=Gg(s),f=zg(s),I=f.length,S=0;S<I;S++)c.call(void 0,f[S],u&&u[S],s)}var au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kg(s,c){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var f=s[u].indexOf("="),I=null;if(0<=f){var S=s[u].substring(0,f);I=s[u].substring(f+1)}else S=s[u];c(S,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function wn(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof wn){this.h=s.h,kr(this,s.j),this.o=s.o,this.g=s.g,xr(this,s.s),this.l=s.l;var c=s.i,u=new Di;u.i=c.i,c.g&&(u.g=new Map(c.g),u.h=c.h),lu(this,u),this.m=s.m}else s&&(c=String(s).match(au))?(this.h=!1,kr(this,c[1]||"",!0),this.o=ki(c[2]||""),this.g=ki(c[3]||"",!0),xr(this,c[4]),this.l=ki(c[5]||"",!0),lu(this,c[6]||"",!0),this.m=ki(c[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}wn.prototype.toString=function(){var s=[],c=this.j;c&&s.push(xi(c,cu,!0),":");var u=this.g;return(u||c=="file")&&(s.push("//"),(c=this.o)&&s.push(xi(c,cu,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(xi(u,u.charAt(0)=="/"?Qg:Hg,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",xi(u,Xg)),s.join("")};function Mt(s){return new wn(s)}function kr(s,c,u){s.j=u?ki(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function xr(s,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);s.s=c}else s.s=null}function lu(s,c,u){c instanceof Di?(s.i=c,Jg(s.i,s.h)):(u||(c=xi(c,Yg)),s.i=new Di(c,s.h))}function ce(s,c,u){s.i.set(c,u)}function Dr(s){return ce(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ki(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function xi(s,c,u){return typeof s=="string"?(s=encodeURI(s).replace(c,Wg),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Wg(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var cu=/[#\/\?@]/g,Hg=/[#\?:]/g,Qg=/[#\?]/g,Yg=/[#\?@]/g,Xg=/#/g;function Di(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function Zt(s){s.g||(s.g=new Map,s.h=0,s.i&&Kg(s.i,function(c,u){s.add(decodeURIComponent(c.replace(/\+/g," ")),u)}))}n=Di.prototype,n.add=function(s,c){Zt(this),this.i=null,s=qn(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(c),this.h+=1,this};function uu(s,c){Zt(s),c=qn(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function hu(s,c){return Zt(s),c=qn(s,c),s.g.has(c)}n.forEach=function(s,c){Zt(this),this.g.forEach(function(u,f){u.forEach(function(I){s.call(c,I,f,this)},this)},this)},n.na=function(){Zt(this);let s=Array.from(this.g.values()),c=Array.from(this.g.keys()),u=[];for(let f=0;f<c.length;f++){let I=s[f];for(let S=0;S<I.length;S++)u.push(c[f])}return u},n.V=function(s){Zt(this);let c=[];if(typeof s=="string")hu(this,s)&&(c=c.concat(this.g.get(qn(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)c=c.concat(s[u])}return c},n.set=function(s,c){return Zt(this),this.i=null,s=qn(this,s),hu(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=this.V(s),0<s.length?String(s[0]):c):c};function du(s,c,u){uu(s,c),0<u.length&&(s.i=null,s.g.set(qn(s,c),N(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(var u=0;u<c.length;u++){var f=c[u];let S=encodeURIComponent(String(f)),x=this.V(f);for(f=0;f<x.length;f++){var I=S;x[f]!==""&&(I+="="+encodeURIComponent(String(x[f]))),s.push(I)}}return this.i=s.join("&")};function qn(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function Jg(s,c){c&&!s.j&&(Zt(s),s.i=null,s.g.forEach(function(u,f){var I=f.toLowerCase();f!=I&&(uu(this,f),du(this,I,u))},s)),s.j=c}function Zg(s,c){let u=new Pi;if(l.Image){let f=new Image;f.onload=R(en,u,"TestLoadImage: loaded",!0,c,f),f.onerror=R(en,u,"TestLoadImage: error",!1,c,f),f.onabort=R(en,u,"TestLoadImage: abort",!1,c,f),f.ontimeout=R(en,u,"TestLoadImage: timeout",!1,c,f),l.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=s}else c(!1)}function e_(s,c){let u=new Pi,f=new AbortController,I=setTimeout(()=>{f.abort(),en(u,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:f.signal}).then(S=>{clearTimeout(I),S.ok?en(u,"TestPingServer: ok",!0,c):en(u,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(I),en(u,"TestPingServer: error",!1,c)})}function en(s,c,u,f,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),f(u)}catch{}}function t_(){this.g=new Lg}function n_(s,c,u){let f=u||"";try{ou(s,function(I,S){let x=I;d(I)&&(x=to(I)),c.push(f+S+"="+encodeURIComponent(x))})}catch(I){throw c.push(f+"type="+encodeURIComponent("_badmap")),I}}function Oi(s){this.l=s.Ub||null,this.j=s.eb||!1}C(Oi,no),Oi.prototype.g=function(){return new Or(this.l,this.j)},Oi.prototype.i=function(s){return function(){return s}}({});function Or(s,c){Be.call(this),this.D=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Or,Be),n=Or.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=c,this.readyState=1,Fi(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(c.body=s),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fu(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function fu(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?Mi(this):Fi(this),this.readyState==3&&fu(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Mi(this))},n.Qa=function(s){this.g&&(this.response=s,Mi(this))},n.ga=function(){this.g&&Mi(this)};function Mi(s){s.readyState=4,s.l=null,s.j=null,s.v=null,Fi(s)}n.setRequestHeader=function(s,c){this.u.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var u=c.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=c.next();return s.join(`\r
`)};function Fi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function pu(s){let c="";return oe(s,function(u,f){c+=f,c+=":",c+=u,c+=`\r
`}),c}function fo(s,c,u){e:{for(f in u){var f=!1;break e}f=!0}f||(u=pu(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):ce(s,c,u))}function me(s){Be.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(me,Be);var i_=/^https?$/i,r_=["POST","PUT"];n=me.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,c,u,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():so.g(),this.v=this.o?jc(this.o):jc(so),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(S){mu(this,S);return}if(s=u||"",u=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var I in f)u.set(I,f[I]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())u.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(u.keys()).find(S=>S.toLowerCase()=="content-type"),I=l.FormData&&s instanceof l.FormData,!(0<=Array.prototype.indexOf.call(r_,c,void 0))||f||I||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of u)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yu(this),this.u=!0,this.g.send(s),this.u=!1}catch(S){mu(this,S)}};function mu(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.m=5,gu(s),Mr(s)}function gu(s){s.A||(s.A=!0,Qe(s,"complete"),Qe(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Qe(this,"complete"),Qe(this,"abort"),Mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_u(this):this.bb())},n.bb=function(){_u(this)};function _u(s){if(s.h&&typeof a<"u"&&(!s.v[1]||Ft(s)!=4||s.Z()!=2)){if(s.u&&Ft(s)==4)Uc(s.Ea,0,s);else if(Qe(s,"readystatechange"),Ft(s)==4){s.h=!1;try{let x=s.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var u;if(!(u=c)){var f;if(f=x===0){var I=String(s.D).match(au)[1]||null;!I&&l.self&&l.self.location&&(I=l.self.location.protocol.slice(0,-1)),f=!i_.test(I?I.toLowerCase():"")}u=f}if(u)Qe(s,"complete"),Qe(s,"success");else{s.m=6;try{var S=2<Ft(s)?s.g.statusText:""}catch{S=""}s.l=S+" ["+s.Z()+"]",gu(s)}}finally{Mr(s)}}}}function Mr(s,c){if(s.g){yu(s);let u=s.g,f=s.v[0]?()=>{}:null;s.g=null,s.v=null,c||Qe(s,"ready");try{u.onreadystatechange=f}catch{}}}function yu(s){s.I&&(l.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function Ft(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<Ft(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),Fg(c)}};function vu(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function s_(s){let c={};s=(s.g&&2<=Ft(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<s.length;f++){if(z(s[f]))continue;var u=E(s[f]);let I=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let S=c[I]||[];c[I]=S,S.push(u)}w(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(s,c,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||c}function wu(s){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,s),this.cb=Li("retryDelaySeedMs",1e4,s),this.Wa=Li("forwardChannelMaxRetries",2,s),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new tu(s&&s.concurrentRequestLimit),this.Da=new t_,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wu.prototype,n.la=8,n.G=1,n.connect=function(s,c,u,f){Ye(0),this.W=s,this.H=c||{},u&&f!==void 0&&(this.H.OSID=u,this.H.OAID=f),this.F=this.X,this.I=Pu(this,null,this.W),Lr(this)};function po(s){if(Eu(s),s.G==3){var c=s.U++,u=Mt(s.I);if(ce(u,"SID",s.K),ce(u,"RID",c),ce(u,"TYPE","terminate"),Vi(s,u),c=new Jt(s,s.j,c),c.L=2,c.v=Dr(Mt(u)),u=!1,l.navigator&&l.navigator.sendBeacon)try{u=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!u&&l.Image&&(new Image().src=c.v,u=!0),u||(c.g=Nu(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Nr(c)}Ru(s)}function Fr(s){s.g&&(go(s),s.g.cancel(),s.g=null)}function Eu(s){Fr(s),s.u&&(l.clearTimeout(s.u),s.u=null),Vr(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&l.clearTimeout(s.s),s.s=null)}function Lr(s){if(!nu(s.h)&&!s.s){s.s=!0;var c=s.Ga;L||ge(),V||(L(),V=!0),K.add(c,s),s.B=0}}function o_(s,c){return iu(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=c.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=Ri(T(s.Ga,s,c),Au(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let I=new Jt(this,this.j,s),S=this.o;if(this.S&&(S?(S=p(S),v(S,this.S)):S=this.S),this.m!==null||this.O||(I.H=S,S=null),this.P)e:{for(var c=0,u=0;u<this.i.length;u++){t:{var f=this.i[u];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=u;break e}if(c===4096||u===this.i.length-1){c=u+1;break e}}c=1e3}else c=1e3;c=Iu(this,I,c),u=Mt(this.I),ce(u,"RID",s),ce(u,"CVER",22),this.D&&ce(u,"X-HTTP-Session-Id",this.D),Vi(this,u),S&&(this.O?c="headers="+encodeURIComponent(String(pu(S)))+"&"+c:this.m&&fo(u,this.m,S)),ho(this.h,I),this.Ua&&ce(u,"TYPE","init"),this.P?(ce(u,"$req",c),ce(u,"SID","null"),I.T=!0,ao(I,u,null)):ao(I,u,c),this.G=2}}else this.G==3&&(s?Tu(this,s):this.i.length==0||nu(this.h)||Tu(this))};function Tu(s,c){var u;c?u=c.l:u=s.U++;let f=Mt(s.I);ce(f,"SID",s.K),ce(f,"RID",u),ce(f,"AID",s.T),Vi(s,f),s.m&&s.o&&fo(f,s.m,s.o),u=new Jt(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),c&&(s.i=c.D.concat(s.i)),c=Iu(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),ho(s.h,u),ao(u,f,c)}function Vi(s,c){s.H&&oe(s.H,function(u,f){ce(c,f,u)}),s.l&&ou({},function(u,f){ce(c,f,u)})}function Iu(s,c,u){u=Math.min(s.i.length,u);var f=s.l?T(s.l.Na,s.l,s):null;e:{var I=s.i;let S=-1;for(;;){let x=["count="+u];S==-1?0<u?(S=I[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let re=!0;for(let Oe=0;Oe<u;Oe++){let ee=I[Oe].g,qe=I[Oe].map;if(ee-=S,0>ee)S=Math.max(0,I[Oe].g-100),re=!1;else try{n_(qe,x,"req"+ee+"_")}catch{f&&f(qe)}}if(re){f=x.join("&");break e}}}return s=s.i.splice(0,u),c.D=s,f}function bu(s){if(!s.g&&!s.u){s.Y=1;var c=s.Fa;L||ge(),V||(L(),V=!0),K.add(c,s),s.v=0}}function mo(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=Ri(T(s.Fa,s),Au(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=Ri(T(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Fr(this),Su(this))};function go(s){s.A!=null&&(l.clearTimeout(s.A),s.A=null)}function Su(s){s.g=new Jt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var c=Mt(s.qa);ce(c,"RID","rpc"),ce(c,"SID",s.K),ce(c,"AID",s.T),ce(c,"CI",s.F?"0":"1"),!s.F&&s.ja&&ce(c,"TO",s.ja),ce(c,"TYPE","xmlhttp"),Vi(s,c),s.m&&s.o&&fo(c,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=Dr(Mt(c)),u.m=null,u.P=!0,Jc(u,s)}n.Za=function(){this.C!=null&&(this.C=null,Fr(this),mo(this),Ye(19))};function Vr(s){s.C!=null&&(l.clearTimeout(s.C),s.C=null)}function Cu(s,c){var u=null;if(s.g==c){Vr(s),go(s),s.g=null;var f=2}else if(uo(s.h,c))u=c.D,ru(s.h,c),f=1;else return;if(s.G!=0){if(c.o)if(f==1){u=c.m?c.m.length:0,c=Date.now()-c.F;var I=s.B;f=Ar(),Qe(f,new Hc(f,u)),Lr(s)}else bu(s);else if(I=c.s,I==3||I==0&&0<c.X||!(f==1&&o_(s,c)||f==2&&mo(s)))switch(u&&0<u.length&&(c=s.h,c.i=c.i.concat(u)),I){case 1:En(s,5);break;case 4:En(s,10);break;case 3:En(s,6);break;default:En(s,2)}}}function Au(s,c){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*c}function En(s,c){if(s.j.info("Error code "+c),c==2){var u=T(s.fb,s),f=s.Xa;let I=!f;f=new wn(f||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kr(f,"https"),Dr(f),I?Zg(f.toString(),u):e_(f.toString(),u)}else Ye(2);s.G=0,s.l&&s.l.sa(c),Ru(s),Eu(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function Ru(s){if(s.G=0,s.ka=[],s.l){let c=su(s.h);(c.length!=0||s.i.length!=0)&&(k(s.ka,c),k(s.ka,s.i),s.h.i.length=0,N(s.i),s.i.length=0),s.l.ra()}}function Pu(s,c,u){var f=u instanceof wn?Mt(u):new wn(u);if(f.g!="")c&&(f.g=c+"."+f.g),xr(f,f.s);else{var I=l.location;f=I.protocol,c=c?c+"."+I.hostname:I.hostname,I=+I.port;var S=new wn(null);f&&kr(S,f),c&&(S.g=c),I&&xr(S,I),u&&(S.l=u),f=S}return u=s.D,c=s.ya,u&&c&&ce(f,u,c),ce(f,"VER",s.la),Vi(s,f),f}function Nu(s,c,u){if(c&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Ca&&!s.pa?new me(new Oi({eb:u})):new me(s.pa),c.Ha(s.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}n=ku.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ur(){}Ur.prototype.g=function(s,c){return new rt(s,c)};function rt(s,c){Be.call(this),this.g=new wu(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(s?s["X-WebChannel-Client-Profile"]=c.va:s={"X-WebChannel-Client-Profile":c.va}),this.g.S=s,(s=c&&c.Sb)&&!z(s)&&(this.g.m=s),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!z(c)&&(this.g.D=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new $n(this)}C(rt,Be),rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rt.prototype.close=function(){po(this.g)},rt.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=to(s),s=u);c.i.push(new jg(c.Ya++,s)),c.G==3&&Lr(c)},rt.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,rt.aa.N.call(this)};function xu(s){io.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let u in c){s=u;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}C(xu,io);function Du(){ro.call(this),this.status=1}C(Du,ro);function $n(s){this.g=s}C($n,ku),$n.prototype.ua=function(){Qe(this.g,"a")},$n.prototype.ta=function(s){Qe(this.g,new xu(s))},$n.prototype.sa=function(s){Qe(this.g,new Du)},$n.prototype.ra=function(){Qe(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,rt.prototype.send=rt.prototype.o,rt.prototype.open=rt.prototype.m,rt.prototype.close=rt.prototype.close,rf=jt.createWebChannelTransport=function(){return new Ur},nf=jt.getStatEventTarget=function(){return Ar()},tf=jt.Event=yn,ef=jt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rr.NO_ERROR=0,Rr.TIMEOUT=8,Rr.HTTP_ERROR=6,Zd=jt.ErrorCode=Rr,Qc.COMPLETE="complete",Jd=jt.EventType=Qc,zc.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Xd=jt.WebChannel=zc,ow=jt.FetchXmlHttpFactory=Oi,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,Yd=jt.XhrIo=me}).apply(typeof gs<"u"?gs:typeof self<"u"?self:typeof window<"u"?window:{});var sf="@firebase/firestore",of="4.7.10";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var Zi="11.5.0";var ai=new Ct("@firebase/firestore");function vt(n,...e){if(ai.logLevel<=cn.DEBUG){let t=e.map(Ma);ai.debug(`Firestore (${Zi}): ${n}`,...t)}}function pf(n,...e){if(ai.logLevel<=cn.ERROR){let t=e.map(Ma);ai.error(`Firestore (${Zi}): ${n}`,...t)}}function aw(n,...e){if(ai.logLevel<=cn.WARN){let t=e.map(Ma);ai.warn(`Firestore (${Zi}): ${n}`,...t)}}function Ma(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function tt(n="Unexpected state"){let e=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+n;throw pf(e),new Error(e)}function Nn(n,e){n||tt()}var Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ve=class extends bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var _s=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ea=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Le.UNAUTHENTICATED))}shutdown(){}},Ta=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ia=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Nn(this.o===void 0);let i=this.i,r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve(),o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let h=o;e.enqueueRetryable(()=>M(this,null,function*(){yield h.promise,yield r(this.currentUser)}))},l=h=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?l(h):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nn(typeof i.accessToken=="string"),new _s(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Nn(e===null||typeof e=="string"),new Le(e)}},ba=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Sa=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new ba(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ys=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ca=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,qt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Nn(this.o===void 0);let i=o=>{o.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,vt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ys(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nn(typeof t.token=="string"),this.R=t.token,new ys(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lw(){return new TextEncoder}function pn(n,e){return n<e?-1:n>e?1:0}function cw(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return pn(i,r);{let o=lw(),a=uw(o.encode(af(n,t)),o.encode(af(e,t)));return a!==0?a:pn(i,r)}}t+=i>65535?2:1}return pn(n.length,e.length)}function af(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function uw(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return pn(n[t],e[t]);return pn(n.length,e.length)}var Aa=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&tt(),i===void 0?i=e.length-t:i>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return pn(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):cw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}},fn=class n extends Aa{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ve(Je.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}};var xn=class n{constructor(e){this.path=e}static fromPath(e){return new n(fn.fromString(e))}static fromName(e){return new n(fn.fromString(e).popFirst(5))}static empty(){return new n(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new fn(e.slice()))}};var Ra=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Ra.UNKNOWN_ID=-1;function hw(n){return n.name==="IndexedDbTransactionError"}function dw(n){return n===0&&1/n==-1/0}var fw="remoteDocuments",mf="owner";var gf="mutationQueues";var _f="mutations";var yf="documentMutations",pw="remoteDocumentsV14";var vf="remoteDocumentGlobal";var wf="targets";var Ef="targetDocuments";var Tf="targetGlobal",If="collectionParents";var bf="clientMetadata";var Sf="bundles";var Cf="namedQueries";var mw="indexConfiguration";var gw="indexState";var _w="indexEntries";var Af="documentOverlays";var yw="globals";var vw=[gf,_f,yf,fw,wf,mf,Tf,Ef,bf,vf,If,Sf,Cf],YS=[...vw,Af],ww=[gf,_f,yf,pw,wf,mf,Tf,Ef,bf,vf,If,Sf,Cf,Af],Ew=ww,Tw=[...Ew,mw,gw,_w];var XS=[...Tw,yw];var li=class n{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oi(this.root,e,this.comparator,!1)}getReverseIterator(){return new oi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oi(this.root,e,this.comparator,!0)}},oi=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},kt=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();let e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}};kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(e,t,i,r,o){return this}insert(e,t,i){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vs=class n{constructor(e){this.comparator=e,this.data=new li(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ws(this.data.getIterator())}getIteratorFrom(e){return new ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ws=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ci=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pa("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ci.EMPTY_BYTE_STRING=new ci("");var Iw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bw(n){if(Nn(!!n),typeof n=="string"){let e=0,t=Iw.exec(n);if(Nn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ji(n.seconds),nanos:Ji(n.nanos)}}function Ji(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sw(n){return typeof n=="string"?ci.fromBase64String(n):ci.fromUint8Array(n)}var Na="(default)",ka=class n{constructor(e,t){this.projectId=e,this.database=t||Na}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Na}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Rf="__type__",Cw="__max__";var Pf="__vector__",Nf="value";function Aw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rf])===null||t===void 0?void 0:t.stringValue)===Pf}function Rw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Cw}var ZS={mapValue:{fields:{[Rf]:{stringValue:Pf},[Nf]:{arrayValue:{}}}}};var eC=new li(xn.comparator);var tC=new li(xn.comparator);var nC=new li(xn.comparator),iC=new vs(xn.comparator);var rC=new vs(pn);var lf,Y;(Y=lf||(lf={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";var sC=new ms([4294967295,4294967295],0);var Es=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Ji(e.integerValue));else if("doubleValue"in e){let i=Ji(e.doubleValue);isNaN(i)?this.ft(t,13):(this.ft(t,15),dw(i)?t.gt(0):t.gt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.ft(t,20),typeof i=="string"&&(i=bw(i)),t.yt(`${i.seconds||""}`),t.gt(i.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Sw(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.ft(t,45),t.gt(i.latitude||0),t.gt(i.longitude||0)}else"mapValue"in e?Rw(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Aw(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):tt()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let i=e.fields||{};this.ft(t,55);for(let r of Object.keys(i))this.wt(r,t),this.Rt(i[r],t)}vt(e,t){var i,r;let o=e.fields||{};this.ft(t,53);let a=Nf,l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.ft(t,15),t.gt(Ji(l)),this.wt(a,t),this.Rt(o[a],t)}Ft(e,t){let i=e.values||[];this.ft(t,50);for(let r of i)this.Rt(r,t)}Dt(e,t){this.ft(t,37),xn.fromName(e).path.forEach(i=>{this.ft(t,60),this.Mt(i,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};Es.xt=new Es;var oC=new Uint8Array(0);var kf=41943040,Nt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(kf,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);var Pw=1048576;function wa(){return typeof document<"u"?document:null}var xa=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-i);r>0&&vt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var Da=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var cf,uf;(uf=cf||(cf={}))._a="default",uf.Cache="cache";function Nw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hf=new Map;function kw(n,e,t,i){if(e===!0&&i===!0)throw new Ve(Je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tt()}function Dw(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xw(n);throw new Ve(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var xf="firestore.googleapis.com",df=!0,Ts=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xf,this.ssl=df}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:df;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pw)throw new Ve(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Is=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ts({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ts(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ea;switch(i.type){case"firstParty":return new Sa(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=hf.get(t);i&&(vt("ComponentProvider","Removing Datastore"),hf.delete(t),i.terminate())}(this),Promise.resolve()}};function Df(n,e,t,i={}){var r;let o=(n=Dw(n,Is))._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o.host!==xf&&o.host!==l&&aw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},o),{host:l,ssl:!1,emulatorOptions:i});if(!ln(h,a)&&(n._setSettings(h),i.mockUserToken)){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=Le.MOCK_USER;else{d=Xn(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ve(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Le(g)}n._authCredentials=new Ta(new _s(d,m))}}var ff="AsyncQueue",bs=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new xa(this,"async_queue_retry"),this.Su=()=>{let i=wa();i&&vt(ff,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;let t=wa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=wa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new kn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return M(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!hw(e))throw e;vt(ff,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;let r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw pf("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let r=Da.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&tt()}verifyOperationInProgress(){}Mu(){return M(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};var Oa=class extends Is{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new bs,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bs(e),this._firestoreClient=void 0,yield e}})}};function Of(n,e){let t=typeof n=="object"?n:Ge(),i=typeof n=="string"?n:e||Na,r=Fe(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=on("firestore");o&&Df(r,...o)}return r}var aC=new RegExp("[~\\*/\\[\\]]");(function(e,t=!0){(function(r){Zi=r})(un),Ae(new Ce("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new Oa(new Ia(i.getProvider("auth-internal")),new Ca(a,i.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),q(sf,of,e),q(sf,of,"esm2017")})();var er=class{constructor(e){return e}},Mf="firestore",Fa=class{constructor(){return Pe(Mf)}};var La=new Te("angularfire2.firestore-instances");function Ow(n,e){let t=Re(Mf,n,e);return t&&new er(t)}function Mw(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new er(i)}}var Fw={provide:Fa,deps:[[new W,La]]},Lw={provide:er,useFactory:Ow,deps:[[new W,La],ke]};function Ff(n,...e){return q("angularfire",Ee.full,"fst"),Ie([Lw,Fw,{provide:La,useFactory:Mw(n),multi:!0,deps:[he,_e,Ne,xe,[new W,hn],[new W,At],...e]}])}var Lf=ve(Of,!0);var Vf="@firebase/database",Uf="1.0.14";var Ml="";function Vw(n){Ml=n}var Ga=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Se(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Gr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ka=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return St(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var _p=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ga(e)}}catch{}return new Ka},On=_p("localStorage"),Wa=_p("sessionStorage");var fi=new Ct("@firebase/database"),Uw=function(){let n=1;return function(){return n++}}(),yp=function(n){let e=Th(n),t=new wh;t.update(e);let i=t.digest();return fh.encodeByteArray(i)},fr=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=fr.apply(null,i):typeof i=="object"?e+=Se(i):e+=i,e+=" "}return e},Mn=null,Bf=!0,Bw=function(n,e){O(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(fi.logLevel=cn.VERBOSE,Mn=fi.log.bind(fi),e&&Wa.set("logging_enabled",!0)):typeof n=="function"?Mn=n:(Mn=null,Wa.remove("logging_enabled"))},Ke=function(...n){if(Bf===!0&&(Bf=!1,Mn===null&&Wa.get("logging_enabled")===!0&&Bw(!0)),Mn){let e=fr.apply(null,n);Mn(e)}},pr=function(n){return function(...e){Ke(n,...e)}},Ha=function(...n){let e="FIREBASE INTERNAL ERROR: "+fr(...n);fi.error(e)},Gt=function(...n){let e=`FIREBASE FATAL ERROR: ${fr(...n)}`;throw fi.error(e),new Error(e)},ct=function(...n){let e="FIREBASE WARNING: "+fr(...n);fi.warn(e)},qw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ct("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vp=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$w=function(n){if(It()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},mi="[MIN_NAME]",Fn="[MAX_NAME]",Ti=function(n,e){if(n===e)return 0;if(n===mi||e===Fn)return-1;if(e===mi||n===Fn)return 1;{let t=qf(n),i=qf(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},jw=function(n,e){return n===e?0:n<e?-1:1},tr=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Se(e))},Fl=function(n){if(typeof n!="object"||n===null)return Se(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Se(e[i]),t+=":",t+=Fl(n[e[i]]);return t+="}",t},wp=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function gt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Ep=function(n){O(!vp(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,o,a,l,h;n===0?(o=0,a=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=l+i,a=Math.round(n*Math.pow(2,t-l)-Math.pow(2,t))):(o=0,a=Math.round(n/Math.pow(2,1-i-t))));let d=[];for(h=t;h;h-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(h=e;h;h-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();let m=d.join(""),g="";for(h=0;h<64;h+=8){let T=parseInt(m.substr(h,8),2).toString(16);T.length===1&&(T="0"+T),g=g+T}return g.toLowerCase()},zw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Gw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var Kw=new RegExp("^-?(0*)\\d{1,10}$"),Ww=-2147483648,Hw=2147483647,qf=function(n){if(Kw.test(n)){let e=Number(n);if(e>=Ww&&e<=Hw)return e}return null},mr=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw ct("Exception was thrown by user callback.",t),e},Math.floor(0))}},Qw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},or=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Qa=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,qt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ct(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ya=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ct(e)}},ar=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Cs="5",Tp="v",Ip="s",bp="r",Sp="f",Cp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ap="ls",Rp="p",Xa="ac",Pp="websocket",Np="long_polling";var As=class{constructor(e,t,i,r,o=!1,a="",l=!1,h=!1,d=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=h,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=On.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&On.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Yw(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function kp(n,e,t){O(typeof e=="string","typeof type must == string"),O(typeof t=="object","typeof params must == object");let i;if(e===Pp)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Np)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Yw(n)&&(t.ns=n.namespace);let r=[];return gt(t,(o,a)=>{r.push(o+"="+a)}),i+r.join("&")}var Ja=class{constructor(){this.counters_={}}incrementCounter(e,t=1){St(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return mh(this.counters_)}};var Va={},Ua={};function Ll(n){let e=n.toString();return Va[e]||(Va[e]=new Ja),Va[e]}function Xw(n,e){let t=n.toString();return Ua[t]||(Ua[t]=e()),Ua[t]}var Za=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&mr(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var $f="start",Jw="close",Zw="pLPCommand",eE="pRTLPCB",xp="id",Dp="pw",Op="ser",tE="cb",nE="seg",iE="ts",rE="d",sE="dframe",Mp=1870,Fp=30,oE=Mp-Fp,aE=25e3,lE=3e4,el=class n{constructor(e,t,i,r,o,a,l){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pr(e),this.stats_=Ll(t),this.urlFn=h=>(this.appCheckToken&&(h[Xa]=this.appCheckToken),kp(t,Np,h))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Za(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lE)),$w(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tl((...o)=>{let[a,l,h,d,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===$f)this.id=l,this.password=h;else if(a===Jw)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{let[a,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);let i={};i[$f]="t",i[Op]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[tE]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Tp]=Cs,this.transportSessionId&&(i[Ip]=this.transportSessionId),this.lastSessionId&&(i[Ap]=this.lastSessionId),this.applicationId&&(i[Rp]=this.applicationId),this.appCheckToken&&(i[Xa]=this.appCheckToken),typeof location<"u"&&location.hostname&&Cp.test(location.hostname)&&(i[bp]=Sp);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return It()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zw()&&!Gw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Se(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=ph(t),r=wp(i,oE);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(It())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[sE]="t",i[xp]=e,i[Dp]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Se(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},tl=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,It())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Uw(),window[Zw+this.uniqueCallbackIdentifier]=e,window[eE+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Ke("frame writing exception"),l.stack&&Ke(l.stack),Ke(l)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ke("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[xp]=this.myID,e[Dp]=this.myPW,e[Op]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fp+i.length<=Mp;){let a=this.pendingSegs.shift();i=i+"&"+nE+r+"="+a.seg+"&"+iE+r+"="+a.ts+"&"+rE+r+"="+a.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(aE)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,t){It()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Ke("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var cE=16384,uE=45e3,Rs=null;typeof MozWebSocket<"u"?Rs=MozWebSocket:typeof WebSocket<"u"&&(Rs=WebSocket);var nr=(()=>{class n{constructor(t,i,r,o,a,l,h){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pr(this.connId),this.stats_=Ll(i),this.connURL=n.connectionURL_(i,l,h,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,a){let l={};return l[Tp]=Cs,!It()&&typeof location<"u"&&location.hostname&&Cp.test(location.hostname)&&(l[bp]=Sp),i&&(l[Ip]=i),r&&(l[Ap]=r),o&&(l[Xa]=o),a&&(l[Rp]=a),kp(t,Pp,l)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,On.set("previous_websocket_failure",!0);try{let r;if(It()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Cs}/${Ml}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let a=process.env,l=this.connURL.indexOf("wss://")===0?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;l&&(r.proxy={origin:l})}this.mySock=new Rs(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Rs!==null&&!n.forceDisallow_}static previouslyFailed(){return On.isInMemoryStorage||On.get("previous_websocket_failure")===!0}markConnectionHealthy(){On.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Gr(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=Se(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=wp(i,cE);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uE))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),hE=(()=>{class n{static get ALL_TRANSPORTS(){return[el,nr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let i=nr&&nr.isAvailable(),r=i&&!nr.previouslyFailed();if(t.webSocketOnly&&(i||ct("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nr];else{let o=this.transports_=[];for(let a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),dE=6e4,fE=5e3,pE=10*1024,mE=100*1024,Ba="t",jf="d",gE="s",zf="r",_E="e",Gf="o",Kf="a",Wf="n",Hf="p",yE="h",nl=class{constructor(e,t,i,r,o,a,l,h,d,m){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pr("c:"+this.id+":"),this.transportManager_=new hE(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=or(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ba in e){let t=e[Ba];t===Kf?this.upgradeIfSecondaryHealthy_():t===zf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Gf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=tr("t",e),i=tr("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Kf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=tr("t",e),i=tr("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=tr(Ba,e);if(jf in e){let i=e[jf];if(t===yE){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Wf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===gE?this.onConnectionShutdown_(i):t===zf?this.onReset_(i):t===_E?Ha("Server Error: "+i):t===Gf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ha("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Cs!==i&&ct("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),or(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):or(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hf,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(On.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ps=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Ns=class{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){O(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var ks=class n extends Ns{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Qf=32,Yf=768,se=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ie(){return new se("")}function X(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gn(n){return n.pieces_.length-n.pieceNum_}function ue(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new se(n.pieces_,e)}function Lp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function vE(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Vp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Up(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new se(e,0)}function De(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof se)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new se(t,0)}function Q(n){return n.pieceNum_>=n.pieces_.length}function pt(n,e){let t=X(n),i=X(e);if(t===null)return e;if(t===i)return pt(ue(n),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Bp(n,e){if(gn(n)!==gn(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Et(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(gn(n)>gn(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var il=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Vp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ji(this.parts_[i]);qp(this)}};function wE(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=ji(e),qp(n)}function EE(n){let e=n.parts_.pop();n.byteLength_-=ji(e),n.parts_.length>0&&(n.byteLength_-=1)}function qp(n){if(n.byteLength_>Yf)throw new Error(n.errorPrefix_+"has a key path longer than "+Yf+" bytes ("+n.byteLength_+").");if(n.parts_.length>Qf)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qf+") or object contains a cycle "+Dn(n))}function Dn(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var rl=class n extends Ns{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}};var ir=1e3,TE=60*5*1e3,Xf=30*1e3,IE=1.3,bE=3e4,SE="server_kill",Jf=3,Vl=(()=>{class n extends Ps{constructor(t,i,r,o,a,l,h,d){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=pr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ir,this.maxReconnectDelay_=TE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!It())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rl.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ks.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(Se(a)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();let i=new Io,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{let h=l.d;l.s==="ok"?i.resolve(h):i.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(t,i,r,o){this.initConnection_();let a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");let h={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(l).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let a={p:r},l="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(l,a,h=>{let d=h.d,m=h.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(m,d))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&St(t,"w")){let r=Tn(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();ct(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||yh(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Xf)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=_h(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let a=o.s,l=o.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);let a={p:t},l="n";o&&(a.q=r,a.t=o),this.sendRequest(l,a)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){let a={p:i,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{o&&setTimeout(()=>{o(l.s,l.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,a){this.initConnection_();let l={p:i,d:r};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:o}),this.outstandingPutCount_++;let h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Se(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Ha("Unrecognized action received from server: "+Se(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bE&&(this.reconnectDelay_=ir),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*IE)}this.onConnectStatus_(!1)}establishConnection_(){return M(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,a=this.lastSessionId,l=!1,h=null,d=function(){h?h.close():(l=!0,r())},m=function(T){O(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(T)};this.realtime_={close:d,sendRequest:m};let g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[T,R]=yield Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?Ke("getToken() completed but was canceled"):(Ke("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=R&&R.token,h=new nl(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,C=>{ct(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(SE)},a))}catch(T){this.log_("Failed to get token: "+T),l||(this.repoInfo_.nodeAdmin&&ct(T),d())}}})}interrupt(t){Ke("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ke("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Co(this.interruptReasons_)&&(this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(a=>Fl(a)).join("$"):r="default";let o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){let r=new se(t).toString(),o;if(this.listens.has(r)){let a=this.listens.get(r);o=a.get(i),a.delete(i),a.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Ke("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Jf&&(this.reconnectDelay_=Xf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Ke("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Jf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";It()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+Ml.replace(/\./g,"-")]=1,bo()?t["framework.cordova"]=1:gh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=ks.getInstance().currentlyOnline();return Co(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),J=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var gi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new J(mi,e),r=new J(mi,t);return this.compare(i,r)!==0}minPost(){return J.MIN}};var Ss,xs=class extends gi{static get __EMPTY_NODE(){return Ss}static set __EMPTY_NODE(e){Ss=e}compare(e,t){return Ti(e.name,t.name)}isDefinedOn(e){throw Yn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return J.MIN}maxPost(){return new J(Fn,Ss)}makePost(e,t){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new J(e,Ss)}toString(){return".key"}},pi=new xs;var hi=class{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?i(e.key,t):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},wt=(()=>{class n{constructor(t,i,r,o,a){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??mt.EMPTY_NODE,this.right=a??mt.EMPTY_NODE}copy(t,i,r,o,a){return new n(t??this.key,i??this.value,r??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this,a=r(t,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(t,i,r),null):a===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return mt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return mt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),sl=class{copy(e,t,i,r,o){return this}insert(e,t,i){return new wt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},mt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new hi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new hi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new hi(this.root_,null,this.comparator_,!0,e)}};mt.EMPTY_NODE=new sl;function CE(n,e){return Ti(n.name,e.name)}function Ul(n,e){return Ti(n,e)}var ol;function AE(n){ol=n}var $p=function(n){return typeof n=="number"?"number:"+Ep(n):"string:"+n},jp=function(n){if(n.isLeafNode()){let e=n.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&St(e,".sv"),"Priority must be a string or number.")}else O(n===ol||n.isEmpty(),"priority of unexpected type.");O(n===ol||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Zf,_i=(()=>{class n{static set __childrenNodeConstructor(t){Zf=t}static get __childrenNodeConstructor(){return Zf}constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),jp(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Q(t)?this:X(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=X(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(O(r!==".priority"||gn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$p(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=Ep(this.value_):t+=this.value_,this.lazyHash_=yp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(r);return O(o>=0,"Unknown leaf type: "+i),O(a>=0,"Unknown leaf type: "+r),o===a?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),zp,Gp;function RE(n){zp=n}function PE(n){Gp=n}var al=class extends gi{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return o===0?Ti(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return J.MIN}maxPost(){return new J(Fn,new _i("[PRIORITY-POST]",Gp))}makePost(e,t){let i=zp(e);return new J(t,new _i("[PRIORITY-POST]",i))}toString(){return".priority"}},He=new al;var NE=Math.log(2),ll=class{constructor(e){let t=o=>parseInt(Math.log(o)/NE,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ds=function(n,e,t,i){n.sort(e);let r=function(h,d){let m=d-h,g,T;if(m===0)return null;if(m===1)return g=n[h],T=t?t(g):g,new wt(T,g.node,wt.BLACK,null,null);{let R=parseInt(m/2,10)+h,C=r(h,R),N=r(R+1,d);return g=n[R],T=t?t(g):g,new wt(T,g.node,wt.BLACK,C,N)}},o=function(h){let d=null,m=null,g=n.length,T=function(C,N){let k=g-C,B=g;g-=C;let z=r(k+1,B),G=n[k],j=t?t(G):G;R(new wt(j,G.node,N,null,z))},R=function(C){d?(d.left=C,d=C):(m=C,d=C)};for(let C=0;C<h.count;++C){let N=h.nextBitIsOne(),k=Math.pow(2,h.count-(C+1));N?T(k,wt.BLACK):(T(k,wt.BLACK),T(k,wt.RED))}return m},a=new ll(n.length),l=o(a);return new mt(i||e,l)};var qa,ui={},yi=class n{static get Default(){return O(ui&&He,"ChildrenNode.ts has not been loaded"),qa=qa||new n({".priority":ui},{".priority":He}),qa}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Tn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mt?t:null}hasIndex(e){return St(this.indexSet_,e.toString())}addIndex(e,t){O(e!==pi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=t.getIterator(J.Wrap),a=o.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=o.getNext();let l;r?l=Ds(i,e.getCompare()):l=ui;let h=e.toString(),d=Object.assign({},this.indexSet_);d[h]=e;let m=Object.assign({},this.indexes_);return m[h]=l,new n(m,d)}addToIndexes(e,t){let i=$i(this.indexes_,(r,o)=>{let a=Tn(this.indexSet_,o);if(O(a,"Missing index implementation for "+o),r===ui)if(a.isDefinedOn(e.node)){let l=[],h=t.getIterator(J.Wrap),d=h.getNext();for(;d;)d.name!==e.name&&l.push(d),d=h.getNext();return l.push(e),Ds(l,a.getCompare())}else return ui;else{let l=t.get(e.name),h=r;return l&&(h=h.remove(new J(e.name,l))),h.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=$i(this.indexes_,r=>{if(r===ui)return r;{let o=t.get(e.name);return o?r.remove(new J(e.name,o)):r}});return new n(i,this.indexSet_)}};var rr,de=(()=>{class n{static get EMPTY_NODE(){return rr||(rr=new n(new mt(Ul),null,yi.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&jp(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rr}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?rr:i}}getChild(t){let i=X(t);return i===null?this:this.getImmediateChild(i).getChild(ue(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(O(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new J(t,i),o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(r,this.children_));let l=o.isEmpty()?rr:this.priorityNode_;return new n(o,l,a)}}updateChild(t,i){let r=X(t);if(r===null)return i;{O(X(t)!==".priority"||gn(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(ue(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,o=0,a=!0;if(this.forEachChild(He,(l,h)=>{i[l]=h.val(t),r++,a&&n.INTEGER_REGEXP_.test(l)?o=Math.max(o,Number(l)):a=!1}),!t&&a&&o<2*r){let l=[];for(let h in i)l[h]=i[h];return l}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+$p(this.getPriority().val())+":"),this.forEachChild(He,(i,r)=>{let o=r.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":yp(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let o=this.resolveIndex_(r);if(o){let a=o.getPredecessorKey(new J(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new J(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new J(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,J.Wrap),a=o.peek();for(;a!=null&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,J.Wrap),a=o.peek();for(;a!=null&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gr?-1:0}withIndex(t){if(t===pi||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===pi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(He),o=i.getIterator(He),a=r.getNext(),l=o.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=r.getNext(),l=o.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(t){return t===pi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),cl=class extends de{constructor(){super(new mt(Ul),de.EMPTY_NODE,yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}},gr=new cl;Object.defineProperties(J,{MIN:{value:new J(mi,de.EMPTY_NODE)},MAX:{value:new J(Fn,gr)}});xs.__EMPTY_NODE=de.EMPTY_NODE;_i.__childrenNodeConstructor=de;AE(gr);PE(gr);var kE=!0;function We(n,e=null){if(n===null)return de.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new _i(t,We(e))}if(!(n instanceof Array)&&kE){let t=[],i=!1;if(gt(n,(a,l)=>{if(a.substring(0,1)!=="."){let h=We(l);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),t.push(new J(a,h)))}}),t.length===0)return de.EMPTY_NODE;let o=Ds(t,CE,a=>a.name,Ul);if(i){let a=Ds(t,He.getCompare());return new de(o,We(e),new yi({".priority":a},{".priority":He}))}else return new de(o,We(e),yi.Default)}else{let t=de.EMPTY_NODE;return gt(n,(i,r)=>{if(St(n,i)&&i.substring(0,1)!=="."){let o=We(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(We(e))}}RE(We);var ul=class extends gi{constructor(e){super(),this.indexPath_=e,O(!Q(e)&&X(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return o===0?Ti(e.name,t.name):o}makePost(e,t){let i=We(e),r=de.EMPTY_NODE.updateChild(this.indexPath_,i);return new J(t,r)}maxPost(){let e=de.EMPTY_NODE.updateChild(this.indexPath_,gr);return new J(Fn,e)}toString(){return Vp(this.indexPath_,0).join("/")}};var hl=class extends gi{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Ti(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return J.MIN}maxPost(){return J.MAX}makePost(e,t){let i=We(e);return new J(t,i)}toString(){return".value"}},xE=new hl;function DE(n){return{type:"value",snapshotNode:n}}function OE(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ME(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ep(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function FE(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var dl=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mi}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===He}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function tp(n){let e={};if(n.isDefault())return e;let t;if(n.index_===He?t="$priority":n.index_===xE?t="$value":n.index_===pi?t="$key":(O(n.index_ instanceof ul,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Se(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=Se(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Se(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Se(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Se(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function np(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==He&&(e.i=n.index_.toString()),e}var fl=class n extends Ps{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=pr("p:rest:"),this.listens_={}}listen(e,t,i,r){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let a=n.getListenId_(e,i),l={};this.listens_[a]=l;let h=tp(e._queryParams);this.restRequest_(o+".json",h,(d,m)=>{let g=m;if(d===404&&(g=null,d=null),d===null&&this.onDataUpdate_(o,g,!1,i),Tn(this.listens_,a)===l){let T;d?d===401?T="permission_denied":T="rest_error:"+d:T="ok",r(T,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=tp(e._queryParams),i=e._path.toString(),r=new Io;return this.restRequest_(i+".json",t,(o,a)=>{let l=a;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);let a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+vh(t);this.log_("Sending REST request for "+a);let l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let h=null;if(l.status>=200&&l.status<300){try{h=Gr(l.responseText)}catch{ct("Failed to parse JSON response for "+a+": "+l.responseText)}i(null,h)}else l.status!==401&&l.status!==404&&ct("Got unsuccessful REST response for "+a+" Status: "+l.status),i(l.status);i=null}},l.open("GET",a,!0),l.send()})}};var pl=class{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Os(){return{value:null,children:new Map}}function Kp(n,e,t){if(Q(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=X(e);n.children.has(i)||n.children.set(i,Os());let r=n.children.get(i);e=ue(e),Kp(r,e,t)}}function ml(n,e,t){n.value!==null?t(e,n.value):LE(n,(i,r)=>{let o=new se(e.toString()+"/"+i);ml(r,o,t)})}function LE(n,e){n.children.forEach((t,i)=>{e(i,t)})}var gl=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gt(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var ip=10*1e3,VE=30*1e3,UE=5*60*1e3,_l=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new gl(e);let i=ip+(VE-ip)*Math.random();or(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;gt(e,(r,o)=>{o>0&&St(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),or(this.reportStats_.bind(this),Math.floor(Math.random()*2*UE))}};var zt=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(zt||{});function Wp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qp(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var yl=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=zt.ACK_USER_WRITE,this.source=Wp()}operationForChild(e){if(Q(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new se(e));return new n(ie(),t,this.revert)}}else return O(X(this.path)===e,"operationForChild called for unrelated child."),new n(ue(this.path),this.affectedTree,this.revert)}};var vi=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=zt.OVERWRITE}operationForChild(e){return Q(this.path)?new n(this.source,ie(),this.snap.getImmediateChild(e)):new n(this.source,ue(this.path),this.snap)}};var Ms=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=zt.MERGE}operationForChild(e){if(Q(this.path)){let t=this.children.subtree(new se(e));return t.isEmpty()?null:t.value?new vi(this.source,ie(),t.value):new n(this.source,ie(),t)}else return O(X(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ur=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Q(e))return this.isFullyInitialized()&&!this.filtered_;let t=X(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function BE(n,e,t,i){let r=[],o=[];return e.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(FE(a.childName,a.snapshotNode))}),sr(n,r,"child_removed",e,i,t),sr(n,r,"child_added",e,i,t),sr(n,r,"child_moved",o,i,t),sr(n,r,"child_changed",e,i,t),sr(n,r,"value",e,i,t),r}function sr(n,e,t,i,r,o){let a=i.filter(l=>l.type===t);a.sort((l,h)=>$E(n,l,h)),a.forEach(l=>{let h=qE(n,l,o);r.forEach(d=>{d.respondsTo(l.type)&&e.push(d.createEvent(h,n.query_))})})}function qE(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function $E(n,e,t){if(e.childName==null||t.childName==null)throw Yn("Should only compare child_ events.");let i=new J(e.childName,e.snapshotNode),r=new J(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function Yp(n,e){return{eventCache:n,serverCache:e}}function lr(n,e,t,i){return Yp(new ur(e,t,i),n.serverCache)}function Xp(n,e,t,i){return Yp(n.eventCache,new ur(e,t,i))}function vl(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ln(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var $a,jE=()=>($a||($a=new mt(jw)),$a),nt=class n{static fromObject(e){let t=new n(null);return gt(e,(i,r)=>{t=t.set(new se(i),r)}),t}constructor(e,t=jE()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ie(),value:this.value};if(Q(e))return null;{let i=X(e),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(ue(e),t);return o!=null?{path:De(new se(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Q(e))return this;{let t=X(e),i=this.children.get(t);return i!==null?i.subtree(ue(e)):new n(null)}}set(e,t){if(Q(e))return new n(t,this.children);{let i=X(e),o=(this.children.get(i)||new n(null)).set(ue(e),t),a=this.children.insert(i,o);return new n(this.value,a)}}remove(e){if(Q(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=X(e),i=this.children.get(t);if(i){let r=i.remove(ue(e)),o;return r.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,r),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Q(e))return this.value;{let t=X(e),i=this.children.get(t);return i?i.get(ue(e)):null}}setTree(e,t){if(Q(e))return t;{let i=X(e),o=(this.children.get(i)||new n(null)).setTree(ue(e),t),a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),new n(this.value,a)}}fold(e){return this.fold_(ie(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(De(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ie(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(Q(e))return null;{let o=X(e),a=this.children.get(o);return a?a.findOnPath_(ue(e),De(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ie(),t)}foreachOnPath_(e,t,i){if(Q(e))return this;{this.value&&i(t,this.value);let r=X(e),o=this.children.get(r);return o?o.foreachOnPath_(ue(e),De(t,r),i):new n(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(De(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var Tt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new nt(null))}};function cr(n,e,t){if(Q(e))return new Tt(new nt(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,o=i.value,a=pt(r,e);return o=o.updateChild(a,t),new Tt(n.writeTree_.set(r,o))}else{let r=new nt(t),o=n.writeTree_.setTree(e,r);return new Tt(o)}}}function rp(n,e,t){let i=n;return gt(t,(r,o)=>{i=cr(i,De(e,r),o)}),i}function sp(n,e){if(Q(e))return Tt.empty();{let t=n.writeTree_.setTree(e,new nt(null));return new Tt(t)}}function wl(n,e){return Vn(n,e)!=null}function Vn(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(pt(t.path,e)):null}function op(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(He,(i,r)=>{e.push(new J(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new J(i,r.value))}),e}function mn(n,e){if(Q(e))return n;{let t=Vn(n,e);return t!=null?new Tt(new nt(t)):new Tt(n.writeTree_.subtree(e))}}function El(n){return n.writeTree_.isEmpty()}function wi(n,e){return Jp(ie(),n.writeTree_,e)}function Jp(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(O(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=Jp(De(n,r),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(De(n,".priority"),i)),t}}function Zp(n,e){return rm(e,n)}function zE(n,e,t,i,r){O(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=cr(n.visibleWrites,e,t)),n.lastWriteId=i}function GE(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function KE(n,e){let t=n.allWrites.findIndex(l=>l.writeId===e);O(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,a=n.allWrites.length-1;for(;r&&a>=0;){let l=n.allWrites[a];l.visible&&(a>=t&&WE(l,i.path)?r=!1:Et(i.path,l.path)&&(o=!0)),a--}if(r){if(o)return HE(n),!0;if(i.snap)n.visibleWrites=sp(n.visibleWrites,i.path);else{let l=i.children;gt(l,h=>{n.visibleWrites=sp(n.visibleWrites,De(i.path,h))})}return!0}else return!1}function WE(n,e){if(n.snap)return Et(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Et(De(n.path,t),e))return!0;return!1}function HE(n){n.visibleWrites=em(n.allWrites,QE,ie()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function QE(n){return n.visible}function em(n,e,t){let i=Tt.empty();for(let r=0;r<n.length;++r){let o=n[r];if(e(o)){let a=o.path,l;if(o.snap)Et(t,a)?(l=pt(t,a),i=cr(i,l,o.snap)):Et(a,t)&&(l=pt(a,t),i=cr(i,ie(),o.snap.getChild(l)));else if(o.children){if(Et(t,a))l=pt(t,a),i=rp(i,l,o.children);else if(Et(a,t))if(l=pt(a,t),Q(l))i=rp(i,ie(),o.children);else{let h=Tn(o.children,X(l));if(h){let d=h.getChild(ue(l));i=cr(i,ie(),d)}}}else throw Yn("WriteRecord should have .snap or .children")}}return i}function tm(n,e,t,i,r){if(!i&&!r){let o=Vn(n.visibleWrites,e);if(o!=null)return o;{let a=mn(n.visibleWrites,e);if(El(a))return t;if(t==null&&!wl(a,ie()))return null;{let l=t||de.EMPTY_NODE;return wi(a,l)}}}else{let o=mn(n.visibleWrites,e);if(!r&&El(o))return t;if(!r&&t==null&&!wl(o,ie()))return null;{let a=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Et(d.path,e)||Et(e,d.path))},l=em(n.allWrites,a,e),h=t||de.EMPTY_NODE;return wi(l,h)}}}function YE(n,e,t){let i=de.EMPTY_NODE,r=Vn(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(He,(o,a)=>{i=i.updateImmediateChild(o,a)}),i;if(t){let o=mn(n.visibleWrites,e);return t.forEachChild(He,(a,l)=>{let h=wi(mn(o,new se(a)),l);i=i.updateImmediateChild(a,h)}),op(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{let o=mn(n.visibleWrites,e);return op(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function XE(n,e,t,i,r){O(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=De(e,t);if(wl(n.visibleWrites,o))return null;{let a=mn(n.visibleWrites,o);return El(a)?r.getChild(t):wi(a,r.getChild(t))}}function JE(n,e,t,i){let r=De(e,t),o=Vn(n.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(t)){let a=mn(n.visibleWrites,r);return wi(a,i.getNode().getImmediateChild(t))}else return null}function ZE(n,e){return Vn(n.visibleWrites,e)}function eT(n,e,t,i,r,o,a){let l,h=mn(n.visibleWrites,e),d=Vn(h,ie());if(d!=null)l=d;else if(t!=null)l=wi(h,t);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){let m=[],g=a.getCompare(),T=o?l.getReverseIteratorFrom(i,a):l.getIteratorFrom(i,a),R=T.getNext();for(;R&&m.length<r;)g(R,i)!==0&&m.push(R),R=T.getNext();return m}else return[]}function tT(){return{visibleWrites:Tt.empty(),allWrites:[],lastWriteId:-1}}function Tl(n,e,t,i){return tm(n.writeTree,n.treePath,e,t,i)}function nm(n,e){return YE(n.writeTree,n.treePath,e)}function ap(n,e,t,i){return XE(n.writeTree,n.treePath,e,t,i)}function Fs(n,e){return ZE(n.writeTree,De(n.treePath,e))}function nT(n,e,t,i,r,o){return eT(n.writeTree,n.treePath,e,t,i,r,o)}function Bl(n,e,t){return JE(n.writeTree,n.treePath,e,t)}function im(n,e){return rm(De(n.treePath,e),n.writeTree)}function rm(n,e){return{treePath:n,writeTree:e}}var Il=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;O(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),O(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,ep(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,ME(i,r.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,OE(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,ep(i,e.snapshotNode,r.oldSnap));else throw Yn("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var bl=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},sm=new bl,hr=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new ur(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bl(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ln(this.viewCache_),o=nT(this.writes_,r,t,1,i,e);return o.length===0?null:o[0]}};function iT(n,e){O(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function rT(n,e,t,i,r){let o=new Il,a,l;if(t.type===zt.OVERWRITE){let d=t;d.source.fromUser?a=Sl(n,e,d.path,d.snap,i,r,o):(O(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered()&&!Q(d.path),a=Ls(n,e,d.path,d.snap,i,r,l,o))}else if(t.type===zt.MERGE){let d=t;d.source.fromUser?a=oT(n,e,d.path,d.children,i,r,o):(O(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered(),a=Cl(n,e,d.path,d.children,i,r,l,o))}else if(t.type===zt.ACK_USER_WRITE){let d=t;d.revert?a=cT(n,e,d.path,i,r,o):a=aT(n,e,d.path,d.affectedTree,i,r,o)}else if(t.type===zt.LISTEN_COMPLETE)a=lT(n,e,t.path,i,o);else throw Yn("Unknown operation type: "+t.type);let h=o.getChanges();return sT(e,a,h),{viewCache:a,changes:h}}function sT(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=vl(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(DE(vl(e)))}}function om(n,e,t,i,r,o){let a=e.eventCache;if(Fs(i,t)!=null)return e;{let l,h;if(Q(t))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let d=Ln(e),m=d instanceof de?d:de.EMPTY_NODE,g=nm(i,m);l=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{let d=Tl(i,Ln(e));l=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let d=X(t);if(d===".priority"){O(gn(t)===1,"Can't have a priority with additional path components");let m=a.getNode();h=e.serverCache.getNode();let g=ap(i,t,m,h);g!=null?l=n.filter.updatePriority(m,g):l=a.getNode()}else{let m=ue(t),g;if(a.isCompleteForChild(d)){h=e.serverCache.getNode();let T=ap(i,t,a.getNode(),h);T!=null?g=a.getNode().getImmediateChild(d).updateChild(m,T):g=a.getNode().getImmediateChild(d)}else g=Bl(i,d,e.serverCache);g!=null?l=n.filter.updateChild(a.getNode(),d,g,m,r,o):l=a.getNode()}}return lr(e,l,a.isFullyInitialized()||Q(t),n.filter.filtersNodes())}}function Ls(n,e,t,i,r,o,a,l){let h=e.serverCache,d,m=a?n.filter:n.filter.getIndexedFilter();if(Q(t))d=m.updateFullNode(h.getNode(),i,null);else if(m.filtersNodes()&&!h.isFiltered()){let R=h.getNode().updateChild(t,i);d=m.updateFullNode(h.getNode(),R,null)}else{let R=X(t);if(!h.isCompleteForPath(t)&&gn(t)>1)return e;let C=ue(t),k=h.getNode().getImmediateChild(R).updateChild(C,i);R===".priority"?d=m.updatePriority(h.getNode(),k):d=m.updateChild(h.getNode(),R,k,C,sm,null)}let g=Xp(e,d,h.isFullyInitialized()||Q(t),m.filtersNodes()),T=new hr(r,g,o);return om(n,g,t,r,T,l)}function Sl(n,e,t,i,r,o,a){let l=e.eventCache,h,d,m=new hr(r,e,o);if(Q(t))d=n.filter.updateFullNode(e.eventCache.getNode(),i,a),h=lr(e,d,!0,n.filter.filtersNodes());else{let g=X(t);if(g===".priority")d=n.filter.updatePriority(e.eventCache.getNode(),i),h=lr(e,d,l.isFullyInitialized(),l.isFiltered());else{let T=ue(t),R=l.getNode().getImmediateChild(g),C;if(Q(T))C=i;else{let N=m.getCompleteChild(g);N!=null?Lp(T)===".priority"&&N.getChild(Up(T)).isEmpty()?C=N:C=N.updateChild(T,i):C=de.EMPTY_NODE}if(R.equals(C))h=e;else{let N=n.filter.updateChild(l.getNode(),g,C,T,m,a);h=lr(e,N,l.isFullyInitialized(),n.filter.filtersNodes())}}}return h}function lp(n,e){return n.eventCache.isCompleteForChild(e)}function oT(n,e,t,i,r,o,a){let l=e;return i.foreach((h,d)=>{let m=De(t,h);lp(e,X(m))&&(l=Sl(n,l,m,d,r,o,a))}),i.foreach((h,d)=>{let m=De(t,h);lp(e,X(m))||(l=Sl(n,l,m,d,r,o,a))}),l}function cp(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Cl(n,e,t,i,r,o,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,d;Q(t)?d=i:d=new nt(null).setTree(t,i);let m=e.serverCache.getNode();return d.children.inorderTraversal((g,T)=>{if(m.hasChild(g)){let R=e.serverCache.getNode().getImmediateChild(g),C=cp(n,R,T);h=Ls(n,h,new se(g),C,r,o,a,l)}}),d.children.inorderTraversal((g,T)=>{let R=!e.serverCache.isCompleteForChild(g)&&T.value===null;if(!m.hasChild(g)&&!R){let C=e.serverCache.getNode().getImmediateChild(g),N=cp(n,C,T);h=Ls(n,h,new se(g),N,r,o,a,l)}}),h}function aT(n,e,t,i,r,o,a){if(Fs(r,t)!=null)return e;let l=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(Q(t)&&h.isFullyInitialized()||h.isCompleteForPath(t))return Ls(n,e,t,h.getNode().getChild(t),r,o,l,a);if(Q(t)){let d=new nt(null);return h.getNode().forEachChild(pi,(m,g)=>{d=d.set(new se(m),g)}),Cl(n,e,t,d,r,o,l,a)}else return e}else{let d=new nt(null);return i.foreach((m,g)=>{let T=De(t,m);h.isCompleteForPath(T)&&(d=d.set(m,h.getNode().getChild(T)))}),Cl(n,e,t,d,r,o,l,a)}}function lT(n,e,t,i,r){let o=e.serverCache,a=Xp(e,o.getNode(),o.isFullyInitialized()||Q(t),o.isFiltered());return om(n,a,t,i,sm,r)}function cT(n,e,t,i,r,o){let a;if(Fs(i,t)!=null)return e;{let l=new hr(i,e,r),h=e.eventCache.getNode(),d;if(Q(t)||X(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Tl(i,Ln(e));else{let g=e.serverCache.getNode();O(g instanceof de,"serverChildren would be complete if leaf node"),m=nm(i,g)}m=m,d=n.filter.updateFullNode(h,m,o)}else{let m=X(t),g=Bl(i,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=h.getImmediateChild(m)),g!=null?d=n.filter.updateChild(h,m,g,ue(t),l,o):e.eventCache.getNode().hasChild(m)?d=n.filter.updateChild(h,m,de.EMPTY_NODE,ue(t),l,o):d=h,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Tl(i,Ln(e)),a.isLeafNode()&&(d=n.filter.updateFullNode(d,a,o)))}return a=e.serverCache.isFullyInitialized()||Fs(i,ie())!=null,lr(e,d,a,n.filter.filtersNodes())}}function uT(n,e){let t=Ln(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Q(e)&&!t.getImmediateChild(X(e)).isEmpty())?t.getChild(e):null}function up(n,e,t,i){e.type===zt.MERGE&&e.source.queryId!==null&&(O(Ln(n.viewCache_),"We should always have a full cache before handling merges"),O(vl(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,o=rT(n.processor_,r,e,t,i);return iT(n.processor_,o.viewCache),O(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,hT(n,o.changes,o.viewCache.eventCache.getNode(),null)}function hT(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return BE(n.eventGenerator_,e,t,r)}var hp;function dT(n){O(!hp,"__referenceConstructor has already been defined"),hp=n}function ql(n,e,t,i){let r=e.source.queryId;if(r!==null){let o=n.views.get(r);return O(o!=null,"SyncTree gave us an op for an invalid query."),up(o,e,t,i)}else{let o=[];for(let a of n.views.values())o=o.concat(up(a,e,t,i));return o}}function $l(n,e){let t=null;for(let i of n.views.values())t=t||uT(i,e);return t}var dp;function fT(n){O(!dp,"__referenceConstructor has already been defined"),dp=n}var Vs=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nt(null),this.pendingWriteTree_=tT(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function pT(n,e,t,i,r){return zE(n.pendingWriteTree_,e,t,i,r),r?Bs(n,new vi(Wp(),e,t)):[]}function di(n,e,t=!1){let i=GE(n.pendingWriteTree_,e);if(KE(n.pendingWriteTree_,e)){let o=new nt(null);return i.snap!=null?o=o.set(ie(),!0):gt(i.children,a=>{o=o.set(new se(a),!0)}),Bs(n,new yl(i.path,o,t))}else return[]}function Us(n,e,t){return Bs(n,new vi(Hp(),e,t))}function mT(n,e,t){let i=nt.fromObject(t);return Bs(n,new Ms(Hp(),e,i))}function gT(n,e,t,i){let r=um(n,i);if(r!=null){let o=hm(r),a=o.path,l=o.queryId,h=pt(a,e),d=new vi(Qp(l),h,t);return dm(n,a,d)}else return[]}function _T(n,e,t,i){let r=um(n,i);if(r){let o=hm(r),a=o.path,l=o.queryId,h=pt(a,e),d=nt.fromObject(t),m=new Ms(Qp(l),h,d);return dm(n,a,m)}else return[]}function am(n,e,t){let r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(a,l)=>{let h=pt(a,e),d=$l(l,h);if(d)return d});return tm(r,e,o,t,!0)}function Bs(n,e){return lm(e,n.syncPointTree_,null,Zp(n.pendingWriteTree_,ie()))}function lm(n,e,t,i){if(Q(n.path))return cm(n,e,t,i);{let r=e.get(ie());t==null&&r!=null&&(t=$l(r,ie()));let o=[],a=X(n.path),l=n.operationForChild(a),h=e.children.get(a);if(h&&l){let d=t?t.getImmediateChild(a):null,m=im(i,a);o=o.concat(lm(l,h,d,m))}return r&&(o=o.concat(ql(r,n,i,t))),o}}function cm(n,e,t,i){let r=e.get(ie());t==null&&r!=null&&(t=$l(r,ie()));let o=[];return e.children.inorderTraversal((a,l)=>{let h=t?t.getImmediateChild(a):null,d=im(i,a),m=n.operationForChild(a);m&&(o=o.concat(cm(m,l,h,d)))}),r&&(o=o.concat(ql(r,n,i,t))),o}function um(n,e){return n.tagToQueryMap.get(e)}function hm(n){let e=n.indexOf("$");return O(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new se(n.substr(0,e))}}function dm(n,e,t){let i=n.syncPointTree_.get(e);O(i,"Missing sync point for query tag that we're tracking");let r=Zp(n.pendingWriteTree_,e);return ql(i,t,r,null)}var Al=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Rl=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=De(this.path_,e);return new n(this.syncTree_,t)}node(){return am(this.syncTree_,this.path_)}},yT=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},fp=function(n,e,t){if(!n||typeof n!="object")return n;if(O(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return vT(n[".sv"],e,t);if(typeof n[".sv"]=="object")return wT(n[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},vT=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:O(!1,"Unexpected server value: "+n)}},wT=function(n,e,t){n.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&O(!1,"Unexpected increment value: "+i);let r=e.node();if(O(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let a=r.getValue();return typeof a!="number"?i:a+i},ET=function(n,e,t,i){return jl(e,new Rl(t,n),i)},TT=function(n,e,t){return jl(n,new Al(e),t)};function jl(n,e,t){let i=n.getPriority().val(),r=fp(i,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let a=n,l=fp(a.getValue(),e,t);return l!==a.getValue()||r!==a.getPriority().val()?new _i(l,We(r)):n}else{let a=n;return o=a,r!==a.getPriority().val()&&(o=o.updatePriority(new _i(r))),a.forEachChild(He,(l,h)=>{let d=jl(h,e.getImmediateChild(l),t);d!==h&&(o=o.updateImmediateChild(l,d))}),o}}var dr=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function zl(n,e){let t=e instanceof se?e:new se(e),i=n,r=X(t);for(;r!==null;){let o=Tn(i.node.children,r)||{children:{},childCount:0};i=new dr(r,i,o),t=ue(t),r=X(t)}return i}function Ii(n){return n.node.value}function fm(n,e){n.node.value=e,Pl(n)}function pm(n){return n.node.childCount>0}function IT(n){return Ii(n)===void 0&&!pm(n)}function qs(n,e){gt(n.node.children,(t,i)=>{e(new dr(t,n,i))})}function mm(n,e,t,i){t&&!i&&e(n),qs(n,r=>{mm(r,e,!0,i)}),t&&i&&e(n)}function bT(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _r(n){return new se(n.parent===null?n.name:_r(n.parent)+"/"+n.name)}function Pl(n){n.parent!==null&&ST(n.parent,n.name,n)}function ST(n,e,t){let i=IT(t),r=St(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Pl(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Pl(n))}var CT=/[\[\].#$\/\u0000-\u001F\u007F]/,AT=/[\[\].#$\u0000-\u001F\u007F]/,ja=10*1024*1024,gm=function(n){return typeof n=="string"&&n.length!==0&&!CT.test(n)},RT=function(n){return typeof n=="string"&&n.length!==0&&!AT.test(n)},PT=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RT(n)};var _m=function(n,e,t){let i=t instanceof se?new il(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Dn(i));if(typeof e=="function")throw new Error(n+"contains a function "+Dn(i)+" with contents = "+e.toString());if(vp(e))throw new Error(n+"contains "+e.toString()+" "+Dn(i));if(typeof e=="string"&&e.length>ja/3&&ji(e)>ja)throw new Error(n+"contains a string greater than "+ja+" utf8 bytes "+Dn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(gt(e,(a,l)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!gm(a)))throw new Error(n+" contains an invalid key ("+a+") "+Dn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wE(i,a),_m(n,l,i),EE(i)}),r&&o)throw new Error(n+' contains ".value" child '+Dn(i)+" in addition to actual children.")}};var NT=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!PT(t))throw new Error(Eh(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Nl=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function kT(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],o=r.getPath();t!==null&&!Bp(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function Un(n,e,t){kT(n,t),xT(n,i=>Et(i,e)||Et(e,i))}function xT(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let o=r.path;e(o)?(DT(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function DT(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();Mn&&Ke("event: "+t.toString()),mr(i)}}}var OT="repo_interrupt",MT=25,kl=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Os(),this.transactionQueueTree_=new dr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function FT(n,e,t){if(n.stats_=Ll(n.repoInfo_),n.forceRestClient_||Qw())n.server_=new fl(n.repoInfo_,(i,r,o,a)=>{pp(n,i,r,o,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mp(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Se(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Vl(n.repoInfo_,e,(i,r,o,a)=>{pp(n,i,r,o,a)},i=>{mp(n,i)},i=>{VT(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Xw(n.repoInfo_,()=>new _l(n.stats_,n.server_)),n.infoData_=new pl,n.infoSyncTree_=new Vs({startListening:(i,r,o,a)=>{let l=[],h=n.infoData_.getNode(i._path);return h.isEmpty()||(l=Us(n.infoSyncTree_,i._path,h),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),Gl(n,"connected",!1),n.serverSyncTree_=new Vs({startListening:(i,r,o,a)=>(n.server_.listen(i,o,r,(l,h)=>{let d=a(l,h);Un(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function LT(n){let t=n.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ym(n){return yT({timestamp:LT(n)})}function pp(n,e,t,i,r){n.dataUpdateCount++;let o=new se(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(r)if(i){let h=$i(t,d=>We(d));a=_T(n.serverSyncTree_,o,h,r)}else{let h=We(t);a=gT(n.serverSyncTree_,o,h,r)}else if(i){let h=$i(t,d=>We(d));a=mT(n.serverSyncTree_,o,h)}else{let h=We(t);a=Us(n.serverSyncTree_,o,h)}let l=o;a.length>0&&(l=Wl(n,o)),Un(n.eventQueue_,l,a)}function mp(n,e){Gl(n,"connected",e),e===!1&&BT(n)}function VT(n,e){gt(e,(t,i)=>{Gl(n,t,i)})}function Gl(n,e,t){let i=new se("/.info/"+e),r=We(t);n.infoData_.updateSnapshot(i,r);let o=Us(n.infoSyncTree_,i,r);Un(n.eventQueue_,i,o)}function UT(n){return n.nextWriteId_++}function BT(n){vm(n,"onDisconnectEvents");let e=ym(n),t=Os();ml(n.onDisconnect_,ie(),(r,o)=>{let a=ET(r,o,n.serverSyncTree_,e);Kp(t,r,a)});let i=[];ml(t,ie(),(r,o)=>{i=i.concat(Us(n.serverSyncTree_,r,o));let a=zT(n,r);Wl(n,a)}),n.onDisconnect_=Os(),Un(n.eventQueue_,ie(),i)}function qT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OT)}function vm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ke(t,...e)}function wm(n,e,t){return am(n.serverSyncTree_,e,t)||de.EMPTY_NODE}function Kl(n,e=n.transactionQueueTree_){if(e||$s(n,e),Ii(e)){let t=Tm(n,e);O(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&$T(n,_r(e),t)}else pm(e)&&qs(e,t=>{Kl(n,t)})}function $T(n,e,t){let i=t.map(d=>d.currentWriteId),r=wm(n,e,i),o=r,a=r.hash();for(let d=0;d<t.length;d++){let m=t[d];O(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;let g=pt(e,m.path);o=o.updateChild(g,m.currentOutputSnapshotRaw)}let l=o.val(!0),h=e;n.server_.put(h.toString(),l,d=>{vm(n,"transaction put response",{path:h.toString(),status:d});let m=[];if(d==="ok"){let g=[];for(let T=0;T<t.length;T++)t[T].status=2,m=m.concat(di(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&g.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();$s(n,zl(n.transactionQueueTree_,e)),Kl(n,n.transactionQueueTree_),Un(n.eventQueue_,e,m);for(let T=0;T<g.length;T++)mr(g[T])}else{if(d==="datastale")for(let g=0;g<t.length;g++)t[g].status===3?t[g].status=4:t[g].status=0;else{ct("transaction at "+h.toString()+" failed: "+d);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=d}Wl(n,e)}},a)}function Wl(n,e){let t=Em(n,e),i=_r(t),r=Tm(n,t);return jT(n,r,i),i}function jT(n,e,t){if(e.length===0)return;let i=[],r=[],a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){let h=e[l],d=pt(t,h.path),m=!1,g;if(O(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)m=!0,g=h.abortReason,r=r.concat(di(n.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=MT)m=!0,g="maxretry",r=r.concat(di(n.serverSyncTree_,h.currentWriteId,!0));else{let T=wm(n,h.path,a);h.currentInputSnapshot=T;let R=e[l].update(T.val());if(R!==void 0){_m("transaction failed: Data returned ",R,h.path);let C=We(R);typeof R=="object"&&R!=null&&St(R,".priority")||(C=C.updatePriority(T.getPriority()));let k=h.currentWriteId,B=ym(n),z=TT(C,T,B);h.currentOutputSnapshotRaw=C,h.currentOutputSnapshotResolved=z,h.currentWriteId=UT(n),a.splice(a.indexOf(k),1),r=r.concat(pT(n.serverSyncTree_,h.path,z,h.currentWriteId,h.applyLocally)),r=r.concat(di(n.serverSyncTree_,k,!0))}else m=!0,g="nodata",r=r.concat(di(n.serverSyncTree_,h.currentWriteId,!0))}Un(n.eventQueue_,t,r),r=[],m&&(e[l].status=2,function(T){setTimeout(T,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(g==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(g),!1,null))))}$s(n,n.transactionQueueTree_);for(let l=0;l<i.length;l++)mr(i[l]);Kl(n,n.transactionQueueTree_)}function Em(n,e){let t,i=n.transactionQueueTree_;for(t=X(e);t!==null&&Ii(i)===void 0;)i=zl(i,t),e=ue(e),t=X(e);return i}function Tm(n,e){let t=[];return Im(n,e,t),t.sort((i,r)=>i.order-r.order),t}function Im(n,e,t){let i=Ii(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);qs(e,r=>{Im(n,r,t)})}function $s(n,e){let t=Ii(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,fm(e,t.length>0?t:void 0)}qs(e,i=>{$s(n,i)})}function zT(n,e){let t=_r(Em(n,e)),i=zl(n.transactionQueueTree_,e);return bT(i,r=>{za(n,r)}),za(n,i),mm(i,r=>{za(n,r)}),t}function za(n,e){let t=Ii(e);if(t){let i=[],r=[],o=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(O(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=3,t[a].abortReason="set"):(O(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(di(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?fm(e,void 0):t.length=o+1,Un(n.eventQueue_,_r(e),r);for(let a=0;a<i.length;a++)mr(i[a])}}function GT(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function KT(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ct(`Invalid query segment '${t}' in query '${n}'`)}return e}var gp=function(n,e){let t=WT(n),i=t.namespace;t.domain==="firebase.com"&&Gt(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||qw();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new As(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new se(t.pathString)}},WT=function(n){let e="",t="",i="",r="",o="",a=!0,l="https",h=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(l=n.substring(0,d-1),n=n.substring(d+2));let m=n.indexOf("/");m===-1&&(m=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),e=n.substring(0,Math.min(m,g)),m<g&&(r=GT(n.substring(m,g)));let T=KT(n.substring(Math.min(n.length,g)));d=e.indexOf(":"),d>=0?(a=l==="https"||l==="wss",h=parseInt(e.substring(d+1),10)):d=e.length;let R=e.slice(0,d);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{let C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),t=e.substring(C+1),o=i}"ns"in T&&(o=T.ns)}return{host:e,port:h,domain:t,subdomain:i,secure:a,scheme:l,pathString:r,namespace:o}};var xl=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Q(this._path)?null:Lp(this._path)}get ref(){return new Ei(this._repo,this._path)}get _queryIdentifier(){let e=np(this._queryParams),t=Fl(e);return t==="{}"?"default":t}get _queryObject(){return np(this._queryParams)}isEqual(e){if(e=we(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=Bp(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+vE(this._path)}};var Ei=class n extends xl{constructor(e,t){super(e,t,new dl,!1)}get parent(){let e=Up(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};dT(Ei);fT(Ei);var HT="FIREBASE_DATABASE_EMULATOR_HOST",Dl={},QT=!1;function YT(n,e,t,i){n.repoInfo_=new As(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function XT(n,e,t,i,r){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ke("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=gp(o,r),l=a.repoInfo,h,d;typeof process<"u"&&process.env&&(d=process.env[HT]),d?(h=!0,o=`http://${d}?ns=${l.namespace}`,a=gp(o,r),l=a.repoInfo):h=!a.repoInfo.secure;let m=r&&h?new ar(ar.OWNER):new Ya(n.name,n.options,e);NT("Invalid Firebase Database URL",a),Q(a.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let g=ZT(l,n,m,new Qa(n,t));return new Ol(g,n)}function JT(n,e){let t=Dl[e];(!t||t[n.key]!==n)&&Gt(`Database ${e}(${n.repoInfo_}) has already been deleted.`),qT(n),delete t[n.key]}function ZT(n,e,t,i){let r=Dl[e.name];r||(r={},Dl[e.name]=r);let o=r[n.toURLString()];return o&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new kl(n,QT,t,i),r[n.toURLString()]=o,o}var Ol=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(FT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ei(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gt("Cannot call "+e+" on a deleted database.")}};function bm(n=Ge(),e){let t=Fe(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=on("database");i&&Sm(t,...i)}return t}function Sm(n,e,t,i={}){n=we(n),n._checkNotDeleted("useEmulator");let r=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&ln(i,o.repoInfo_.emulatorOptions))return;Gt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new ar(ar.OWNER);else if(i.mockUserToken){let l=typeof i.mockUserToken=="string"?i.mockUserToken:Xn(i.mockUserToken,n.app.options.projectId);a=new ar(l)}YT(o,r,i,a)}function e0(n){Vw(un),Ae(new Ce("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return XT(i,r,o,t)},"PUBLIC").setMultipleInstances(!0)),q(Vf,Uf,n),q(Vf,Uf,"esm2017")}Vl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Vl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};e0();var yr=class{constructor(e){return e}},Cm="database",Hl=class{constructor(){return Pe(Cm)}};var Ql=new Te("angularfire2.database-instances");function t0(n,e){let t=Re(Cm,n,e);return t&&new yr(t)}function n0(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new yr(i)}}var i0={provide:Hl,deps:[[new W,Ql]]},r0={provide:yr,useFactory:t0,deps:[[new W,Ql],ke]};function Am(n,...e){return q("angularfire",Ee.full,"rtdb"),Ie([r0,i0,{provide:Ql,useFactory:n0(n),multi:!0,deps:[he,_e,Ne,xe,[new W,hn],[new W,At],...e]}])}var Rm=ve(bm,!0);var km="functions";var Yl=class{constructor(e,t,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,qt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return M(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return M(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return M(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return M(this,null,function*(){let t=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:r}})}};var Xl="us-central1";var Jl=class{constructor(e,t,i,r,o=Xl,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Yl(e,t,i,r),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{let l=new URL(o);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Xl}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function s0(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var Pm="@firebase/functions",Nm="0.12.3";var o0="auth-internal",a0="app-check-internal",l0="messaging-internal";function c0(n){let e=(t,{instanceIdentifier:i})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider(o0),a=t.getProvider(l0),l=t.getProvider(a0);return new Jl(r,o,a,l,i)};Ae(new Ce(km,e,"PUBLIC").setMultipleInstances(!0)),q(Pm,Nm,n),q(Pm,Nm,"esm2017")}function xm(n=Ge(),e=Xl){let i=Fe(we(n),km).getImmediate({identifier:e}),r=on("functions");return r&&Dm(i,...r),i}function Dm(n,e,t){s0(we(n),e,t)}c0();var vr=class{constructor(e){return e}},Om="functions",Zl=class{constructor(){return Pe(Om)}};var ec=new Te("angularfire2.functions-instances");function u0(n,e){let t=Re(Om,n,e);return t&&new vr(t)}function h0(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new vr(i)}}var d0={provide:Zl,deps:[[new W,ec]]},f0={provide:vr,useFactory:u0,deps:[[new W,ec],ke]};function Mm(n,...e){return q("angularfire",Ee.full,"fn"),Ie([f0,d0,{provide:ec,useFactory:h0(n),multi:!0,deps:[he,_e,Ne,xe,[new W,hn],[new W,At],...e]}])}var Fm=ve(xm,!0);var p0="/firebase-messaging-sw.js",m0="/firebase-cloud-messaging-push-scope",jm="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",g0="https://fcmregistrations.googleapis.com/v1",zm="google.c.a.c_id",_0="google.c.a.c_l",y0="google.c.a.ts",v0="google.c.a.e",Lm=1e4;var js=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(js||{});function Kt(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function w0(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}var tc="fcm_token_details_db",E0=5,Vm="fcm_token_object_Store";function T0(n){return M(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(tc))return null;let e=null;return(yield Ao(tc,E0,{upgrade:(i,r,o,a)=>M(this,null,function*(){var l;if(r<2||!i.objectStoreNames.contains(Vm))return;let h=a.objectStore(Vm),d=yield h.index("fcmSenderId").get(n);if(yield h.clear(),!!d){if(r===2){let m=d;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(l=m.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:Kt(m.vapidKey)}}}else if(r===3){let m=d;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Kt(m.auth),p256dh:Kt(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Kt(m.vapidKey)}}}else if(r===4){let m=d;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Kt(m.auth),p256dh:Kt(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Kt(m.vapidKey)}}}}})})).close(),yield Kr(tc),yield Kr("fcm_vapid_details_db"),yield Kr("undefined"),I0(e)?e:null})}function I0(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var b0="firebase-messaging-database",S0=1,wr="firebase-messaging-store",nc=null;function Gm(){return nc||(nc=Ao(b0,S0,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(wr)}}})),nc}function C0(n){return M(this,null,function*(){let e=Km(n),i=yield(yield Gm()).transaction(wr).objectStore(wr).get(e);if(i)return i;{let r=yield T0(n.appConfig.senderId);if(r)return yield sc(n,r),r}})}function sc(n,e){return M(this,null,function*(){let t=Km(n),r=(yield Gm()).transaction(wr,"readwrite");return yield r.objectStore(wr).put(e,t),yield r.done,e})}function Km({appConfig:n}){return n.appId}var A0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ze=new Zn("messaging","Messaging",A0);function R0(n,e){return M(this,null,function*(){let t=yield ac(n),i=Wm(e),r={method:"POST",headers:t,body:JSON.stringify(i)},o;try{o=yield(yield fetch(oc(n.appConfig),r)).json()}catch(a){throw Ze.create("token-subscribe-failed",{errorInfo:a?.toString()})}if(o.error){let a=o.error.message;throw Ze.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw Ze.create("token-subscribe-no-token");return o.token})}function P0(n,e){return M(this,null,function*(){let t=yield ac(n),i=Wm(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)},o;try{o=yield(yield fetch(`${oc(n.appConfig)}/${e.token}`,r)).json()}catch(a){throw Ze.create("token-update-failed",{errorInfo:a?.toString()})}if(o.error){let a=o.error.message;throw Ze.create("token-update-failed",{errorInfo:a})}if(!o.token)throw Ze.create("token-update-no-token");return o.token})}function N0(n,e){return M(this,null,function*(){let i={method:"DELETE",headers:yield ac(n)};try{let o=yield(yield fetch(`${oc(n.appConfig)}/${e}`,i)).json();if(o.error){let a=o.error.message;throw Ze.create("token-unsubscribe-failed",{errorInfo:a})}}catch(r){throw Ze.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function oc({projectId:n}){return`${g0}/projects/${n}/registrations`}function ac(t){return M(this,arguments,function*({appConfig:n,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Wm({p256dh:n,auth:e,endpoint:t,vapidKey:i}){let r={web:{endpoint:t,auth:e,p256dh:n}};return i!==jm&&(r.web.applicationPubKey=i),r}var k0=7*24*60*60*1e3;function x0(n){return M(this,null,function*(){let e=yield O0(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Kt(e.getKey("auth")),p256dh:Kt(e.getKey("p256dh"))},i=yield C0(n.firebaseDependencies);if(i){if(M0(i.subscriptionOptions,t))return Date.now()>=i.createTime+k0?D0(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield N0(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Um(n.firebaseDependencies,t)}else return Um(n.firebaseDependencies,t)})}function D0(n,e){return M(this,null,function*(){try{let t=yield P0(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield sc(n.firebaseDependencies,i),t}catch(t){throw t}})}function Um(n,e){return M(this,null,function*(){let i={token:yield R0(n,e),createTime:Date.now(),subscriptionOptions:e};return yield sc(n,i),i.token})}function O0(n,e){return M(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:w0(e)})})}function M0(n,e){let t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,r=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&i&&r&&o}function Bm(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return F0(e,n),L0(e,n),V0(e,n),e}function F0(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let i=e.notification.body;i&&(n.notification.body=i);let r=e.notification.image;r&&(n.notification.image=r);let o=e.notification.icon;o&&(n.notification.icon=o)}function L0(n,e){e.data&&(n.data=e.data)}function V0(n,e){var t,i,r,o,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let l=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=e.notification)===null||o===void 0?void 0:o.click_action;l&&(n.fcmOptions.link=l);let h=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;h&&(n.fcmOptions.analyticsLabel=h)}function U0(n){return typeof n=="object"&&!!n&&zm in n}B0("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function B0(n,e){let t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function q0(n){if(!n||!n.options)throw ic("App Configuration Object");if(!n.name)throw ic("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let i of e)if(!t[i])throw ic(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ic(n){return Ze.create("missing-app-config-values",{valueName:n})}var rc=class{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=q0(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}};function $0(n){return M(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(p0,{scope:m0}),n.swRegistration.update().catch(()=>{}),yield j0(n.swRegistration)}catch(e){throw Ze.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function j0(n){return M(this,null,function*(){return new Promise((e,t)=>{let i=setTimeout(()=>t(new Error(`Service worker not registered after ${Lm} ms`)),Lm),r=n.installing||n.waiting;n.active?(clearTimeout(i),e()):r?r.onstatechange=o=>{var a;((a=o.target)===null||a===void 0?void 0:a.state)==="activated"&&(r.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})})}function z0(n,e){return M(this,null,function*(){if(!e&&!n.swRegistration&&(yield $0(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ze.create("invalid-sw-registration");n.swRegistration=e}})}function G0(n,e){return M(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=jm)})}function K0(n,e){return M(this,null,function*(){if(!navigator)throw Ze.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Ze.create("permission-blocked");return yield G0(n,e?.vapidKey),yield z0(n,e?.serviceWorkerRegistration),x0(n)})}function W0(n,e,t){return M(this,null,function*(){let i=H0(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[zm],message_name:t[_0],message_time:t[y0],message_device_time:Math.floor(Date.now()/1e3)})})}function H0(n){switch(n){case js.NOTIFICATION_CLICKED:return"notification_open";case js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Q0(n,e){return M(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===js.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Bm(t)):n.onMessageHandler.next(Bm(t)));let i=t.data;U0(i)&&i[v0]==="1"&&(yield W0(n,t.messageType,i))})}var qm="@firebase/messaging",$m="0.12.17";var Y0=n=>{let e=new rc(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>Q0(e,t)),e},X0=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:i=>K0(e,i)}};function J0(){Ae(new Ce("messaging",Y0,"PUBLIC")),Ae(new Ce("messaging-internal",X0,"PRIVATE")),q(qm,$m),q(qm,$m,"esm2017")}function Hm(){return M(this,null,function*(){try{yield Jn()}catch{return!1}return typeof window<"u"&&an()&&qi()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Qm(n=Ge()){return Hm().then(e=>{if(!e)throw Ze.create("unsupported-browser")},e=>{throw Ze.create("indexed-db-unsupported")}),Fe(we(n),"messaging").getImmediate()}J0();var Er=class{constructor(e){return e}},Ym="messaging",lc=class{constructor(){return Pe(Ym)}};var cc=new Te("angularfire2.messaging-instances");function Z0(n,e,t){if(Qn(t))return null;let i=Re(Ym,n,e);return i&&new Er(i)}function eI(n){return(e,t,i)=>{if(Qn(i))return null;let r=e.runOutsideAngular(()=>n(t));return new Er(r)}}var tI={provide:lc,deps:[[new W,cc]]},nI={provide:Er,useFactory:Z0,deps:[[new W,cc],ke,dt]};function Xm(n,...e){return q("angularfire",Ee.full,"fcm"),Ie([nI,tI,{provide:cc,useFactory:eI(n),multi:!0,deps:[he,_e,dt,Ne,xe,...e]}])}var Jm=ve(Qm,!0);var Tr=class{constructor(e){return e}},Zm="performance",uc=class{constructor(){return Pe(Zm)}};var hc=new Te("angularfire2.performance-instances");function iI(n,e,t){if(!Hn(t))return null;let i=Re(Zm,n,e);return i&&new Tr(i)}function rI(n){return(e,t,i)=>{if(!Hn(t))return null;let r=e.runOutsideAngular(()=>n(i));return new Tr(r)}}var sI={provide:uc,deps:[[new W,hc]]},oI={provide:Tr,useFactory:iI,deps:[[new W,hc],ke,dt]};function eg(n,...e){return q("angularfire",Ee.full,"perf"),Ie([oI,sI,{provide:hc,useFactory:rI(n),multi:!0,deps:[he,dt,_e,Ne,xe,...e]}])}var tg=ve(Yh,!0);var ag="firebasestorage.googleapis.com",aI="storageBucket",lI=2*60*1e3,cI=10*60*1e3;var xt=class n extends bt{constructor(e,t,i=0){super(dc(e),`Firebase Storage: ${t} (${dc(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ht=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ht||{});function dc(n){return"storage/"+n}function uI(){let n="An unknown error occurred, please check the error payload for server response.";return new xt(Ht.UNKNOWN,n)}function hI(){return new xt(Ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dI(){return new xt(Ht.CANCELED,"User canceled the upload/download.")}function fI(n){return new xt(Ht.INVALID_URL,"Invalid URL '"+n+"'.")}function pI(n){return new xt(Ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ng(n){return new xt(Ht.INVALID_ARGUMENT,n)}function lg(){return new xt(Ht.APP_DELETED,"The Firebase app was deleted.")}function mI(n){return new xt(Ht.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Wt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw pI(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}let m="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${g}/${m}/b/${r}/o${T}`,"i"),C={bucket:1,path:3},N=t===ag?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",B=new RegExp(`^https?://${N}/${r}/${k}`,"i"),G=[{regex:l,indices:h,postModify:o},{regex:R,indices:C,postModify:d},{regex:B,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<G.length;j++){let Ue=G[j],oe=Ue.regex.exec(e);if(oe){let w=oe[Ue.indices.bucket],p=oe[Ue.indices.path];p||(p=""),i=new n(w,p),Ue.postModify(i);break}}if(i==null)throw fI(e);return i}},fc=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function gI(n,e,t){let i=1,r=null,o=null,a=!1,l=0;function h(){return l===2}let d=!1;function m(...k){d||(d=!0,e.apply(null,k))}function g(k){r=setTimeout(()=>{r=null,n(R,h())},k)}function T(){o&&clearTimeout(o)}function R(k,...B){if(d){T();return}if(k){T(),m.call(null,k,...B);return}if(h()||a){T(),m.call(null,k,...B);return}i<64&&(i*=2);let G;l===1?(l=2,G=0):G=(i+Math.random())*1e3,g(G)}let C=!1;function N(k){C||(C=!0,T(),!d&&(r!==null?(k||(l=2),clearTimeout(r),g(0)):k||(l=1)))}return g(0),o=setTimeout(()=>{a=!0,N(!0)},t),N}function _I(n){n(!1)}function yI(n){return n!==void 0}function ig(n,e,t,i){if(i<e)throw ng(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ng(`Invalid value for '${n}'. Expected ${t} or less.`)}function vI(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var pc=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(pc||{});function wI(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||r||o}var mc=class{constructor(e,t,i,r,o,a,l,h,d,m,g,T=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=g,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,C)=>{this.resolve_=R,this.reject_=C,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new bi(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=l=>{let h=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let l=o.getErrorCode()===pc.NO_ERROR,h=o.getStatus();if(!l||wI(h,this.additionalRetryCodes_)&&this.retry){let m=o.getErrorCode()===pc.ABORT;i(!1,new bi(!1,null,m));return}let d=this.successCodes_.indexOf(h)!==-1;i(!0,new bi(d,o))})},t=(i,r)=>{let o=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{let h=this.callback_(l,l.getResponse());yI(h)?o(h):o()}catch(h){a(h)}else if(l!==null){let h=uI();h.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,h)):a(h)}else if(r.canceled){let h=this.appDelete_?lg():dI();a(h)}else{let h=hI();a(h)}};this.canceled_?t(!1,new bi(!1,null,!0)):this.backoffId_=gI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_I(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bi=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function EI(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function TI(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function II(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bI(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function SI(n,e,t,i,r,o,a=!0){let l=vI(n.urlParams),h=n.url+l,d=Object.assign({},n.headers);return II(d,e),EI(d,t),TI(d,o),bI(d,i),new mc(h,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,a)}function CI(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AI(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var CP=256*1024;var gc=class n{constructor(e,t){this._service=e,t instanceof Wt?this._location=t:this._location=Wt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AI(this._location.path)}get storage(){return this._service}get parent(){let e=CI(this._location.path);if(e===null)return null;let t=new Wt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mI(e)}};function rg(n,e){let t=e?.[aI];return t==null?null:Wt.makeFromBucketSpec(t,n)}function RI(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:Xn(r,n.app.options.projectId))}var _c=class{constructor(e,t,i,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=ag,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lI,this._maxUploadRetryTime=cI,this._requests=new Set,r!=null?this._bucket=Wt.makeFromBucketSpec(r,this._host):this._bucket=rg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=rg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ig("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ig("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return M(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return M(this,null,function*(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gc(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new fc(lg());{let a=SI(e,this._appId,i,r,t,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return M(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},sg="@firebase/storage",og="0.13.7";var cg="storage";function ug(n=Ge(),e){n=we(n);let i=Fe(n,cg).getImmediate({identifier:e}),r=on("storage");return r&&hg(i,...r),i}function hg(n,e,t,i={}){RI(n,e,t,i)}function PI(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new _c(t,i,r,e,un)}function NI(){Ae(new Ce(cg,PI,"PUBLIC").setMultipleInstances(!0)),q(sg,og,""),q(sg,og,"esm2017")}NI();var Ir=class{constructor(e){return e}},dg="storage",yc=class{constructor(){return Pe(dg)}};var vc=new Te("angularfire2.storage-instances");function kI(n,e){let t=Re(dg,n,e);return t&&new Ir(t)}function xI(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ir(i)}}var DI={provide:yc,deps:[[new W,vc]]},OI={provide:Ir,useFactory:kI,deps:[[new W,vc],ke]};function fg(n,...e){return q("angularfire",Ee.full,"gcs"),Ie([OI,DI,{provide:vc,useFactory:xI(n),multi:!0,deps:[he,_e,Ne,xe,[new W,hn],[new W,At],...e]}])}var pg=ve(ug,!0);var wc="@firebase/remote-config",mg="0.6.0";var _g="remote-config",gg=100;var MI={"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},it=new Zn("remoteconfig","Remote Config",MI);function yg(n=Ge(),e={}){var t,i;n=we(n);let r=Fe(n,_g);if(r.isInitialized()){let a=r.getOptions();if(ln(a,e))return r.getImmediate();throw it.create("already-initialized")}r.initialize({options:e});let o=r.getImmediate();return e.initialFetchResponse&&(o._initializePromise=Promise.all([o._storage.setLastSuccessfulFetchResponse(e.initialFetchResponse),o._storage.setActiveConfigEtag(((t=e.initialFetchResponse)===null||t===void 0?void 0:t.eTag)||""),o._storageCache.setLastSuccessfulFetchTimestampMillis(Date.now()),o._storageCache.setLastFetchStatus("success"),o._storageCache.setActiveConfig(((i=e.initialFetchResponse)===null||i===void 0?void 0:i.config)||{})]).then(),o._isInitializationComplete=!0),o}function vg(n){let e=we(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var Ec=class{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){return M(this,null,function*(){let[t,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return i;e.eTag=i&&i.eTag;let r=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(o),r})}};function FI(n=navigator){return n.languages&&n.languages[0]||n.language}var Tc=class{constructor(e,t,i,r,o,a){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=o,this.appId=a}fetch(e){return M(this,null,function*(){let[t,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:i,app_id:this.appId,language_code:FI(),custom_signals:e.customSignals},h={method:"POST",headers:a,body:JSON.stringify(l)},d=fetch(o,h),m=new Promise((k,B)=>{e.signal.addEventListener(()=>{let z=new Error("The operation was aborted.");z.name="AbortError",B(z)})}),g;try{yield Promise.race([d,m]),g=yield d}catch(k){let B="fetch-client-network";throw k?.name==="AbortError"&&(B="fetch-timeout"),it.create(B,{originalErrorMessage:k?.message})}let T=g.status,R=g.headers.get("ETag")||void 0,C,N;if(g.status===200){let k;try{k=yield g.json()}catch(B){throw it.create("fetch-client-parse",{originalErrorMessage:B?.message})}C=k.entries,N=k.state}if(N==="INSTANCE_STATE_UNSPECIFIED"?T=500:N==="NO_CHANGE"?T=304:(N==="NO_TEMPLATE"||N==="EMPTY_CONFIG")&&(C={}),T!==304&&T!==200)throw it.create("fetch-status",{httpStatus:T});return{status:T,eTag:R,config:C}})}};function LI(n,e){return new Promise((t,i)=>{let r=Math.max(e-Date.now(),0),o=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(o),i(it.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VI(n){if(!(n instanceof bt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Ic=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return M(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(r,o){return M(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:i}){yield LI(e.signal,t);try{let a=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),a}catch(a){if(!VI(a))throw a;let l={throttleEndTimeMillis:Date.now()+zi(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(l),this.attemptFetch(e,l)}})}};var UI=60*1e3,BI=12*60*60*1e3,bc=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,i,r,o){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:UI,minimumFetchIntervalMillis:BI},this.defaultConfig={}}};function zs(n,e){let t=n.target.error||void 0;return it.create(e,{originalErrorMessage:t&&t?.message})}var _n="app_namespace_store",qI="firebase_remote_config",$I=1;function jI(){return new Promise((n,e)=>{try{let t=indexedDB.open(qI,$I);t.onerror=i=>{e(zs(i,"storage-open"))},t.onsuccess=i=>{n(i.target.result)},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(_n,{keyPath:"compositeKey"})}}}catch(t){e(it.create("storage-open",{originalErrorMessage:t?.message}))}})}var Gs=class{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}},Sc=class extends Gs{constructor(e,t,i,r=jI()){super(),this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}setCustomSignals(e){return M(this,null,function*(){let i=(yield this.openDbPromise).transaction([_n],"readwrite"),r=yield this.getWithTransaction("custom_signals",i),o=wg(e,r||{});return yield this.setWithTransaction("custom_signals",o,i),o})}getWithTransaction(e,t){return M(this,null,function*(){return new Promise((i,r)=>{let o=t.objectStore(_n),a=this.createCompositeKey(e);try{let l=o.get(a);l.onerror=h=>{r(zs(h,"storage-get"))},l.onsuccess=h=>{let d=h.target.result;i(d?d.value:void 0)}}catch(l){r(it.create("storage-get",{originalErrorMessage:l?.message}))}})})}setWithTransaction(e,t,i){return M(this,null,function*(){return new Promise((r,o)=>{let a=i.objectStore(_n),l=this.createCompositeKey(e);try{let h=a.put({compositeKey:l,value:t});h.onerror=d=>{o(zs(d,"storage-set"))},h.onsuccess=()=>{r()}}catch(h){o(it.create("storage-set",{originalErrorMessage:h?.message}))}})})}get(e){return M(this,null,function*(){let i=(yield this.openDbPromise).transaction([_n],"readonly");return this.getWithTransaction(e,i)})}set(e,t){return M(this,null,function*(){let r=(yield this.openDbPromise).transaction([_n],"readwrite");return this.setWithTransaction(e,t,r)})}delete(e){return M(this,null,function*(){let t=yield this.openDbPromise;return new Promise((i,r)=>{let a=t.transaction([_n],"readwrite").objectStore(_n),l=this.createCompositeKey(e);try{let h=a.delete(l);h.onerror=d=>{r(zs(d,"storage-delete"))},h.onsuccess=()=>{i()}}catch(h){r(it.create("storage-delete",{originalErrorMessage:h?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}},Cc=class extends Gs{constructor(){super(...arguments),this.storage={}}get(e){return M(this,null,function*(){return Promise.resolve(this.storage[e])})}set(e,t){return M(this,null,function*(){return this.storage[e]=t,Promise.resolve(void 0)})}delete(e){return M(this,null,function*(){return this.storage[e]=void 0,Promise.resolve()})}setCustomSignals(e){return M(this,null,function*(){let t=this.storage.custom_signals||{};return this.storage.custom_signals=wg(e,t),Promise.resolve(this.storage.custom_signals)})}};function wg(n,e){let t=Object.assign(Object.assign({},e),n),i=Object.fromEntries(Object.entries(t).filter(([r,o])=>o!==null).map(([r,o])=>typeof o=="number"?[r,o.toString()]:[r,o]));if(Object.keys(i).length>gg)throw it.create("custom-signal-max-allowed-signals",{maxSignals:gg});return i}var Ac=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return M(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=this.storage.getCustomSignals(),o=yield e;o&&(this.lastFetchStatus=o);let a=yield t;a&&(this.lastSuccessfulFetchTimestampMillis=a);let l=yield i;l&&(this.activeConfig=l);let h=yield r;h&&(this.customSignals=h)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}setCustomSignals(e){return M(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(e)})}};function zI(){Ae(new Ce(_g,n,"PUBLIC").setMultipleInstances(!0)),q(wc,mg),q(wc,mg,"esm2017");function n(e,{options:t}){let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate(),{projectId:o,apiKey:a,appId:l}=i.options;if(!o)throw it.create("registration-project-id");if(!a)throw it.create("registration-api-key");if(!l)throw it.create("registration-app-id");let h=t?.templateId||"firebase",d=an()?new Sc(l,i.name,h):new Cc,m=new Ac(d),g=new Ct(wc);g.logLevel=cn.ERROR;let T=new Tc(r,un,h,o,a,l),R=new Ic(T,d),C=new Ec(R,d,m,g),N=new bc(i,C,m,d,g);return vg(N),N}}zI();var br=class{constructor(e){return e}},Eg="remote-config",Rc=class{constructor(){return Pe(Eg)}};var Pc=new Te("angularfire2.remote-config-instances");function GI(n,e,t){if(Qn(t))return null;let i=Re(Eg,n,e);return i&&new br(i)}function KI(n){return(e,t,i)=>{if(Qn(i))return null;let r=e.runOutsideAngular(()=>n(t));return new br(r)}}var WI={provide:Rc,deps:[[new W,Pc]]},HI={provide:br,useFactory:GI,deps:[[new W,Pc],ke,dt]};function Tg(n,...e){return q("angularfire",Ee.full,"rc"),Ie([HI,WI,{provide:Pc,useFactory:KI(n),multi:!0,deps:[he,_e,dt,Ne,xe,...e]}])}var Ig=ve(yg,!0);var bg="@firebase/vertexai",Sg="1.2.0";var Cg="vertexAI",Ag="us-central1";var DN=180*1e3;var Nc=class{constructor(e,t,i,r){var o;this.app=e,this.options=r;let a=i?.getImmediate({optional:!0}),l=t?.getImmediate({optional:!0});this.auth=l||null,this.appCheck=a||null,this.location=((o=this.options)===null||o===void 0?void 0:o.location)||Ag}_delete(){return Promise.resolve()}};var ON=new Ct("@firebase/vertexai");var kc=function(n){return n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n}(kc||{});var MN=[kc.RECITATION,kc.SAFETY];function Rg(n=Ge(),e){return n=we(n),Fe(n,Cg).getImmediate({identifier:e?.location||Ag})}function QI(){Ae(new Ce(Cg,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Nc(t,i,r,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(bg,Sg),q(bg,Sg,"esm2017")}QI();var Sr=class{constructor(e){return e}},Pg="vertexai",xc=class{constructor(){return Pe(Pg)}};var Dc=new Te("angularfire2.vertexai-instances");function YI(n,e){let t=Re(Pg,n,e);return t&&new Sr(t)}function XI(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Sr(i)}}var JI={provide:xc,deps:[[new W,Dc]]},ZI={provide:Sr,useFactory:YI,deps:[[new W,Dc],ke]};function Ng(n,...e){return q("angularfire",Ee.full,"vertexai"),Ie([ZI,JI,{provide:Dc,useFactory:XI(n),multi:!0,deps:[he,_e,Ne,xe,[new W,At],...e]}])}var kg=ve(Rg,!0);var eb={projectId:"graduation-project-704b9",appId:"1:159614579205:web:c0dfd56cf057d7635ce26c",storageBucket:"graduation-project-704b9.appspot.com",apiKey:"AIzaSyCJhh6RhbGA52js5L1blEEU0EF_pTy1-JU",authDomain:"graduation-project-704b9.firebaseapp.com",messagingSenderId:"159614579205",measurementId:"G-K9DF60BE90"},xg={providers:[Ju({eventCoalescing:!0}),dh(Xh),Cd(),Ih(()=>Sh(eb)),Nh(()=>xh()),Kd(()=>jd()),Ff(()=>Lf()),Am(()=>Rm()),Mm(()=>Fm()),Xm(()=>Jm()),eg(()=>tg()),fg(()=>pg()),Tg(()=>Ig()),Ng(()=>kg()),Ah(()=>{let n=new Ch("your-site-key");return Rh(bh(),{provider:n,isTokenAutoRefreshEnabled:!0})}),Gd,ya,nh(ih())]};sh(Xr,xg).catch(n=>console.error(n));
